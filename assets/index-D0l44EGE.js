const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AppMobile-rkgFwx5D.js","assets/charts-CdyawcWy.js","assets/vendor-C4njvn5L.js","assets/supabase-Dv_jnl9j.js"])))=>i.map(i=>d[i]);
import{C as As,r as pi,j as e}from"./charts-CdyawcWy.js";import{a as gi,r as h,R as tn,u as St,L as Bt,B as xi,b as ui,c as bt}from"./vendor-C4njvn5L.js";import{c as fi}from"./supabase-Dv_jnl9j.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))a(f);new MutationObserver(f=>{for(const N of f)if(N.type==="childList")for(const r of N.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function p(f){const N={};return f.integrity&&(N.integrity=f.integrity),f.referrerPolicy&&(N.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?N.credentials="include":f.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function a(f){if(f.ep)return;f.ep=!0;const N=p(f);fetch(f.href,N)}})();var qn={},Ss=gi;qn.createRoot=Ss.createRoot,qn.hydrateRoot=Ss.hydrateRoot;const mi="modulepreload",bi=function(l){return"/"+l},ks={},yi=function(n,p,a){let f=Promise.resolve();if(p&&p.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),d=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));f=Promise.allSettled(p.map($=>{if($=bi($),$ in ks)return;ks[$]=!0;const R=$.endsWith(".css"),D=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${$}"]${D}`))return;const J=document.createElement("link");if(J.rel=R?"stylesheet":mi,R||(J.as="script"),J.crossOrigin="",J.href=$,d&&J.setAttribute("nonce",d),document.head.appendChild(J),R)return new Promise((ie,me)=>{J.addEventListener("load",ie),J.addEventListener("error",()=>me(new Error(`Unable to preload CSS for ${$}`)))})}))}function N(r){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=r,window.dispatchEvent(d),!d.defaultPrevented)throw r}return f.then(r=>{for(const d of r||[])d.status==="rejected"&&N(d.reason);return n().catch(N)})},Ps="https://fiertkuxlafeeqycywjh.supabase.co",ji="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZpZXJ0a3V4bGFmZWVxeWN5d2poIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQyNzc5MzAsImV4cCI6MjA1OTg1MzkzMH0.VB4afTl9wLxtdodrf7klAyCQIVMuLc2I1gRwh1v23tg";console.log("âœ… Supabase client initialized successfully"),console.log("Supabase URL:",Ps);const ve=fi(Ps,ji,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0,storageKey:"running-analysis-supabase-auth-token"},global:{headers:{"X-Client-Info":"running-analysis-app"},fetch:(l,n={})=>{const a=new AbortController,f=setTimeout(()=>a.abort(),3e4);return fetch(l,{...n,signal:a.signal}).finally(()=>clearTimeout(f))}}});ve.auth.onAuthStateChange((l,n)=>{var p;(l==="SIGNED_IN"||l==="SIGNED_OUT"||l==="USER_UPDATED")&&console.log("ğŸ” Auth state changed:",l,(p=n==null?void 0:n.user)==null?void 0:p.email)});As.register(...pi);function ws(l,n,p,a="topSpeed",f,N){if(!l.length||!n.length)return null;const r=[],d=f==null?void 0:f.heightCm,$=f==null?void 0:f.gender,R=N==="dash",D=N==="accel",J=R?"ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥":D?"åŠ é€Ÿèµ°":"åŠ é€Ÿå±€é¢",ie=n.reduce((L,Y)=>L+(Y.angles.trunkAngle??90),0)/n.length;if(a==="acceleration"){const Y=l.map(v=>v.trunkAngleAtContact??null).filter(v=>v!==null),ye=l.map(v=>v.kneeFlexAtContact??null).filter(v=>v!==null);if(Y.length>=3){const v=Y[0],be=Y[Y.length-1],W=be-v;let A,se="",le="";R?v>=40&&v<=50?(A="excellent",se=`1æ­©ç›®ã®ä½“å¹¹è§’åº¦: ${v.toFixed(1)}Â° - ç†æƒ³çš„ï¼ˆç›®æ¨™:45Â°ï¼‰`,le="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ç›´å¾Œã®å‰å‚¾è§’åº¦ãŒç†æƒ³çš„ã§ã™ã€‚é‡å¿ƒã‚’å‰æ–¹ã«ä½ç½®ã•ã›ã€èº«ä½“ãŒè‡ªç„¶ã«å‰æ–¹ã¸å€’ã‚Œè¾¼ã‚€ã“ã¨ã§å¼·ã„æ°´å¹³æ¨é€²åŠ›ã‚’ç”Ÿã¿å‡ºã›ã¦ã„ã¾ã™ã€‚"):v>=35&&v<40?(A="good",se=`1æ­©ç›®ã®ä½“å¹¹è§’åº¦: ${v.toFixed(1)}Â° - ã‚„ã‚„å‰å‚¾ãŒå¼·ã„ï¼ˆç›®æ¨™:45Â°ï¼‰`,le="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘1æ­©ç›®ã®å‰å‚¾ãŒã‚„ã‚„å¼·ã„ã§ã™ã€‚ãƒ–ãƒ­ãƒƒã‚¯ã‚’æŠ¼ã—åˆ‡ã‚‹éš›ã®ãƒãƒ©ãƒ³ã‚¹ã«æ³¨æ„ã—ã€40-50Â°ã®ç¯„å›²ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚"):v>50&&v<=60?(A="good",se=`1æ­©ç›®ã®ä½“å¹¹è§’åº¦: ${v.toFixed(1)}Â° - ã‚„ã‚„å‰å‚¾ãŒæµ…ã„ï¼ˆç›®æ¨™:45Â°ï¼‰`,le="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ç›´å¾Œã®å‰å‚¾ãŒã‚„ã‚„æµ…ã„ã§ã™ã€‚ãƒ–ãƒ­ãƒƒã‚¯ã‚’æŠ¼ã—åˆ‡ã£ãŸå¾Œã€45Â°å‰å¾Œã®å¼·ã„å‰å‚¾ã‚’ç¶­æŒã—ã€æ°´å¹³æ¨é€²åŠ›ã‚’æœ€å¤§åŒ–ã—ã¾ã—ã‚‡ã†ã€‚ã€Œä½ãå‡ºã‚‹ã€æ„è­˜ã‚’æŒã£ã¦ãã ã•ã„ã€‚"):v>60?(A="fair",se=`1æ­©ç›®ã®ä½“å¹¹è§’åº¦: ${v.toFixed(1)}Â° - å‰å‚¾ä¸è¶³ï¼ˆç›®æ¨™:45Â°ï¼‰`,le="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆç›´å¾Œã‹ã‚‰ä½“å¹¹ãŒèµ·ãã™ãã¦ã„ã¾ã™ã€‚ã€Œã‚»ãƒƒãƒˆã€ã®å§¿å‹¢ã‹ã‚‰é ­éƒ¨ã‹ã‚‰è¶³é¦–ã¾ã§ä¸€ç›´ç·šã‚’ä¿ã¡ã€èº«ä½“å…¨ä½“ã§å‰æ–¹ã¸å€’ã‚Œè¾¼ã‚€ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æŒã¡ã¾ã—ã‚‡ã†ã€‚æ—©æœŸèµ·ãä¸ŠãŒã‚Šã¯åŠ é€Ÿã‚’é˜»å®³ã—ã¾ã™ã€‚"):(A="fair",se=`1æ­©ç›®ã®ä½“å¹¹è§’åº¦: ${v.toFixed(1)}Â° - éåº¦ãªå‰å‚¾ï¼ˆç›®æ¨™:45Â°ï¼‰`,le="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘1æ­©ç›®ã®å‰å‚¾ãŒå¼·ã™ãã¾ã™ã€‚ãƒ–ãƒ­ãƒƒã‚¯ã‚’æŠ¼ã—åˆ‡ã‚‹éš›ã«ãƒãƒ©ãƒ³ã‚¹ã‚’å´©ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚40-50Â°ã®ç¯„å›²ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚"):v>=45&&v<=60?(A="excellent",se=`1æ­©ç›®ã®ä½“å¹¹è§’åº¦: ${v.toFixed(1)}Â° - ç†æƒ³çš„ï¼ˆç›®æ¨™:50-60Â°ï¼‰`,le="ã€åŠ é€Ÿèµ°ã€‘åŠ©èµ°ã‹ã‚‰ã®1æ­©ç›®ã®å‰å‚¾è§’åº¦ãŒç†æƒ³çš„ã§ã™ã€‚åŠ©èµ°ã®å‹¢ã„ã‚’æ´»ã‹ã—ãªãŒã‚‰ã€åŠ¹ç‡çš„ã«åŠ é€Ÿå±€é¢ã¸ç§»è¡Œã§ãã¦ã„ã¾ã™ã€‚"):v>=40&&v<45?(A="good",se=`1æ­©ç›®ã®ä½“å¹¹è§’åº¦: ${v.toFixed(1)}Â° - ã‚„ã‚„å‰å‚¾ãŒå¼·ã„ï¼ˆç›®æ¨™:50-60Â°ï¼‰`,le="ã€åŠ é€Ÿèµ°ã€‘å‰å‚¾ãŒã‚„ã‚„å¼·ã„ã§ã™ã€‚åŠ é€Ÿèµ°ã§ã¯åŠ©èµ°ãŒã‚ã‚‹ãŸã‚ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã»ã©æ·±ã„å‰å‚¾ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¡ãªãŒã‚‰50-60Â°ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚"):v>60&&v<=70?(A="good",se=`1æ­©ç›®ã®ä½“å¹¹è§’åº¦: ${v.toFixed(1)}Â° - ã‚„ã‚„å‰å‚¾ãŒæµ…ã„ï¼ˆç›®æ¨™:50-60Â°ï¼‰`,le="ã€åŠ é€Ÿèµ°ã€‘åŠ©èµ°ã‹ã‚‰ã®1æ­©ç›®ã®å‰å‚¾ãŒã‚„ã‚„æµ…ã„ã§ã™ã€‚åŠ©èµ°ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’æ´»ã‹ã™ãŸã‚ã€ã‚‚ã†å°‘ã—å‰å‚¾ã‚’æ·±ãã—ã¦æ°´å¹³æ¨é€²åŠ›ã‚’é«˜ã‚ã¾ã—ã‚‡ã†ã€‚"):v>70?(A="fair",se=`1æ­©ç›®ã®ä½“å¹¹è§’åº¦: ${v.toFixed(1)}Â° - å‰å‚¾ä¸è¶³ï¼ˆç›®æ¨™:50-60Â°ï¼‰`,le="ã€åŠ é€Ÿèµ°ã€‘ä½“å¹¹ãŒèµ·ãã™ãã¦ã„ã¾ã™ã€‚åŠ é€Ÿèµ°ã§ã‚‚å‰å‚¾å§¿å‹¢ã¯é‡è¦ã§ã™ã€‚åŠ©èµ°ã®å‹¢ã„ã‚’æ´»ã‹ã™ãŸã‚ã€50-60Â°ã®å‰å‚¾ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚"):(A="fair",se=`1æ­©ç›®ã®ä½“å¹¹è§’åº¦: ${v.toFixed(1)}Â° - éåº¦ãªå‰å‚¾ï¼ˆç›®æ¨™:50-60Â°ï¼‰`,le="ã€åŠ é€Ÿèµ°ã€‘å‰å‚¾ãŒå¼·ã™ãã¾ã™ã€‚åŠ é€Ÿèµ°ã§ã¯åŠ©èµ°ãŒã‚ã‚‹ãŸã‚ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã»ã©æ·±ã„å‰å‚¾ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒãƒ©ãƒ³ã‚¹ã‚’å´©ã•ãªã„ã‚ˆã†50-60Â°ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚"),r.push({category:`1æ­©ç›®ã®å§¿å‹¢ï¼ˆ${J}ï¼‰`,score:A,icon:A==="excellent"||A==="good"?"âœ…":"âš ï¸",message:se,advice:le});const Fe=R?Math.min(Y.length-1,8)*4:Math.min(Y.length-1,6)*3;let de,he="",j="";if(W>=Fe*.7&&W<=Fe*1.5){const Ne=W/(Y.length-1);R?Ne>=2&&Ne<=6?(de="excellent",he=`å§¿å‹¢ã®æ®µéšçš„å¤‰åŒ–: ${v.toFixed(0)}Â°â†’${be.toFixed(0)}Â°ï¼ˆ${Y.length}æ­©ã§+${W.toFixed(0)}Â°ï¼‰- ç†æƒ³çš„`,j="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘ç´ æ™´ã‚‰ã—ã„ï¼ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹å¾Œã€1æ­©ã”ã¨ã«æ®µéšçš„ã«ä½“å¹¹ã‚’èµ·ã“ã›ã¦ã„ã¾ã™ã€‚8æ­©ç›®ã¾ã§ã«75Â°ç¨‹åº¦ã«åˆ°é”ã™ã‚‹ç†æƒ³çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚"):(de="good",he=`å§¿å‹¢ã®æ®µéšçš„å¤‰åŒ–: ${v.toFixed(0)}Â°â†’${be.toFixed(0)}Â°ï¼ˆ${Y.length}æ­©ã§+${W.toFixed(0)}Â°ï¼‰- è‰¯å¥½`,j="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘æ¦‚ã­è‰¯å¥½ãªæ®µéšçš„èµ·ãä¸ŠãŒã‚Šã§ã™ã€‚1æ­©ã‚ãŸã‚Š3-5Â°ã®å¤‰åŒ–ã‚’ç›®æŒ‡ã™ã¨ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ãªåŠ é€ŸãŒå¯èƒ½ã§ã™ã€‚"):Ne>=2&&Ne<=5?(de="excellent",he=`å§¿å‹¢ã®æ®µéšçš„å¤‰åŒ–: ${v.toFixed(0)}Â°â†’${be.toFixed(0)}Â°ï¼ˆ${Y.length}æ­©ã§+${W.toFixed(0)}Â°ï¼‰- ç†æƒ³çš„`,j="ã€åŠ é€Ÿèµ°ã€‘ç´ æ™´ã‚‰ã—ã„ï¼åŠ©èµ°ã‹ã‚‰ã‚¹ãƒ ãƒ¼ã‚ºã«åŠ é€Ÿå±€é¢ã¸ç§»è¡Œã—ã€æ®µéšçš„ã«ä½“å¹¹ã‚’èµ·ã“ã›ã¦ã„ã¾ã™ã€‚åŠ¹ç‡çš„ã«ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ã¸ç§»è¡Œã§ãã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚"):(de="good",he=`å§¿å‹¢ã®æ®µéšçš„å¤‰åŒ–: ${v.toFixed(0)}Â°â†’${be.toFixed(0)}Â°ï¼ˆ${Y.length}æ­©ã§+${W.toFixed(0)}Â°ï¼‰- è‰¯å¥½`,j="ã€åŠ é€Ÿèµ°ã€‘æ¦‚ã­è‰¯å¥½ãªæ®µéšçš„èµ·ãä¸ŠãŒã‚Šã§ã™ã€‚åŠ é€Ÿèµ°ã¯åŠ©èµ°ãŒã‚ã‚‹ãŸã‚ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã‚ˆã‚Šæ—©ããƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰å§¿å‹¢ã¸ç§»è¡Œã§ãã¾ã™ã€‚")}else W<Fe*.3?(de="fair",he=`å§¿å‹¢ã®æ®µéšçš„å¤‰åŒ–: ${v.toFixed(0)}Â°â†’${be.toFixed(0)}Â°ï¼ˆ${Y.length}æ­©ã§+${W.toFixed(0)}Â°ï¼‰- èµ·ãä¸ŠãŒã‚Šä¸è¶³`,R?j="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘å‰å‚¾å§¿å‹¢ã‚’ç¶­æŒã—ã™ãã¦ã„ã¾ã™ã€‚8æ­©ç›®ã¾ã§ã«75Â°ç¨‹åº¦ã¾ã§æ®µéšçš„ã«èµ·ã“ã™ã“ã¨ã§ã€ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ã¸ã®ç§»è¡ŒãŒã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šã¾ã™ã€‚":j="ã€åŠ é€Ÿèµ°ã€‘å‰å‚¾å§¿å‹¢ã‚’ç¶­æŒã—ã™ãã¦ã„ã¾ã™ã€‚åŠ é€Ÿèµ°ã§ã¯åŠ©èµ°ã®å‹¢ã„ãŒã‚ã‚‹ãŸã‚ã€6æ­©ç¨‹åº¦ã§ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰å§¿å‹¢ï¼ˆ75-80Â°ï¼‰ã¸ç§»è¡Œã—ã¾ã—ã‚‡ã†ã€‚"):W>Fe*2?(de="fair",he=`å§¿å‹¢ã®æ®µéšçš„å¤‰åŒ–: ${v.toFixed(0)}Â°â†’${be.toFixed(0)}Â°ï¼ˆ${Y.length}æ­©ã§+${W.toFixed(0)}Â°ï¼‰- æ€¥æ¿€ãªèµ·ãä¸ŠãŒã‚Š`,R?j="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘ä½“å¹¹ã®èµ·ãä¸ŠãŒã‚ŠãŒæ€¥ã™ãã¾ã™ã€‚ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹å¾Œã€åŠ é€ŸåŠ›ãŒååˆ†ã«ç™ºæ®ã•ã‚Œã‚‹å‰ã«èµ·ãä¸ŠãŒã‚‹ã¨ã€æ°´å¹³æ¨é€²åŠ›ãŒä½ä¸‹ã—ã¾ã™ã€‚8æ­©ç¨‹åº¦ã‹ã‘ã¦æ®µéšçš„ã«èµ·ã“ã—ã¾ã—ã‚‡ã†ã€‚":j="ã€åŠ é€Ÿèµ°ã€‘ä½“å¹¹ã®èµ·ãä¸ŠãŒã‚ŠãŒæ€¥ã™ãã¾ã™ã€‚åŠ©èµ°ã®å‹¢ã„ã‚’æ´»ã‹ã™ãŸã‚ã€æ€¥ã«èµ·ãä¸ŠãŒã‚‰ãš6æ­©ç¨‹åº¦ã§æ®µéšçš„ã«ç§»è¡Œã—ã¾ã—ã‚‡ã†ã€‚"):W<0?(de="poor",he=`å§¿å‹¢ã®æ®µéšçš„å¤‰åŒ–: ${v.toFixed(0)}Â°â†’${be.toFixed(0)}Â°ï¼ˆ${Y.length}æ­©ã§${W.toFixed(0)}Â°ï¼‰- ä¸é©åˆ‡ãªãƒ‘ã‚¿ãƒ¼ãƒ³`,j=`ã€${J}ã€‘åŠ é€Ÿä¸­ã«å‰å‚¾ãŒå¼·ããªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯è‡ªç„¶ãªå‹•ä½œãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚1æ­©ç›®ã‹ã‚‰æ®µéšçš„ã«ä½“å¹¹ã‚’èµ·ã“ã—ã¦ã„ãæ„è­˜ã‚’æŒã¡ã¾ã—ã‚‡ã†ã€‚`):(de="good",he=`å§¿å‹¢ã®æ®µéšçš„å¤‰åŒ–: ${v.toFixed(0)}Â°â†’${be.toFixed(0)}Â°ï¼ˆ${Y.length}æ­©ã§+${W.toFixed(0)}Â°ï¼‰- æ¦‚ã­é©åˆ‡`,j=`ã€${J}ã€‘æ®µéšçš„ãªèµ·ãä¸ŠãŒã‚Šã¯æ¦‚ã­é©åˆ‡ã§ã™ã€‚ã‚ˆã‚Šæ»‘ã‚‰ã‹ãªå¤‰åŒ–ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚`);r.push({category:`å§¿å‹¢ã®æ®µéšçš„å¤‰åŒ–ï¼ˆ${J}ï¼‰`,score:de,icon:de==="excellent"||de==="good"?"âœ…":de==="fair"?"âš ï¸":"âŒ",message:he,advice:j})}else ie>=42&&ie<=55?r.push({category:"å§¿å‹¢",score:"excellent",icon:"âœ…",message:"ä½“å¹¹è§’åº¦: "+ie.toFixed(1)+"Â° - é©åˆ‡ãªåŠ é€Ÿå§¿å‹¢",advice:"åŠ é€Ÿå±€é¢ã«é©ã—ãŸå‰å‚¾å§¿å‹¢ã§ã™ã€‚"}):ie>55&&ie<=70?r.push({category:"å§¿å‹¢",score:"good",icon:"âœ…",message:"ä½“å¹¹è§’åº¦: "+ie.toFixed(1)+"Â° - è‰¯å¥½",advice:"è‰¯å¥½ãªå§¿å‹¢ã§ã™ãŒã€ã‚¹ã‚¿ãƒ¼ãƒˆç›´å¾Œã¯ã‚ˆã‚Šå¼·ã„å‰å‚¾ï¼ˆ45Â°å‰å¾Œï¼‰ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚"}):ie>70?r.push({category:"å§¿å‹¢",score:"fair",icon:"âš ï¸",message:"ä½“å¹¹è§’åº¦: "+ie.toFixed(1)+"Â° - å‰å‚¾ä¸è¶³",advice:"ã‚¹ã‚¿ãƒ¼ãƒˆç›´å¾Œã®å‰å‚¾ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚45Â°å‰å¾Œã‹ã‚‰å§‹ã‚ã€8æ­©ç¨‹åº¦ã§å¾ã€…ã«èµ·ã“ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚"}):r.push({category:"å§¿å‹¢",score:"fair",icon:"âš ï¸",message:"ä½“å¹¹è§’åº¦: "+ie.toFixed(1)+"Â° - éåº¦ãªå‰å‚¾",advice:"å‰å‚¾ãŒå¼·ã™ãã¾ã™ã€‚ãƒãƒ©ãƒ³ã‚¹ã‚’å´©ã•ãªã„ã‚ˆã†ã€40-50Â°ã®ç¯„å›²ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚"});if(ye.length>=2){const v=ye[0],be=ye.length>1?ye[1]:null,W=ye.length>2?ye[2]:null;let A,se="",le="";if(R)if(v>=145&&v<=170){if(A="excellent",se=`1æ­©ç›®ã®è†è§’åº¦: ${v.toFixed(0)}Â° - ç†æƒ³çš„ãªå›ºå®šï¼ˆç›®æ¨™:150-160Â°ï¼‰`,le="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ç›´å¾Œã€è†é–¢ç¯€ã‚’é©åˆ‡ã«å›ºå®šã§ãã¦ã„ã¾ã™ã€‚è‚¡é–¢ç¯€ä¼¸å±•ä¸»å°ã§åœ°é¢ã‚’å¾Œæ–¹ã¸æŠ¼ã—ã€åŠ¹ç‡çš„ã«æ°´å¹³æ¨é€²åŠ›ã‚’å¾—ã¦ã„ã¾ã™ã€‚ã€Œè†é–¢ç¯€ã®ä¼¸å±•ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’é…ã‚‰ã›ã‚‹ã€ã¨ã„ã†ç§‘å­¦çš„çŸ¥è¦‹ã‚’å®Ÿè·µã§ãã¦ã„ã¾ã™ã€‚",be!=null&&W!=null){const Fe=v-W;Fe>=5&&Fe<=25?le+=" ãã®å¾Œã€æ®µéšçš„ã«è†ã®å¼•ãã¤ã‘ã‚’å¢—ã‚„ã›ã¦ãŠã‚Šã€ãƒ”ãƒƒãƒã®å‘ä¸Šã«ã¤ãªãŒã£ã¦ã„ã¾ã™ã€‚":Fe<5&&(le+=" ãŸã ã—ã€3æ­©ç›®ä»¥é™ã¯ã‚ˆã‚Šç©æ¥µçš„ã«è†ã‚’å¼•ãã¤ã‘ã¦ã„ãã¨ã€ãƒ”ãƒƒãƒãŒå‘ä¸Šã—ã¾ã™ã€‚")}}else v>=130&&v<145?(A="good",se=`1æ­©ç›®ã®è†è§’åº¦: ${v.toFixed(0)}Â° - ã‚„ã‚„å±ˆæ›²æ°—å‘³ï¼ˆç›®æ¨™:150-160Â°ï¼‰`,le="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ç›´å¾Œã‹ã‚‰è†ãŒã‚„ã‚„æ›²ãŒã£ã¦ã„ã¾ã™ã€‚æœ€åˆã®1-2æ­©ã¯è†ã‚’150-160Â°ç¨‹åº¦ã«å›ºå®šã—ã€è‚¡é–¢ç¯€ä¼¸å±•ã®ã¿ã§æ¨é€²åŠ›ã‚’å¾—ã¾ã—ã‚‡ã†ã€‚"):v>170?(A="good",se=`1æ­©ç›®ã®è†è§’åº¦: ${v.toFixed(0)}Â° - è†ãŒä¼¸ã³ã™ãï¼ˆç›®æ¨™:150-160Â°ï¼‰`,le="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘è†ãŒä¼¸ã³ã™ãã¦ã„ã¾ã™ã€‚å®Œå…¨ä¼¸å±•ã§ã¯ãªãã€ã‚ãšã‹ã«æ›²ã’ãŸçŠ¶æ…‹ï¼ˆ150-160Â°ï¼‰ã§å›ºå®šã™ã‚‹ã¨ã€åŠ›ã®ä¼é”åŠ¹ç‡ãŒå‘ä¸Šã—ã¾ã™ã€‚"):(A="fair",se=`1æ­©ç›®ã®è†è§’åº¦: ${v.toFixed(0)}Â° - è†ã®å±ˆæ›²ãŒæ—©ã„ï¼ˆç›®æ¨™:150-160Â°ï¼‰`,le="ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‘ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ç›´å¾Œã‹ã‚‰è†ãŒæ›²ãŒã‚Šã™ãã¦ã„ã¾ã™ã€‚æœ€åˆã®2-3æ­©ã¯è†ã‚’å›ºå®šã—ãŸã¾ã¾ã€è‚¡é–¢ç¯€ã®ä¼¸å±•å‹•ä½œã®ã¿ã§ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ç²å¾—ã—ã¦ãã ã•ã„ã€‚ç ”ç©¶ã«ã‚ˆã‚‹ã¨ã€Œè†é–¢ç¯€ã®ä¼¸å±•ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’é…ã‚‰ã›ã‚‹ã€ã“ã¨ãŒåŠ é€Ÿã«é‡è¦ã§ã™ã€‚");else if(v>=140&&v<=165){if(A="excellent",se=`1æ­©ç›®ã®è†è§’åº¦: ${v.toFixed(0)}Â° - ç†æƒ³çš„ï¼ˆç›®æ¨™:140-165Â°ï¼‰`,le="ã€åŠ é€Ÿèµ°ã€‘åŠ©èµ°ã‹ã‚‰ã®1æ­©ç›®ã§è†è§’åº¦ãŒé©åˆ‡ã§ã™ã€‚åŠ©èµ°ã®å‹¢ã„ã‚’æ´»ã‹ã—ãªãŒã‚‰ã€è‚¡é–¢ç¯€ä¼¸å±•ä¸»å°ã§åŠ é€Ÿã§ãã¦ã„ã¾ã™ã€‚",be!=null&&W!=null){const Fe=v-W;Fe>=5&&Fe<=25&&(le+=" ãã®å¾Œã€æ®µéšçš„ã«è†ã®å¼•ãã¤ã‘ã‚’å¢—ã‚„ã›ã¦ã„ã¾ã™ã€‚")}}else v>=125&&v<140?(A="good",se=`1æ­©ç›®ã®è†è§’åº¦: ${v.toFixed(0)}Â° - ã‚„ã‚„å±ˆæ›²æ°—å‘³ï¼ˆç›®æ¨™:140-165Â°ï¼‰`,le="ã€åŠ é€Ÿèµ°ã€‘è†ãŒã‚„ã‚„æ›²ãŒã£ã¦ã„ã¾ã™ãŒã€åŠ é€Ÿèµ°ã§ã¯åŠ©èµ°ã®å‹¢ã„ãŒã‚ã‚‹ãŸã‚è¨±å®¹ç¯„å›²ã§ã™ã€‚è‚¡é–¢ç¯€ä¼¸å±•ã‚’æ„è­˜ã™ã‚‹ã¨ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ãªåŠ é€ŸãŒå¯èƒ½ã§ã™ã€‚"):v>165?(A="good",se=`1æ­©ç›®ã®è†è§’åº¦: ${v.toFixed(0)}Â° - è†ãŒä¼¸ã³ã™ãï¼ˆç›®æ¨™:140-165Â°ï¼‰`,le="ã€åŠ é€Ÿèµ°ã€‘è†ãŒã‚„ã‚„ä¼¸ã³ã™ãã¦ã„ã¾ã™ã€‚ã‚ãšã‹ã«æ›²ã’ãŸçŠ¶æ…‹ã§è‚¡é–¢ç¯€ä¼¸å±•ã‚’å¼·èª¿ã™ã‚‹ã¨ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ã§ã™ã€‚"):(A="fair",se=`1æ­©ç›®ã®è†è§’åº¦: ${v.toFixed(0)}Â° - è†ã®å±ˆæ›²ãŒæ—©ã„ï¼ˆç›®æ¨™:140-165Â°ï¼‰`,le="ã€åŠ é€Ÿèµ°ã€‘1æ­©ç›®ã‹ã‚‰è†ãŒæ›²ãŒã‚Šã™ãã¦ã„ã¾ã™ã€‚åŠ é€Ÿèµ°ã§ã‚‚æœ€åˆã®æ•°æ­©ã¯è†ã‚’æ¯”è¼ƒçš„å›ºå®šã—ã€è‚¡é–¢ç¯€ä¼¸å±•ã§æ¨é€²åŠ›ã‚’å¾—ã¾ã—ã‚‡ã†ã€‚");r.push({category:`è†é–¢ç¯€ã®ä½¿ã„æ–¹ï¼ˆ${J}ï¼‰`,score:A,icon:A==="excellent"||A==="good"?"âœ…":"âš ï¸",message:se,advice:le})}}else ie>=80&&ie<=90?r.push({category:"å§¿å‹¢",score:"excellent",icon:"âœ…",message:"ä½“å¹¹è§’åº¦: "+ie.toFixed(1)+"Â° - ç†æƒ³çš„ï¼ˆãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ï¼‰",advice:"ç´ æ™´ã‚‰ã—ã„å§¿å‹¢ã§ã™ã€‚ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ç¶­æŒã«æœ€é©ãªä½“å¹¹è§’åº¦ã‚’ä¿ã¦ã¦ã„ã¾ã™ã€‚çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ã§åœ°é¢ååŠ›ã‚’æœ€å¤§åŒ–ã§ãã¦ã„ã¾ã™ã€‚"}):ie>=78&&ie<80?r.push({category:"å§¿å‹¢",score:"good",icon:"âœ…",message:"ä½“å¹¹è§’åº¦: "+ie.toFixed(1)+"Â° - è‰¯å¥½ï¼ˆãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ï¼‰",advice:"è‰¯å¥½ãªå§¿å‹¢ã§ã™ã€‚80Â°ä»¥ä¸Šã‚’ç›®æŒ‡ã™ã¨ã•ã‚‰ã«åŠ¹ç‡ãŒå‘ä¸Šã—ã¾ã™ã€‚"}):ie>90&&ie<=92?r.push({category:"å§¿å‹¢",score:"good",icon:"âœ…",message:"ä½“å¹¹è§’åº¦: "+ie.toFixed(1)+"Â° - ã»ã¼å‚ç›´ï¼ˆãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ï¼‰",advice:"ã»ã¼å‚ç›´å§¿å‹¢ã§ã™ã€‚è»½ãå‰å‚¾ï¼ˆ85-90Â°ï¼‰ã‚’æ„è­˜ã™ã‚‹ã¨ã•ã‚‰ã«åŠ¹ç‡çš„ã«ãªã‚Šã¾ã™ã€‚"}):ie<78?r.push({category:"å§¿å‹¢",score:"fair",icon:"âš ï¸",message:"ä½“å¹¹è§’åº¦: "+ie.toFixed(1)+"Â° - ã‚„ã‚„å‰å‚¾ã—ã™ãï¼ˆãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ï¼‰",advice:"ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰æ™‚ã¯å‰å‚¾ã‚’æŠ‘ãˆã€80-90Â°ã®ç¯„å›²ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ã‚’æ„è­˜ã—ã¦ãã ã•ã„ã€‚"}):r.push({category:"å§¿å‹¢",score:"fair",icon:"âš ï¸",message:"ä½“å¹¹è§’åº¦: "+ie.toFixed(1)+"Â° - ã‚„ã‚„å¾Œå‚¾ï¼ˆãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ï¼‰",advice:"å¾Œå‚¾ã—ã¦ã„ã¾ã™ã€‚ã¿ããŠã¡ã‚’å‰ã«å‡ºã—ã€ä½“å¹¹ã®è»¸ã‚’ä½œã‚‹ã“ã¨ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚80-90Â°ã®ç¯„å›²ã‚’ç›®æŒ‡ã—ã¦ãã ã•ã„ã€‚"});const me=p.avgStepPitch??0,ce=p.avgStride??0;if(me>0&&ce>0){const L=me*60;a==="acceleration"?ce>=1.4?r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ä¼¸é•·",score:"excellent",icon:"âœ…",message:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰: "+ce.toFixed(2)+"m - å„ªç§€ãªä¼¸é•·",advice:"å„ªã‚ŒãŸã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ä¼¸é•·ã§ã™ã€‚ã‚¹ã‚¿ãƒ¼ãƒˆç›´å¾Œã‹ã‚‰ä¸€æ­©ã”ã¨ã«æ®µéšçš„ã«ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ä¼¸ã°ã›ã¦ã„ã¾ã™ã€‚è†é–¢ç¯€ã‚’å›ºå®šã—ãŸã¾ã¾è‚¡é–¢ç¯€ä¼¸å±•ã§åœ°é¢ã‚’å¾Œæ–¹ã¸æŠ¼ã™å‹•ä½œãŒå®Ÿç¾ã§ãã¦ã„ã¾ã™ã€‚ã“ã®æŠ€è¡“ã«ã‚ˆã‚Šæ¥åœ°æ™‚é–“ã‚’æœ€å°é™ã«æŠ‘ãˆãªãŒã‚‰å¤§ããªæ¨é€²åŠ›ã‚’å¾—ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚"}):ce>=1.2?r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ä¼¸é•·",score:"good",icon:"âœ…",message:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰: "+ce.toFixed(2)+"m - è‰¯å¥½",advice:"è‰¯å¥½ãªã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ä¼¸é•·ã§ã™ã€‚ã•ã‚‰ã«ä¼¸ã°ã™ãŸã‚ã«ã¯ã€æœ€åˆã®2-3æ­©ã§è†é–¢ç¯€è§’åº¦ã‚’150-160Â°ç¨‹åº¦ã«å›ºå®šã—ã€è‚¡é–¢ç¯€ä¼¸å±•å‹•ä½œã®ã¿ã§ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ç²å¾—ã™ã‚‹ã“ã¨ã‚’æ„è­˜ã—ã¦ãã ã•ã„ã€‚è†ã‚’æ›²ã’ã¦å¼•ãä¸Šã’ã‚‹å‹•ä½œã¯æ°´å¹³åŠ é€Ÿã‚’å¦¨ã’ã¾ã™ã€‚"}):r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ä¼¸é•·",score:"fair",icon:"âš ï¸",message:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰: "+ce.toFixed(2)+"m - ä¼¸é•·ä¸è¶³",advice:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ä¼¸é•·ãŒä¸ååˆ†ã§ã™ã€‚ã‚¹ã‚¿ãƒ¼ãƒˆæ™‚ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ä¼¸é•·ä¸è¶³ã¯ã€è†é–¢ç¯€ã®æ—©æœŸå±ˆæ›²ï¼ˆè†ã‚’å¼•ãä¸Šã’ã‚‹å‹•ä½œï¼‰ãŒåŸå› ã§ã‚ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚æœ€åˆã®2-3æ­©ã¯è†ã‚’ä¼¸ã°ã—ãŸã¾ã¾ä¿ã¡ã€è‚¡é–¢ç¯€ä¼¸å±•ã®ã¿ã§ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ç²å¾—ã—ã¦ãã ã•ã„ã€‚æ¥åœ°ã¯èº«ä½“ã®å¾Œæ–¹ã§è¡Œã„ã€åœ°é¢ã‚’å¾Œã‚ã«æŠ¼ã™æ„è­˜ã‚’æŒã¡ã¾ã—ã‚‡ã†ã€‚"}):me>=4.5?r.push({category:"ãƒ”ãƒƒãƒãƒ»ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰",score:"excellent",icon:"âœ…",message:"ãƒ”ãƒƒãƒ: "+me.toFixed(2)+"æ­©/ç§’ ("+L.toFixed(0)+"æ­©/åˆ†) - ã‚¨ãƒªãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«",advice:"æœ€å¤§ç–¾èµ°ã‚¹ãƒ”ãƒ¼ãƒ‰é”æˆã«å¿…è¦ãªã‚¨ãƒªãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ã®ãƒ”ãƒƒãƒã§ã™ã€‚ã“ã®ãƒªã‚ºãƒ ã‚’ç¶­æŒã—ãªãŒã‚‰ã€ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã¨ã®ãƒãƒ©ãƒ³ã‚¹ã‚’èª¿æ•´ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚"}):me>=4?r.push({category:"ãƒ”ãƒƒãƒãƒ»ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰",score:"good",icon:"âœ…",message:"ãƒ”ãƒƒãƒ: "+me.toFixed(2)+"æ­©/ç§’ ("+L.toFixed(0)+"æ­©/åˆ†) - è‰¯å¥½",advice:"è‰¯å¥½ãªãƒ”ãƒƒãƒã§ã™ã€‚4.5æ­©/ç§’ï¼ˆ270æ­©/åˆ†ï¼‰ä»¥ä¸Šã‚’ç›®æŒ‡ã™ã¨ã€ã•ã‚‰ã«é«˜ã„é€Ÿåº¦ãŒæœŸå¾…ã§ãã¾ã™ã€‚"}):me>=3.5?r.push({category:"ãƒ”ãƒƒãƒãƒ»ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰",score:"fair",icon:"âš ï¸",message:"ãƒ”ãƒƒãƒ: "+me.toFixed(2)+"æ­©/ç§’ ("+L.toFixed(0)+"æ­©/åˆ†) - å‘ä¸Šã®ä½™åœ°ã‚ã‚Š",advice:"ãƒ”ãƒƒãƒãŒã‚„ã‚„ä½ã‚ã§ã™ã€‚ç ”ç©¶ãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã‚‹ã¨ã€æœ€å¤§ç–¾èµ°ã‚¹ãƒ”ãƒ¼ãƒ‰é”æˆã«ã¯4.4ã€œ5.0æ­©/ç§’ç¨‹åº¦ãŒå¿…è¦ã§ã™ã€‚è…•æŒ¯ã‚Šã®ãƒªã‚ºãƒ ã‚’é€Ÿã‚ã€æ¥åœ°æ™‚é–“ã‚’çŸ­ç¸®ã™ã‚‹ã“ã¨ã§ãƒ”ãƒƒãƒã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†ã€‚"}):r.push({category:"ãƒ”ãƒƒãƒãƒ»ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰",score:"poor",icon:"âŒ",message:"ãƒ”ãƒƒãƒ: "+me.toFixed(2)+"æ­©/ç§’ ("+L.toFixed(0)+"æ­©/åˆ†) - æ”¹å–„ãŒå¿…è¦",advice:"ãƒ”ãƒƒãƒãŒä½ã™ãã¾ã™ã€‚æœ€å¤§ç–¾èµ°ã‚¹ãƒ”ãƒ¼ãƒ‰é”æˆã«ã¯4.4æ­©/ç§’ä»¥ä¸Šã®ãƒ”ãƒƒãƒãŒå¿…è¦ã§ã™ã€‚æ¥åœ°æ™‚é–“ã®çŸ­ç¸®ã€è…•æŒ¯ã‚Šã®å¼·åŒ–ã€ãƒ¬ãƒƒã‚°ã‚¹ãƒ”ãƒ¼ãƒ‰ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è¡Œã„ã¾ã—ã‚‡ã†ã€‚"})}if(d&&d>0&&ce>0){const L=d/100,Y=ce/L,ee=$==="male",ye=$==="female",v=ye?1.18:1.2,be=ye?1.33:1.35,W=ye?1.1:1.12,A=ye?1.4:1.42;a==="acceleration"?Y>=.85&&Y<=1.15?r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”",score:"excellent",icon:"âœ…",message:`ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”: ${Y.toFixed(2)} (${ce.toFixed(2)}m / ${d}cm) - åŠ é€Ÿå±€é¢ã§é©æ­£`,advice:"åŠ é€Ÿå±€é¢ã«é©ã—ãŸã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”ã§ã™ã€‚èº«é•·ã«å¯¾ã—ã¦åŠ¹ç‡çš„ãªã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ä¼¸é•·ãŒã§ãã¦ã„ã¾ã™ã€‚æ®µéšçš„ã«ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ä¼¸ã°ã—ãªãŒã‚‰ã€ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ã¸ç§»è¡Œã—ã¾ã—ã‚‡ã†ã€‚"}):Y>=.75&&Y<.85?r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”",score:"good",icon:"âœ…",message:`ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”: ${Y.toFixed(2)} (${ce.toFixed(2)}m / ${d}cm) - åŠ é€ŸåˆæœŸã¨ã—ã¦è‰¯å¥½`,advice:"åŠ é€ŸåˆæœŸã¨ã—ã¦é©åˆ‡ãªã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”ã§ã™ã€‚è‚¡é–¢ç¯€ä¼¸å±•ã‚’æ´»ç”¨ã—ã¦ã€æ®µéšçš„ã«ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ä¼¸ã°ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚"}):Y>1.15?r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”",score:"fair",icon:"âš ï¸",message:`ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”: ${Y.toFixed(2)} (${ce.toFixed(2)}m / ${d}cm) - åŠ é€Ÿå±€é¢ã§å¤§ãã™ãã‚‹`,advice:"åŠ é€Ÿå±€é¢ã§ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ãŒå¤§ãã™ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚åŠ é€ŸåˆæœŸã¯å°ã•ãªã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‹ã‚‰å§‹ã‚ã€æ®µéšçš„ã«ä¼¸ã°ã™ã“ã¨ã§åŠ¹ç‡çš„ãªåŠ é€ŸãŒå¯èƒ½ã§ã™ã€‚"}):r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”",score:"fair",icon:"âš ï¸",message:`ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”: ${Y.toFixed(2)} (${ce.toFixed(2)}m / ${d}cm) - ã‚„ã‚„å°ã•ã„`,advice:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ãŒèº«é•·ã«å¯¾ã—ã¦ã‚„ã‚„å°ã•ã„ã§ã™ã€‚è‚¡é–¢ç¯€ã®ä¼¸å±•å‹•ä½œã‚’æ„è­˜ã—ã¦ã€åŠ¹ç‡çš„ã«ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ä¼¸ã°ã—ã¾ã—ã‚‡ã†ã€‚"}):Y>=v&&Y<=be?r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”",score:"excellent",icon:"âœ…",message:`ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”: ${Y.toFixed(2)} (${ce.toFixed(2)}m / ${d}cm) - ã‚¨ãƒªãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«`,advice:`ç´ æ™´ã‚‰ã—ã„ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”ã§ã™ã€‚èº«é•·${d}cmã«å¯¾ã—ã¦${ce.toFixed(2)}mã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã¯ã€ã‚¨ãƒªãƒ¼ãƒˆã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã®æ°´æº–ã§ã™ã€‚${ye?"å¥³å­":ee?"ç”·å­":""}ã®æœ€é©ç¯„å›²ï¼ˆ${v}ã€œ${be}ï¼‰ã«å…¥ã£ã¦ã„ã¾ã™ã€‚`}):Y>=W&&Y<v?r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”",score:"good",icon:"âœ…",message:`ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”: ${Y.toFixed(2)} (${ce.toFixed(2)}m / ${d}cm) - è‰¯å¥½`,advice:`è‰¯å¥½ãªã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”ã§ã™ã€‚èº«é•·${d}cmã®å ´åˆã€${(L*v).toFixed(2)}mä»¥ä¸Šã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ç›®æŒ‡ã™ã¨ã‚¨ãƒªãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ã«åˆ°é”ã§ãã¾ã™ã€‚è‚¡é–¢ç¯€ã®å¯å‹•åŸŸå‘ä¸Šã¨ã‚­ãƒƒã‚¯åŠ›å¼·åŒ–ã«å–ã‚Šçµ„ã¿ã¾ã—ã‚‡ã†ã€‚`}):Y>be&&Y<=A?r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”",score:"good",icon:"âœ…",message:`ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”: ${Y.toFixed(2)} (${ce.toFixed(2)}m / ${d}cm) - ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å‹`,advice:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å‹ã®èµ°ã‚Šã§ã™ã€‚èº«é•·ã«å¯¾ã—ã¦å¤§ããªã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ç²å¾—ã§ãã¦ã„ã¾ã™ãŒã€ãƒ”ãƒƒãƒã¨ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚ã‚ªãƒ¼ãƒãƒ¼ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã«ãªã‚‰ãªã„ã‚ˆã†ã€æ¥åœ°ä½ç½®ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚"}):Y<W?r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”",score:"fair",icon:"âš ï¸",message:`ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”: ${Y.toFixed(2)} (${ce.toFixed(2)}m / ${d}cm) - æ”¹å–„ã®ä½™åœ°ã‚ã‚Š`,advice:`èº«é•·${d}cmã«å¯¾ã—ã¦ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ãŒçŸ­ã‚ã§ã™ã€‚ç ”ç©¶ãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã‚‹ã¨ã€æœ€å¤§ç–¾èµ°ã‚¹ãƒ”ãƒ¼ãƒ‰é”æˆã«ã¯èº«é•·ã®${(v*100).toFixed(0)}ã€œ${(be*100).toFixed(0)}%ç¨‹åº¦ï¼ˆ${(L*v).toFixed(2)}ã€œ${(L*be).toFixed(2)}mï¼‰ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ãŒç†æƒ³ã§ã™ã€‚è‚¡é–¢ç¯€ã®å¯å‹•åŸŸæ‹¡å¤§ã¨ãƒãƒ ã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹ãƒ»å¤§è‡€ç­‹ã®å¼·åŒ–ã«å–ã‚Šçµ„ã¿ã¾ã—ã‚‡ã†ã€‚`}):r.push({category:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”",score:"fair",icon:"âš ï¸",message:`ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰/èº«é•·æ¯”: ${Y.toFixed(2)} (${ce.toFixed(2)}m / ${d}cm) - ã‚ªãƒ¼ãƒãƒ¼ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®å¯èƒ½æ€§`,advice:`ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ãŒèº«é•·ã«å¯¾ã—ã¦å¤§ãã™ãã¾ã™ã€‚ã‚ªãƒ¼ãƒãƒ¼ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã¯æ¥åœ°æ™‚ã®ãƒ–ãƒ¬ãƒ¼ã‚­åŠ›ã‚’å¢—åŠ ã•ã›ã€åŠ¹ç‡ã‚’ä½ä¸‹ã•ã›ã¾ã™ã€‚èº«ä½“ã®çœŸä¸‹ã«è¿‘ã„ä½ç½®ã§æ¥åœ°ã—ã€${(be*100).toFixed(0)}%ä»¥ä¸‹ï¼ˆ${(L*be).toFixed(2)}mä»¥ä¸‹ï¼‰ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ã€‚`})}const Q=p.avgContact??0;Q>0&&(a==="acceleration"?Q>=.12&&Q<=.18?r.push({category:"æ¥åœ°æ™‚é–“ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",score:"excellent",icon:"âœ…",message:"æ¥åœ°æ™‚é–“: "+(Q*1e3).toFixed(0)+"ms - åŠ é€Ÿå±€é¢ã¨ã—ã¦ç†æƒ³çš„",advice:"åŠ é€Ÿå±€é¢ã«é©ã—ãŸæ¥åœ°æ™‚é–“ã§ã™ã€‚æ”¯æŒæœŸã§ååˆ†ãªæ¨é€²åŠ›ã‚’å¾—ãªãŒã‚‰ã€åŠ¹ç‡çš„ã«åŠ é€Ÿã§ãã¦ã„ã¾ã™ã€‚ã€Œæ”¯æŒæœŸã§ã—ã‹åŠ é€Ÿã§ããªã„ã€ã¨ã„ã†åŸå‰‡ã‚’æ´»ã‹ã›ã¦ã„ã¾ã™ã€‚"}):Q>=.18&&Q<=.22?r.push({category:"æ¥åœ°æ™‚é–“ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",score:"good",icon:"âœ…",message:"æ¥åœ°æ™‚é–“: "+(Q*1e3).toFixed(0)+"ms - è‰¯å¥½ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",advice:"åŠ é€Ÿå±€é¢ã¨ã—ã¦è¨±å®¹ç¯„å›²ã®æ¥åœ°æ™‚é–“ã§ã™ã€‚ã‚¹ã‚¿ãƒ¼ãƒˆç›´å¾Œã¯åœ°é¢ã‚’æŠ¼ã™æ™‚é–“ãŒå¿…è¦ã§ã™ãŒã€æ­©æ•°ãŒå¢—ãˆã‚‹ã«ã¤ã‚Œã¦çŸ­ç¸®ã—ã¦ã„ãã“ã¨ãŒé‡è¦ã§ã™ã€‚"}):Q>.22&&Q<=.28?r.push({category:"æ¥åœ°æ™‚é–“ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",score:"fair",icon:"âš ï¸",message:"æ¥åœ°æ™‚é–“: "+(Q*1e3).toFixed(0)+"ms - ã‚„ã‚„é•·ã„ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",advice:"æ¥åœ°æ™‚é–“ãŒã‚„ã‚„é•·ã„ã§ã™ã€‚åŠ é€Ÿå±€é¢ã§ã‚‚è‚¡é–¢ç¯€ä¼¸å±•ã®é€Ÿåº¦ã‚’ä¸Šã’ã‚‹ã“ã¨ã§ã€æ¥åœ°æ™‚é–“ã‚’çŸ­ç¸®ã§ãã¾ã™ã€‚æ”¯æŒæœŸçµ‚ç›¤ã®åŠ é€ŸåŠ›ç™ºæ®ã‚’æ„è­˜ã—ã€è†é–¢ç¯€ã®ä¼¸å±•ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’é…ã‚‰ã›ã¾ã—ã‚‡ã†ã€‚"}):Q<.12?r.push({category:"æ¥åœ°æ™‚é–“ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",score:"fair",icon:"âš ï¸",message:"æ¥åœ°æ™‚é–“: "+(Q*1e3).toFixed(0)+"ms - çŸ­ã™ãï¼ˆåŠ é€Ÿå±€é¢ï¼‰",advice:"åŠ é€Ÿå±€é¢ã§æ¥åœ°æ™‚é–“ãŒçŸ­ã™ãã¾ã™ã€‚ååˆ†ãªæ¨é€²åŠ›ã‚’å¾—ã‚‹ãŸã‚ã«ã€åœ°é¢ã‚’å¾Œæ–¹ã¸æŠ¼ã™æ™‚é–“ã‚’ç¢ºä¿ã—ã¾ã—ã‚‡ã†ã€‚ã€Œæ”¯æŒæœŸã§ã—ã‹åŠ é€Ÿã§ããªã„ã€ãŸã‚ã€é©åˆ‡ãªæ¥åœ°æ™‚é–“ãŒå¿…è¦ã§ã™ã€‚"}):r.push({category:"æ¥åœ°æ™‚é–“ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",score:"poor",icon:"âŒ",message:"æ¥åœ°æ™‚é–“: "+(Q*1e3).toFixed(0)+"ms - é•·ã™ãã‚‹",advice:"æ¥åœ°æ™‚é–“ãŒé•·ã™ãã¾ã™ã€‚ãƒ–ãƒ¬ãƒ¼ã‚­åŠ›ãŒå¢—å¤§ã—ã€åŠ é€ŸåŠ¹ç‡ãŒä½ä¸‹ã—ã¦ã„ã¾ã™ã€‚è‚¡é–¢ç¯€ä¼¸å±•ã®é€Ÿåº¦ã‚’ä¸Šã’ã€æ”¯æŒæœŸçµ‚ç›¤ã§ã®åŠ é€ŸåŠ›ç™ºæ®ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚"}):Q<=.1?r.push({category:"æ¥åœ°æ™‚é–“ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"excellent",icon:"âœ…",message:"æ¥åœ°æ™‚é–“: "+(Q*1e3).toFixed(0)+"ms - ä¸–ç•Œä¸€æµãƒ¬ãƒ™ãƒ«",advice:"ä¸–ç•Œä¸€æµã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ä¸¦ã¿ã®éå¸¸ã«çŸ­ã„æ¥åœ°æ™‚é–“ã§ã™ã€‚ã€ŒçŸ­ã„æ”¯æŒæ™‚é–“ã§å¾Œæ–¹ã¾ã§ã‚­ãƒƒã‚¯ã€ã¨ã„ã†ç†æƒ³çš„ãªå‹•ä½œãŒã§ãã¦ã„ã¾ã™ã€‚è‚¡é–¢ç¯€ã‚’ç”¨ã„ã¦ç´ æ—©ãã‚­ãƒƒã‚¯ã—ã€ç´ æ—©ãå¼•ãä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚"}):Q<=.12?r.push({category:"æ¥åœ°æ™‚é–“ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"excellent",icon:"âœ…",message:"æ¥åœ°æ™‚é–“: "+(Q*1e3).toFixed(0)+"ms - ã‚¨ãƒªãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«",advice:"ã‚¨ãƒªãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ã®çŸ­ã„æ¥åœ°æ™‚é–“ã§ã™ã€‚è‚¡é–¢ç¯€ã®é«˜ã„ä¼¸å±•é€Ÿåº¦ã‚’æ´»ã‹ã—ã¦ã€åŠ¹ç‡çš„ã«æ¨é€²åŠ›ã‚’å¾—ã¦ã„ã¾ã™ã€‚"}):Q<=.15?r.push({category:"æ¥åœ°æ™‚é–“ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"good",icon:"âœ…",message:"æ¥åœ°æ™‚é–“: "+(Q*1e3).toFixed(0)+"ms - è‰¯å¥½",advice:"è‰¯å¥½ãªæ¥åœ°æ™‚é–“ã§ã™ã€‚120msä»¥ä¸‹ã‚’ç›®æŒ‡ã™ã¨ã€ã•ã‚‰ã«é«˜é€Ÿã§ã®ç–¾èµ°ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚è†ãƒ»è¶³é–¢ç¯€ã®ä¼¸å±•ã‚’å¼·èª¿ã›ãšã€è‚¡é–¢ç¯€ä¼¸å±•é€Ÿåº¦ã‚’é«˜ã‚ã‚‹ã“ã¨ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚"}):Q<=.18?r.push({category:"æ¥åœ°æ™‚é–“ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"fair",icon:"âš ï¸",message:"æ¥åœ°æ™‚é–“: "+(Q*1e3).toFixed(0)+"ms - æ”¹å–„ã®ä½™åœ°ã‚ã‚Š",advice:"æ¥åœ°æ™‚é–“ã®çŸ­ç¸®ãŒå¿…è¦ã§ã™ã€‚ç ”ç©¶ã«ã‚ˆã‚‹ã¨ã€å„ªã‚ŒãŸã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã¯ã€Œè‚¡é–¢ç¯€ã®ä¼¸å±•é€Ÿåº¦ãŒé«˜ãã€è†ãƒ»è¶³é–¢ç¯€ã®ä¼¸å±•ã‚’å¼·èª¿ã—ã¦ã„ãªã„ã€ã“ã¨ãŒç‰¹å¾´ã§ã™ã€‚è„šã®å±ˆä¼¸ã‚’å°ã•ãã—ã€ç´ æ—©ã„å¼•ãä»˜ã‘ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚"}):r.push({category:"æ¥åœ°æ™‚é–“ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"poor",icon:"âŒ",message:"æ¥åœ°æ™‚é–“: "+(Q*1e3).toFixed(0)+"ms - é•·ã™ãã‚‹",advice:"æ¥åœ°æ™‚é–“ãŒé•·ã™ãã¾ã™ã€‚æœ€å¤§é€Ÿåº¦ç¶­æŒã«ã¯ã€ŒçŸ­ã„æ”¯æŒæ™‚é–“ã§å¾Œæ–¹ã¾ã§ã‚­ãƒƒã‚¯ã€ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚åœ°é¢ã‚’è¹´ã‚‹æ„è­˜ã‚’æ¨ã¦ã€è‚¡é–¢ç¯€ã‚’ç”¨ã„ã¦ç´ æ—©ãã‚­ãƒƒã‚¯ã—ã€ç´ æ—©ãå¼•ãä»˜ã‘ã‚‹ã“ã¨ã«é›†ä¸­ã—ã¾ã—ã‚‡ã†ã€‚"}));const ue=p.avgFlight??0;if(Q>0&&ue>0){const L=Q/ue;a==="acceleration"?L>=1&&L<=2?r.push({category:"æ¥åœ°ãƒ»æ»ç©ºãƒãƒ©ãƒ³ã‚¹ï¼ˆåŠ é€Ÿï¼‰",score:"excellent",icon:"âœ…",message:"æ¥åœ°/æ»ç©ºæ¯”: "+L.toFixed(2)+" - åŠ é€Ÿå±€é¢ã¨ã—ã¦ç†æƒ³çš„",advice:"åŠ é€Ÿå±€é¢ã«é©ã—ãŸãƒãƒ©ãƒ³ã‚¹ã§ã™ã€‚ã€Œæ”¯æŒæœŸã§ã—ã‹åŠ é€Ÿã§ããªã„ã€ã¨ã„ã†åŸå‰‡ã«å¾“ã„ã€ååˆ†ãªæ¥åœ°æ™‚é–“ã§æ¨é€²åŠ›ã‚’å¾—ã¦ã„ã¾ã™ã€‚æ»ç©ºæœŸã¯æ¬¡ã®æ”¯æŒæœŸã®ãŸã‚ã®æº–å‚™å±€é¢ã¨ã—ã¦æ©Ÿèƒ½ã—ã¦ã„ã¾ã™ã€‚"}):L>=.8&&L<1?r.push({category:"æ¥åœ°ãƒ»æ»ç©ºãƒãƒ©ãƒ³ã‚¹ï¼ˆåŠ é€Ÿï¼‰",score:"good",icon:"âœ…",message:"æ¥åœ°/æ»ç©ºæ¯”: "+L.toFixed(2)+" - è‰¯å¥½ï¼ˆãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ã¸ã®ç§»è¡ŒæœŸï¼‰",advice:"åŠ é€Ÿå¾ŒåŠã‹ã‚‰ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ã¸ã®ç§»è¡ŒæœŸã«é©ã—ãŸãƒãƒ©ãƒ³ã‚¹ã§ã™ã€‚æ®µéšçš„ã«æ»ç©ºæ™‚é–“ãŒé•·ããªã£ã¦ã„ããƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚"}):L>2?r.push({category:"æ¥åœ°ãƒ»æ»ç©ºãƒãƒ©ãƒ³ã‚¹ï¼ˆåŠ é€Ÿï¼‰",score:"fair",icon:"âš ï¸",message:"æ¥åœ°/æ»ç©ºæ¯”: "+L.toFixed(2)+" - æ¥åœ°æ™‚é–“ãŒé•·ã™ã",advice:"æ¥åœ°æ™‚é–“ãŒæ»ç©ºæ™‚é–“ã«æ¯”ã¹ã¦é•·ã™ãã¾ã™ã€‚åœ°é¢ååŠ›ã®æ–¹å‘ã‚’æ„è­˜ã—ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ã«æ¨é€²åŠ›ã‚’å¾—ã¾ã—ã‚‡ã†ã€‚ã€ŒåŠ›ã®å¤§ãã•ã‚ˆã‚Šãã®æ–¹å‘ãŒé‡è¦ã€ã§ã™ã€‚"}):r.push({category:"æ¥åœ°ãƒ»æ»ç©ºãƒãƒ©ãƒ³ã‚¹ï¼ˆåŠ é€Ÿï¼‰",score:"fair",icon:"âš ï¸",message:"æ¥åœ°/æ»ç©ºæ¯”: "+L.toFixed(2)+" - æ»ç©ºæ™‚é–“ãŒé•·ã™ãï¼ˆåŠ é€Ÿå±€é¢ï¼‰",advice:"åŠ é€Ÿå±€é¢ã§æ»ç©ºæ™‚é–“ãŒé•·ã™ãã¾ã™ã€‚ååˆ†ãªæ¨é€²åŠ›ã‚’å¾—ã‚‹ãŸã‚ã«ã€æ¥åœ°æ™‚é–“ã‚’ç¢ºä¿ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚æ—©æœŸã«ä½“å¹¹ã‚’èµ·ã“ã—ã™ãã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚"}):L>=.6&&L<=.9?r.push({category:"æ¥åœ°ãƒ»æ»ç©ºãƒãƒ©ãƒ³ã‚¹ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"excellent",icon:"âœ…",message:"æ¥åœ°/æ»ç©ºæ¯”: "+L.toFixed(2)+" - æœ€å¤§é€Ÿåº¦ç™ºæ®ã«ç†æƒ³çš„",advice:"æœ€å¤§é€Ÿåº¦ç™ºæ®ã«ç†æƒ³çš„ãªãƒãƒ©ãƒ³ã‚¹ã§ã™ã€‚çŸ­ã„æ¥åœ°æ™‚é–“ã§åŠ¹ç‡çš„ã«æ¨é€²åŠ›ã‚’å¾—ã¦ã€æ»ç©ºæœŸã§æ¬¡ã®æ¥åœ°ã«å‚™ãˆã¦ã„ã¾ã™ã€‚ä¸–ç•Œä¸€æµã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚"}):L>=.9&&L<=1.1?r.push({category:"æ¥åœ°ãƒ»æ»ç©ºãƒãƒ©ãƒ³ã‚¹ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"good",icon:"âœ…",message:"æ¥åœ°/æ»ç©ºæ¯”: "+L.toFixed(2)+" - ãƒãƒ©ãƒ³ã‚¹è‰¯å¥½",advice:"è‰¯å¥½ãªãƒãƒ©ãƒ³ã‚¹ã§ã™ã€‚æ¥åœ°æ™‚é–“ã‚’ã•ã‚‰ã«çŸ­ç¸®ã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šé«˜é€Ÿã§ã®ç–¾èµ°ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚"}):L>1.1?r.push({category:"æ¥åœ°ãƒ»æ»ç©ºãƒãƒ©ãƒ³ã‚¹ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"fair",icon:"âš ï¸",message:"æ¥åœ°/æ»ç©ºæ¯”: "+L.toFixed(2)+" - æ¥åœ°æ™‚é–“ãŒé•·ã‚",advice:"æ¥åœ°æ™‚é–“ãŒæ»ç©ºæ™‚é–“ã«æ¯”ã¹ã¦é•·ã„ã§ã™ã€‚æœ€å¤§é€Ÿåº¦ç¶­æŒã«ã¯ã€ŒçŸ­ã„æ”¯æŒæ™‚é–“ã§å¾Œæ–¹ã¾ã§ã‚­ãƒƒã‚¯ã€ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚è„šã®å¼•ãä»˜ã‘ã‚’ç´ æ—©ãã—ã€æ¥åœ°æ™‚é–“ã‚’çŸ­ç¸®ã—ã¾ã—ã‚‡ã†ã€‚"}):r.push({category:"æ¥åœ°ãƒ»æ»ç©ºãƒãƒ©ãƒ³ã‚¹ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"good",icon:"âœ…",message:"æ¥åœ°/æ»ç©ºæ¯”: "+L.toFixed(2)+" - ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰èµ°æ³•å‚¾å‘",advice:"æ»ç©ºæ™‚é–“ãŒé•·ã„ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰èµ°æ³•ã®å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚å¤§ããªã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ç²å¾—ã§ãã¦ã„ã¾ã™ãŒã€æ¥åœ°æ™‚ã®ãƒ–ãƒ¬ãƒ¼ã‚­ã«æ³¨æ„ã—ã¾ã—ã‚‡ã†ã€‚"})}const E=n.flatMap(L=>[L.angles.thighAngle.left,L.angles.thighAngle.right]).filter(L=>L!==null);if(E.length>0){const L=Math.max(...E),Y=Math.min(...E),ee=L-Y;a==="acceleration"?ee>=60?r.push({category:"è‚¡é–¢ç¯€ä¼¸å±•ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",score:"excellent",icon:"âœ…",message:"å¤§è…¿è§’åº¦ã®å¯å‹•åŸŸ: "+ee.toFixed(0)+"Â° - å„ªç§€ãªè‚¡é–¢ç¯€ä¼¸å±•",advice:"å„ªã‚ŒãŸè‚¡é–¢ç¯€ä¼¸å±•ãŒã§ãã¦ã„ã¾ã™ã€‚ã€Œæ”¯æŒæœŸçµ‚ç›¤ã®å¤§ããªåŠ é€ŸåŠ›ç™ºæ®ã€ãŒå®Ÿç¾ã§ãã¦ãŠã‚Šã€å¾Œæ–¹ã¸ã®å¼·ã„ã‚­ãƒƒã‚¯ã§æ°´å¹³æ¨é€²åŠ›ã‚’å¾—ã¦ã„ã¾ã™ã€‚è†é–¢ç¯€ã®ä¼¸å±•ã«é ¼ã‚‰ãšã€è‚¡é–¢ç¯€ä¼¸å±•ä¸»å°ã§åŠ é€Ÿã§ãã¦ã„ã¾ã™ã€‚"}):ee>=50?r.push({category:"è‚¡é–¢ç¯€ä¼¸å±•ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",score:"good",icon:"âœ…",message:"å¤§è…¿è§’åº¦ã®å¯å‹•åŸŸ: "+ee.toFixed(0)+"Â° - è‰¯å¥½",advice:"è‰¯å¥½ãªè‚¡é–¢ç¯€ã®ä½¿ã„æ–¹ã§ã™ã€‚ã•ã‚‰ã«è‚¡é–¢ç¯€ä¼¸å±•ã‚’å¼·èª¿ã—ã€ã€Œæ”¯æŒæœŸçµ‚ç›¤ã®å¤§ããªåŠ é€ŸåŠ›ç™ºæ®ã€ã‚’æ„è­˜ã™ã‚‹ã¨ã€ã‚ˆã‚ŠåŠ¹ç‡çš„ãªåŠ é€ŸãŒå¯èƒ½ã§ã™ã€‚è†é–¢ç¯€ã®ä¼¸å±•ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’é…ã‚‰ã›ã‚‹ã“ã¨ã‚‚ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚"}):ee>=40?r.push({category:"è‚¡é–¢ç¯€ä¼¸å±•ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",score:"fair",icon:"âš ï¸",message:"å¤§è…¿è§’åº¦ã®å¯å‹•åŸŸ: "+ee.toFixed(0)+"Â° - è‚¡é–¢ç¯€ä¼¸å±•ä¸è¶³",advice:"è‚¡é–¢ç¯€ã®ä¼¸å±•ãŒä¸ååˆ†ã§ã™ã€‚åŠ é€Ÿå±€é¢ã§ã¯ã€ŒåŠ›ã®å¤§ãã•ã‚ˆã‚Šãã®æ–¹å‘ãŒé‡è¦ã€ã§ã™ã€‚è†ã‚„è¶³é–¢ç¯€ã®ä¼¸å±•ã§ã¯ãªãã€è‚¡é–¢ç¯€ä¼¸å±•ã«ã‚ˆã‚‹å¾Œæ–¹ã¸ã®ã‚­ãƒƒã‚¯ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚"}):r.push({category:"è‚¡é–¢ç¯€ä¼¸å±•ï¼ˆåŠ é€Ÿå±€é¢ï¼‰",score:"poor",icon:"âŒ",message:"å¤§è…¿è§’åº¦ã®å¯å‹•åŸŸ: "+ee.toFixed(0)+"Â° - å¤§å¹…ãªæ”¹å–„ãŒå¿…è¦",advice:"è‚¡é–¢ç¯€ã®å¯å‹•åŸŸãŒå°ã•ã™ãã¾ã™ã€‚åŠ é€Ÿã«ã¯è‚¡é–¢ç¯€ä¼¸å±•ãŒä¸å¯æ¬ ã§ã™ã€‚ã€Œè†é–¢ç¯€ã®ä¼¸å±•ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’é…ã‚‰ã›ã‚‹ã€ã“ã¨ã‚’æ„è­˜ã—ã€è‚¡é–¢ç¯€ä¸»å°ã§ã‚­ãƒƒã‚¯ã™ã‚‹å‹•ä½œã‚’ç¿’å¾—ã—ã¾ã—ã‚‡ã†ã€‚"}):ee>=70?r.push({category:"è‚¡é–¢ç¯€ã®ä½¿ã„æ–¹ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"excellent",icon:"âœ…",message:"å¤§è…¿è§’åº¦ã®å¯å‹•åŸŸ: "+ee.toFixed(0)+"Â° - å„ªç§€",advice:"è‚¡é–¢ç¯€ã®å¯å‹•åŸŸãŒéå¸¸ã«åºƒãã€ã€Œè‚¡é–¢ç¯€ã‚’ç”¨ã„ã¦ç´ æ—©ãã‚­ãƒƒã‚¯ã—ã€ç´ æ—©ãå¼•ãä»˜ã‘ã¦ã€ã„ã¾ã™ã€‚å¾Œæ–¹ã¸ã®ååˆ†ãªã‚­ãƒƒã‚¯ã¨ã€è„šãŒæµã‚Œãªã„ç´ æ—©ã„å¼•ãä»˜ã‘ãŒã§ãã¦ã„ã¾ã™ã€‚ä¸–ç•Œä¸€æµã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã®å‹•ä½œç‰¹æ€§ã§ã™ã€‚"}):ee>=60?r.push({category:"è‚¡é–¢ç¯€ã®ä½¿ã„æ–¹ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"good",icon:"âœ…",message:"å¤§è…¿è§’åº¦ã®å¯å‹•åŸŸ: "+ee.toFixed(0)+"Â° - è‰¯å¥½",advice:"è‰¯å¥½ãªè‚¡é–¢ç¯€ã®ä½¿ã„æ–¹ã§ã™ã€‚ç ”ç©¶ã«ã‚ˆã‚‹ã¨ã€å„ªã‚ŒãŸã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã¯ã€Œè‚¡é–¢ç¯€ã®ä¼¸å±•é€Ÿåº¦ãŒé«˜ãã€è†ãƒ»è¶³é–¢ç¯€ã®ä¼¸å±•ã‚’å¼·èª¿ã—ã¦ã„ãªã„ã€ã“ã¨ãŒç‰¹å¾´ã§ã™ã€‚70Â°ä»¥ä¸Šã‚’ç›®æŒ‡ã™ã¨ã•ã‚‰ã«ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã«ãªã‚Šã¾ã™ã€‚"}):ee>=50?r.push({category:"è‚¡é–¢ç¯€ã®ä½¿ã„æ–¹ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"fair",icon:"âš ï¸",message:"å¤§è…¿è§’åº¦ã®å¯å‹•åŸŸ: "+ee.toFixed(0)+"Â° - æ”¹å–„ãŒå¿…è¦",advice:"è‚¡é–¢ç¯€ã®å¯å‹•åŸŸãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚ã€Œè„šã®å±ˆä¼¸ãŒå°ã•ãã€è„šãŒæµã‚Œãªã„ã€ã“ã¨ãŒé‡è¦ã§ã™ã€‚å¾Œæ–¹ã¸ã®ã‚­ãƒƒã‚¯ã‚’å¼·èª¿ã—ã¤ã¤ã€å¼•ãä»˜ã‘ã‚’ç´ æ—©ãè¡Œã†ã“ã¨ã§æ”¹å–„ã§ãã¾ã™ã€‚ã€Œã‚‚ã‚‚ä¸Šã’ã€ã‚’å¼·èª¿ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"}):r.push({category:"è‚¡é–¢ç¯€ã®ä½¿ã„æ–¹ï¼ˆæœ€å¤§é€Ÿåº¦ï¼‰",score:"poor",icon:"âŒ",message:"å¤§è…¿è§’åº¦ã®å¯å‹•åŸŸ: "+ee.toFixed(0)+"Â° - å°ã•ã™ãã‚‹",advice:"è‚¡é–¢ç¯€ã®å¯å‹•åŸŸãŒéå¸¸ã«å°ã•ã„ã§ã™ã€‚ã€Œè‚¡é–¢ç¯€ã‚’ç”¨ã„ã¦ç´ æ—©ãã‚­ãƒƒã‚¯ã—ã€ç´ æ—©ãå¼•ãä»˜ã‘ã‚‹ã€å‹•ä½œã‚’ç¿’å¾—ã—ã¾ã—ã‚‡ã†ã€‚æ³¨æ„ï¼šã€Œã‚‚ã‚‚ä¸Šã’ã€ã‚„ã€ŒæŒ¯ã‚Šå‡ºã—ã€ã‚’å¼·èª¿ã™ã‚‹ã“ã¨ã¯ã€å¿…ãšã—ã‚‚é€Ÿã•ã«ã¤ãªãŒã‚Šã¾ã›ã‚“ã€‚"})}const _={excellent:4,good:3,fair:2,poor:1},C=r.reduce((L,Y)=>L+_[Y.score],0)/r.length;let V="",oe="";if(a==="acceleration")R?C>=3.5?(V="ã‚¨ãƒªãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ï¼‰",oe="ç´ æ™´ã‚‰ã—ã„ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã§ã™ã€‚ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ã‹ã‚‰å¼·ã„å‰å‚¾å§¿å‹¢ï¼ˆ45Â°ï¼‰ã‚’å–ã‚Šã€æ®µéšçš„ã«èµ·ãä¸ŠãŒã‚ŠãªãŒã‚‰è‚¡é–¢ç¯€ä¼¸å±•ä¸»å°ã§æ°´å¹³æ¨é€²åŠ›ã‚’å¾—ã¦ã„ã¾ã™ã€‚ã€Œæ”¯æŒæœŸçµ‚ç›¤ã®å¤§ããªåŠ é€ŸåŠ›ç™ºæ®ã€ãŒå®Ÿç¾ã§ãã¦ã„ã¾ã™ã€‚"):C>=3?(V="ä¸Šç´šãƒ¬ãƒ™ãƒ«ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ï¼‰",oe="è‰¯å¥½ãªã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã§ã™ã€‚ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹å¾Œã®å§¿å‹¢èµ·ãä¸ŠãŒã‚Šã¨è†é–¢ç¯€ã®å›ºå®šã‚’å¾®èª¿æ•´ã™ã‚‹ã“ã¨ã§ã€ã•ã‚‰ã«åŠ¹ç‡çš„ãªåŠ é€ŸãŒå¯èƒ½ã§ã™ã€‚1-2æ­©ç›®ã¯è†ã‚’150-160Â°ã«å›ºå®šã—ã€è‚¡é–¢ç¯€ä¼¸å±•ä¸»å°ã§ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ç²å¾—ã—ã¾ã—ã‚‡ã†ã€‚"):C>=2.5?(V="ä¸­ç´šãƒ¬ãƒ™ãƒ«ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ï¼‰",oe="ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã«æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ç›´å¾Œã¯45Â°å‰å¾Œã®å¼·ã„å‰å‚¾ã‹ã‚‰å§‹ã‚ã€8æ­©ç¨‹åº¦ã§75Â°ã¾ã§æ®µéšçš„ã«èµ·ã“ã—ã¾ã—ã‚‡ã†ã€‚ã€Œè†é–¢ç¯€ã®ä¼¸å±•ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’é…ã‚‰ã›ã‚‹ã€ã“ã¨ãŒåŠ é€Ÿã®éµã§ã™ã€‚"):(V="åˆç´šãƒ¬ãƒ™ãƒ«ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ï¼‰",oe="ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥æŠ€è¡“ã®åŸºç¤ã‹ã‚‰è¦‹ç›´ã—ãŒå¿…è¦ã§ã™ã€‚ã€Œã‚»ãƒƒãƒˆã€å§¿å‹¢ã‹ã‚‰é ­ã‹ã‚‰è¶³é¦–ã¾ã§ä¸€ç›´ç·šã‚’ä¿ã¡ã€ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹ç›´å¾Œã¯è†ã‚’å›ºå®šã—ãŸã¾ã¾è‚¡é–¢ç¯€ä¼¸å±•ã§ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ç²å¾—ã—ã¦ãã ã•ã„ã€‚æ—©æœŸèµ·ãä¸ŠãŒã‚Šã¯åŠ é€Ÿã‚’é˜»å®³ã—ã¾ã™ã€‚"):C>=3.5?(V="ã‚¨ãƒªãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ï¼ˆåŠ é€Ÿèµ°ï¼‰",oe="ç´ æ™´ã‚‰ã—ã„åŠ é€Ÿèµ°ã§ã™ã€‚åŠ©èµ°ã®å‹¢ã„ã‚’æ´»ã‹ã—ãªãŒã‚‰ã€åŠ¹ç‡çš„ã«åŠ é€Ÿå±€é¢ã¸ç§»è¡Œã§ãã¦ã„ã¾ã™ã€‚è‚¡é–¢ç¯€ä¼¸å±•ä¸»å°ã§æ°´å¹³æ¨é€²åŠ›ã‚’å¾—ã¦ãŠã‚Šã€ã‚¹ãƒ ãƒ¼ã‚ºã«ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ã¸ç§»è¡Œã§ãã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚"):C>=3?(V="ä¸Šç´šãƒ¬ãƒ™ãƒ«ï¼ˆåŠ é€Ÿèµ°ï¼‰",oe="è‰¯å¥½ãªåŠ é€Ÿèµ°ã§ã™ã€‚åŠ©èµ°ã‹ã‚‰ã®ç§»è¡Œã¨å§¿å‹¢ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’å¾®èª¿æ•´ã™ã‚‹ã“ã¨ã§ã€ã•ã‚‰ã«åŠ¹ç‡çš„ãªåŠ é€ŸãŒå¯èƒ½ã§ã™ã€‚50-60Â°ã®å‰å‚¾ã‹ã‚‰å§‹ã‚ã€6æ­©ç¨‹åº¦ã§ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰å§¿å‹¢ã¸ç§»è¡Œã—ã¾ã—ã‚‡ã†ã€‚"):C>=2.5?(V="ä¸­ç´šãƒ¬ãƒ™ãƒ«ï¼ˆåŠ é€Ÿèµ°ï¼‰",oe="åŠ é€Ÿèµ°ã«æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚åŠ©èµ°ã®å‹¢ã„ã‚’æ´»ã‹ã™ãŸã‚ã€æ€¥ãªèµ·ãä¸ŠãŒã‚Šã‚’é¿ã‘ã€50-60Â°ã®å‰å‚¾ã‹ã‚‰6æ­©ç¨‹åº¦ã§æ®µéšçš„ã«ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰å§¿å‹¢ã¸ç§»è¡Œã—ã¾ã—ã‚‡ã†ã€‚è‚¡é–¢ç¯€ä¼¸å±•ã‚’æ„è­˜ã—ã¦ãã ã•ã„ã€‚"):(V="åˆç´šãƒ¬ãƒ™ãƒ«ï¼ˆåŠ é€Ÿèµ°ï¼‰",oe="åŠ é€Ÿèµ°æŠ€è¡“ã®æ”¹å–„ãŒå¿…è¦ã§ã™ã€‚åŠ©èµ°ãŒã‚ã‚‹ãŸã‚ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã»ã©æ·±ã„å‰å‚¾ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ãŒã€50-60Â°ã®å‰å‚¾ã‚’ç¶­æŒã—ã€è‚¡é–¢ç¯€ä¼¸å±•ä¸»å°ã§åŠ é€Ÿã—ã¾ã—ã‚‡ã†ã€‚æ€¥ãªèµ·ãä¸ŠãŒã‚Šã¯åŠ é€Ÿã‚’å¦¨ã’ã¾ã™ã€‚");else{const L=D?"åŠ é€Ÿèµ°":"æœ€å¤§é€Ÿåº¦";C>=3.5?(V=`ã‚¨ãƒªãƒ¼ãƒˆãƒ¬ãƒ™ãƒ«ï¼ˆ${L}ï¼‰`,D?oe="ç´ æ™´ã‚‰ã—ã„åŠ é€Ÿèµ°ãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚åŠ©èµ°ã§å¾—ãŸã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’åŠ¹ç‡çš„ã«æ´»ã‹ã—ã€ã€ŒçŸ­ã„æ”¯æŒæ™‚é–“ã§å¾Œæ–¹ã¾ã§ã‚­ãƒƒã‚¯ã€ã§ãã¦ã„ã¾ã™ã€‚ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰ç¶­æŒã«æœ€é©ãªå‹•ä½œãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚":oe="ç´ æ™´ã‚‰ã—ã„ç–¾èµ°ãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚ã€ŒçŸ­ã„æ”¯æŒæ™‚é–“ã§å¾Œæ–¹ã¾ã§ã‚­ãƒƒã‚¯ã€ã—ã€ã€Œè‚¡é–¢ç¯€ã‚’ç”¨ã„ã¦ç´ æ—©ãã‚­ãƒƒã‚¯ã—ã€ç´ æ—©ãå¼•ãä»˜ã‘ã¦ã€ã„ã¾ã™ã€‚ä¸–ç•Œä¸€æµã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã®å‹•ä½œç‰¹æ€§ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚"):C>=3?(V=`ä¸Šç´šãƒ¬ãƒ™ãƒ«ï¼ˆ${L}ï¼‰`,D?oe="è‰¯å¥½ãªåŠ é€Ÿèµ°ãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚åŠ©èµ°ã®å‹¢ã„ã‚’æ´»ã‹ã›ã¦ã„ã¾ã™ã€‚ã€Œè‚¡é–¢ç¯€ã®ä¼¸å±•é€Ÿåº¦ã‚’é«˜ã‚ã€è†ãƒ»è¶³é–¢ç¯€ã®ä¼¸å±•ã‚’å¼·èª¿ã—ãªã„ã€ã“ã¨ã§ã€ã•ã‚‰ãªã‚‹é€Ÿåº¦ç¶­æŒãŒå¯èƒ½ã§ã™ã€‚":oe="è‰¯å¥½ãªç–¾èµ°ãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚ã€Œè‚¡é–¢ç¯€ã®ä¼¸å±•é€Ÿåº¦ã‚’é«˜ã‚ã€è†ãƒ»è¶³é–¢ç¯€ã®ä¼¸å±•ã‚’å¼·èª¿ã—ãªã„ã€ã“ã¨ã§ã€ã•ã‚‰ãªã‚‹é€Ÿåº¦å‘ä¸ŠãŒæœŸå¾…ã§ãã¾ã™ã€‚"):C>=2.5?(V=`ä¸­ç´šãƒ¬ãƒ™ãƒ«ï¼ˆ${L}ï¼‰`,D?oe="åŠ é€Ÿèµ°ãƒ•ã‚©ãƒ¼ãƒ ã«æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚åŠ©èµ°ã§å¾—ãŸã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã€ã€Œè„šã®å±ˆä¼¸ã‚’å°ã•ãã€è„šãŒæµã‚Œãªã„ï¼ˆå¼•ãä»˜ã‘ãŒç´ æ—©ã„ï¼‰ã€å‹•ä½œã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚":oe="ç–¾èµ°å‹•ä½œã«æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚ç ”ç©¶ã«ã‚ˆã‚‹ã¨ã€å„ªã‚ŒãŸã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã¯ã€Œè„šã®å±ˆä¼¸ãŒå°ã•ãã€è„šãŒæµã‚Œãªã„ï¼ˆå¼•ãä»˜ã‘ãŒç´ æ—©ã„ï¼‰ã€ã“ã¨ãŒç‰¹å¾´ã§ã™ã€‚ã€Œã‚‚ã‚‚ä¸Šã’ã€ã‚’å¼·èª¿ã™ã‚‹ã‚ˆã‚Šã€è‚¡é–¢ç¯€ã§ã®ç´ æ—©ã„ã‚­ãƒƒã‚¯ã¨å¼•ãä»˜ã‘ã‚’æ„è­˜ã—ã¾ã—ã‚‡ã†ã€‚"):(V=`åˆç´šãƒ¬ãƒ™ãƒ«ï¼ˆ${L}ï¼‰`,D?oe="åŠ é€Ÿèµ°æŠ€è¡“ã®æ”¹å–„ãŒå¿…è¦ã§ã™ã€‚åŠ©èµ°ã§å¾—ãŸã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã€çŸ­ã„æ¥åœ°æ™‚é–“ã§åŠ¹ç‡çš„ã«æ¨é€²åŠ›ã‚’å¾—ã‚‹å‹•ä½œã‚’ç¿’å¾—ã—ã¾ã—ã‚‡ã†ã€‚ã»ã¼å‚ç›´ã®ä½“å¹¹å§¿å‹¢ï¼ˆ80-90Â°ï¼‰ã‚’ä¿ã¡ã€ã€ŒçœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ã€ã‚’æ„è­˜ã—ã¦ãã ã•ã„ã€‚":oe="ç–¾èµ°æŠ€è¡“ã®æ”¹å–„ãŒå¿…è¦ã§ã™ã€‚ã€Œæ”¯æŒæœŸã§ã—ã‹åŠ é€Ÿã§ããªã„ã€ã¨ã„ã†åŸå‰‡ã‚’ç†è§£ã—ã€çŸ­ã„æ¥åœ°æ™‚é–“ã§åŠ¹ç‡çš„ã«æ¨é€²åŠ›ã‚’å¾—ã‚‹å‹•ä½œã‚’ç¿’å¾—ã—ã¾ã—ã‚‡ã†ã€‚ã€Œã‚‚ã‚‚ä¸Šã’ã€ã€ŒæŒ¯ã‚Šå‡ºã—ã€ã¯å¿…ãšã—ã‚‚é€Ÿã•ã«ã¤ãªãŒã‚Šã¾ã›ã‚“ã€‚")}return{evaluations:r,overallRating:V,overallMessage:oe,avgScore:C}}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Si=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,p,a)=>a?a.toUpperCase():p.toLowerCase()),Fs=l=>{const n=Si(l);return n.charAt(0).toUpperCase()+n.slice(1)},Is=(...l)=>l.filter((n,p,a)=>!!n&&n.trim()!==""&&a.indexOf(n)===p).join(" ").trim(),ki=l=>{for(const n in l)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=h.forwardRef(({color:l="currentColor",size:n=24,strokeWidth:p=2,absoluteStrokeWidth:a,className:f="",children:N,iconNode:r,...d},$)=>h.createElement("svg",{ref:$,...wi,width:n,height:n,stroke:l,strokeWidth:a?Number(p)*24/Number(n):p,className:Is("lucide",f),...!N&&!ki(d)&&{"aria-hidden":"true"},...d},[...r.map(([R,D])=>h.createElement(R,D)),...Array.isArray(N)?N:[N]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=(l,n)=>{const p=h.forwardRef(({className:a,...f},N)=>h.createElement(Fi,{ref:N,iconNode:n,className:Is(`lucide-${vi(Fs(l))}`,`lucide-${l}`,a),...f}));return p.displayName=Fs(l),p};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$i=pn("circle-check-big",_i);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ni=pn("play",Ci);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mi=pn("settings",zi);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_s=pn("upload",Ri);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Ai=pn("video",Ti),Ke=[];for(let l=0;l<256;++l)Ke.push((l+256).toString(16).slice(1));function Pi(l,n=0){return(Ke[l[n+0]]+Ke[l[n+1]]+Ke[l[n+2]]+Ke[l[n+3]]+"-"+Ke[l[n+4]]+Ke[l[n+5]]+"-"+Ke[l[n+6]]+Ke[l[n+7]]+"-"+Ke[l[n+8]]+Ke[l[n+9]]+"-"+Ke[l[n+10]]+Ke[l[n+11]]+Ke[l[n+12]]+Ke[l[n+13]]+Ke[l[n+14]]+Ke[l[n+15]]).toLowerCase()}let Hn;const Ii=new Uint8Array(16);function Li(){if(!Hn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Hn=crypto.getRandomValues.bind(crypto)}return Hn(Ii)}const Ei=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$s={randomUUID:Ei};function Wi(l,n,p){var f;l=l||{};const a=l.random??((f=l.rng)==null?void 0:f.call(l))??Li();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Pi(a)}function Cs(l,n,p){return $s.randomUUID&&!l?$s.randomUUID():Wi(l)}const Bi=({athleteId:l,onStartAnalysis:n,onCancel:p,processSegmentVideo:a})=>{const[f,N]=h.useState("config"),[r,d]=h.useState(null),[$,R]=h.useState([]),[D,J]=h.useState({}),[ie,me]=h.useState({}),ce=[20,30,40,60,80,100],Q=10,ue=(C,V)=>{const oe=C/Q,L={id:Cs(),label:V||`${C}m Run ${new Date().toLocaleDateString()}`,totalDistanceM:C,segmentLengthM:Q,createdAt:new Date,athleteId:l,status:"setup"},Y=[];for(let ee=0;ee<oe;ee++)Y.push({id:Cs(),runId:L.id,segmentIndex:ee,startDistanceM:ee*Q,endDistanceM:(ee+1)*Q,status:"pending"});d(L),R(Y),N("upload")},E=(C,V)=>{J(oe=>({...oe,[C]:V})),R(oe=>oe.map(L=>L.id===C?{...L,status:"uploaded",videoUrl:URL.createObjectURL(V)}:L))},_=async()=>{if(!r||$.some(C=>C.status!=="uploaded"&&C.status!=="completed")){alert("ã™ã¹ã¦ã®ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã«å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„");return}if(a)for(const C of $){const V=D[C.id];if(V)try{const oe=await a(V,C);C.sessionId=oe,C.status="completed"}catch(oe){console.error(`ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ${C.segmentIndex}ã®å‡¦ç†ã‚¨ãƒ©ãƒ¼:`,oe),C.status="error"}}n(r,$)};return e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[e.jsx("div",{className:"border-b p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:`flex items-center ${f==="config"?"text-blue-600":"text-gray-400"}`,children:[e.jsx(Mi,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"1. ãƒ©ãƒ³è¨­å®š"})]}),e.jsxs("div",{className:`flex items-center ${f==="upload"?"text-blue-600":"text-gray-400"}`,children:[e.jsx(_s,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"2. å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"})]}),e.jsxs("div",{className:`flex items-center ${f==="calibrate"?"text-blue-600":"text-gray-400"}`,children:[e.jsx(Ai,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"3. ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"})]})]})}),f==="config"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"ãƒãƒ«ãƒã‚«ãƒ¡ãƒ©ãƒ©ãƒ³è¨­å®š"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ç·è·é›¢ã‚’é¸æŠ"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:ce.map(C=>e.jsxs("button",{onClick:()=>{const V=prompt("ãƒ©ãƒ³ã®ãƒ©ãƒ™ãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰");ue(C,V||"")},className:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[C,"m"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[C/Q,"ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ"]})]},C))})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:["å„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã¯",Q,"må˜ä½ã§æ’®å½±ã•ã‚Œã¾ã™ã€‚ ã‚«ãƒ¡ãƒ©ã¯å„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’å›ºå®šä½ç½®ã‹ã‚‰æ’®å½±ã—ã¦ãã ã•ã„ã€‚"]})})]})]}),f==="upload"&&r&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:[r.label," - ã‚»ã‚°ãƒ¡ãƒ³ãƒˆå‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"]}),e.jsx("div",{className:"space-y-4",children:$.map((C,V)=>{var oe;return e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-medium",children:["ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ ",V+1," (",C.startDistanceM,"ã€œ",C.endDistanceM,"m)"]}),e.jsx("div",{className:"mt-2",children:C.status==="pending"?e.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[e.jsx(_s,{className:"w-4 h-4 mr-2"}),"å‹•ç”»ã‚’é¸æŠ",e.jsx("input",{type:"file",accept:"video/*",className:"hidden",onChange:L=>{var ee;const Y=(ee=L.target.files)==null?void 0:ee[0];Y&&E(C.id,Y)}})]}):e.jsxs("div",{className:"flex items-center text-green-600",children:[e.jsx($i,{className:"w-5 h-5 mr-2"}),(oe=D[C.id])==null?void 0:oe.name]})})]}),e.jsx("div",{className:"ml-4",children:C.status==="uploaded"&&e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿"})})]})},C.id)})}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx("button",{onClick:p,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsxs("button",{onClick:_,disabled:$.some(C=>C.status==="pending"),className:`px-6 py-2 rounded-lg flex items-center ${$.every(C=>C.status!=="pending")?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(Ni,{className:"w-4 h-4 mr-2"}),"è§£æé–‹å§‹"]})]})]})]})})},Di=({userProfile:l,onNewAnalysis:n,onShowTutorial:p})=>{const[a,f]=h.useState(!1);h.useEffect(()=>{const d=()=>{const $=document.getElementById("mobile-header-ultimate-styles");$&&$.remove();const R=document.createElement("style");R.id="mobile-header-ultimate-styles",R.textContent=`
        @media (max-width: 768px) {
          /* æ—¢å­˜ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã¨ãã®ã™ã¹ã¦ã®å­è¦ç´ ã‚’å®Œå…¨ã«éš ã™ */
          .app-header-new,
          .app-header-new *,
          header,
          header *,
          [class*="header"],
          [class*="Header"] {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            height: 0 !important;
            overflow: hidden !important;
            margin: 0 !important;
            padding: 0 !important;
            pointer-events: none !important;
          }
          
          /* ãƒ¢ãƒã‚¤ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ã ã‘ã‚’è¡¨ç¤º */
          .mobile-header-ultimate {
            display: flex !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            height: 40px !important;
            background: #4a5568 !important;
            z-index: 999999 !important;
            justify-content: flex-end !important;
            align-items: center !important;
            padding: 0 10px !important;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3) !important;
          }
          
          /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒãƒ¼ã‚¸ãƒ³èª¿æ•´ */
          .app-container,
          .wizard-main,
          main,
          [class*="container"] {
            margin-top: 45px !important;
            padding-top: 10px !important;
          }
          
          /* ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒœã‚¿ãƒ³ */
          .ultimate-hamburger-btn {
            width: 35px !important;
            height: 35px !important;
            background: transparent !important;
            border: none !important;
            cursor: pointer !important;
            padding: 5px !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: space-around !important;
            align-items: center !important;
            position: relative !important;
            z-index: 1000001 !important;
          }
          
          .ultimate-hamburger-line {
            width: 25px !important;
            height: 3px !important;
            background: white !important;
            border-radius: 2px !important;
            transition: all 0.3s !important;
            display: block !important;
          }
          
          .ultimate-hamburger-btn.open .ultimate-hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px) !important;
          }
          
          .ultimate-hamburger-btn.open .ultimate-hamburger-line:nth-child(2) {
            opacity: 0 !important;
            transform: scale(0) !important;
          }
          
          .ultimate-hamburger-btn.open .ultimate-hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px) !important;
          }
          
          /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
          .ultimate-mobile-menu {
            position: fixed !important;
            top: 40px !important;
            right: -300px !important;
            width: 250px !important;
            max-height: calc(100vh - 40px) !important;
            background: white !important;
            box-shadow: -2px 2px 10px rgba(0,0,0,0.3) !important;
            transition: right 0.3s ease !important;
            z-index: 1000000 !important;
            overflow-y: auto !important;
          }
          
          .ultimate-mobile-menu.open {
            right: 0 !important;
          }
          
          .ultimate-menu-item {
            padding: 15px 20px !important;
            border-bottom: 1px solid #e0e0e0 !important;
            background: white !important;
            color: #333 !important;
            cursor: pointer !important;
            display: flex !important;
            align-items: center !important;
            font-size: 14px !important;
            transition: background 0.2s !important;
          }
          
          .ultimate-menu-item:active {
            background: #f5f5f5 !important;
          }
          
          .ultimate-menu-item span {
            margin-right: 10px !important;
            font-size: 18px !important;
          }
          
          /* ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
          .ultimate-menu-overlay {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            background: rgba(0, 0, 0, 0.3) !important;
            z-index: 999999 !important;
            display: none !important;
          }
          
          .ultimate-menu-overlay.open {
            display: block !important;
          }
        }
        
        /* ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã§ã¯éè¡¨ç¤º */
        @media (min-width: 769px) {
          .mobile-header-ultimate,
          .ultimate-mobile-menu,
          .ultimate-menu-overlay {
            display: none !important;
          }
        }
      `,document.head.appendChild(R),setTimeout(()=>{document.querySelectorAll('.app-header-new, header, [class*="header"], [class*="Header"]').forEach(J=>{window.innerWidth<=768&&(J.style.cssText="display: none !important; height: 0 !important; visibility: hidden !important;")})},100)};return d(),window.addEventListener("resize",d),document.readyState==="loading"&&document.addEventListener("DOMContentLoaded",d),()=>{window.removeEventListener("resize",d)}},[]);const N=()=>{f(!a)},r=d=>{d&&d(),f(!1)};return typeof window<"u"&&window.innerWidth>768?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mobile-header-ultimate",children:e.jsxs("button",{className:`ultimate-hamburger-btn ${a?"open":""}`,onClick:N,children:[e.jsx("span",{className:"ultimate-hamburger-line"}),e.jsx("span",{className:"ultimate-hamburger-line"}),e.jsx("span",{className:"ultimate-hamburger-line"})]})}),e.jsx("div",{className:`ultimate-menu-overlay ${a?"open":""}`,onClick:()=>f(!1)}),e.jsxs("div",{className:`ultimate-mobile-menu ${a?"open":""}`,children:[e.jsxs("div",{className:"ultimate-menu-item",onClick:()=>r(n),children:[e.jsx("span",{children:"ğŸ†•"}),"æ–°ã—ã„è§£æã‚’é–‹å§‹"]}),e.jsxs("div",{className:"ultimate-menu-item",onClick:()=>r(p),children:[e.jsx("span",{children:"ğŸ“–"}),"ä½¿ã„æ–¹ã‚’è¦‹ã‚‹"]}),l&&e.jsxs("div",{className:"ultimate-menu-item",children:[e.jsx("span",{children:"ğŸ‘¤"}),l.name]}),e.jsxs("div",{className:"ultimate-menu-item",children:[e.jsx("span",{children:"âš™ï¸"}),"è¨­å®š"]}),e.jsxs("div",{className:"ultimate-menu-item",children:[e.jsx("span",{children:"ğŸ“Š"}),"è§£æå±¥æ­´"]})]})]})},Hi=()=>(h.useEffect(()=>{const l=()=>{const n=document.getElementById("mobile-layout-fix-styles");n&&n.remove();const p=document.createElement("style");p.id="mobile-layout-fix-styles",p.textContent=`
        @media (max-width: 768px) {
          /* ãƒãƒ¼ã‚«ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¿®æ­£ */
          .marker-table,
          table {
            display: block !important;
            width: 100% !important;
            overflow-x: auto !important;
            -webkit-overflow-scrolling: touch !important;
            margin: 0 !important;
            position: relative !important;
          }
          
          .marker-table table,
          table tbody,
          table thead {
            min-width: 600px !important;
          }
          
          .marker-table td,
          .marker-table th,
          td, th {
            padding: 4px !important;
            font-size: 12px !important;
            white-space: nowrap !important;
          }
          
          .marker-table input,
          table input[type="number"],
          table input[type="text"] {
            width: 40px !important;
            max-width: 40px !important;
            padding: 2px !important;
            font-size: 16px !important; /* iOSã®ã‚ºãƒ¼ãƒ ã‚’é˜²ã */
            height: 28px !important;
            border: 1px solid #ccc !important;
            box-sizing: border-box !important;
          }
          
          /* é‡ãªã‚Šé˜²æ­¢ */
          .marker-table tr,
          table tr {
            display: table-row !important;
            position: relative !important;
            z-index: 1 !important;
          }
          
          .marker-table td:first-child,
          table td:first-child {
            position: sticky !important;
            left: 0 !important;
            background: white !important;
            z-index: 2 !important;
          }
          
          /* ãƒœã‚¿ãƒ³ã®æœ€é©åŒ– */
          button, .button, [type="button"] {
            min-height: 40px !important;
            min-width: 44px !important;
            padding: 8px 12px !important;
            font-size: 14px !important;
            touch-action: manipulation !important;
          }
          
          /* ãƒ•ãƒ¬ãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« */
          .frame-controls {
            position: fixed !important;
            bottom: 0 !important;
            left: 0 !important;
            right: 0 !important;
            background: white !important;
            padding: 5px !important;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1) !important;
            z-index: 100 !important;
            display: flex !important;
            gap: 5px !important;
            justify-content: center !important;
            flex-wrap: wrap !important;
          }
          
          .frame-controls button {
            flex: 0 0 auto !important;
            min-width: 60px !important;
            padding: 8px !important;
          }
          
          /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ’ãƒ³ãƒˆ */
          .scroll-hint {
            position: absolute !important;
            top: 50% !important;
            right: 10px !important;
            transform: translateY(-50%) !important;
            background: rgba(0,0,0,0.6) !important;
            color: white !important;
            padding: 5px 10px !important;
            border-radius: 15px !important;
            font-size: 11px !important;
            pointer-events: none !important;
            animation: fadeInOut 3s ease-in-out !important;
            z-index: 10 !important;
          }
          
          @keyframes fadeInOut {
            0%, 100% { opacity: 0; }
            10%, 90% { opacity: 1; }
          }
          
          /* å…¨ä½“çš„ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ */
          body {
            overflow-x: hidden !important;
            -webkit-text-size-adjust: 100% !important;
          }
          
          .app-container {
            padding: 0 !important;
            margin-top: 45px !important;
            width: 100% !important;
            overflow-x: hidden !important;
          }
          
          .wizard-main {
            padding: 10px !important;
            margin: 0 !important;
            width: 100% !important;
            box-sizing: border-box !important;
          }
          
          .step-content {
            padding: 10px !important;
            margin: 0 !important;
            overflow-x: hidden !important;
          }
          
          /* ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ */
          select {
            min-height: 40px !important;
            font-size: 16px !important; /* iOSã®ã‚ºãƒ¼ãƒ ã‚’é˜²ã */
            padding: 8px !important;
            width: 100% !important;
            box-sizing: border-box !important;
            -webkit-appearance: none !important;
            appearance: none !important;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e") !important;
            background-repeat: no-repeat !important;
            background-position: right 10px center !important;
            background-size: 20px !important;
            padding-right: 35px !important;
          }
          
          /* ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ */
          textarea {
            font-size: 16px !important; /* iOSã®ã‚ºãƒ¼ãƒ ã‚’é˜²ã */
            width: 100% !important;
            box-sizing: border-box !important;
          }
          
          /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
          .modal, [class*="modal"] {
            position: fixed !important;
            top: 45px !important;
            left: 5px !important;
            right: 5px !important;
            bottom: 5px !important;
            width: auto !important;
            height: auto !important;
            margin: 0 !important;
            padding: 10px !important;
            max-width: 100% !important;
            max-height: calc(100vh - 50px) !important;
            overflow-y: auto !important;
          }
        }
      `,document.head.appendChild(p),setTimeout(()=>{window.innerWidth<=768&&document.querySelectorAll(".marker-table, table").forEach(f=>{if(!f.querySelector(".scroll-hint")){const N=document.createElement("div");N.className="scroll-hint",N.textContent="â† å·¦å³ã«ã‚¹ãƒ¯ã‚¤ãƒ— â†’",f.appendChild(N)}})},500)};return l(),window.addEventListener("resize",l),document.readyState==="loading"&&document.addEventListener("DOMContentLoaded",l),()=>{window.removeEventListener("resize",l)}},[]),null),ot=(l,n,p)=>Math.max(n,Math.min(p,l)),Ut=l=>{const n=_=>l[_],a=n(23),f=n(24),N=n(11),r=n(12);if(a.visibility<.1||f.visibility<.1||N.visibility<.1||r.visibility<.1)return{trunkAngle:null,hipAnkleAngle:{left:null,right:null},thighAngle:{left:null,right:null},shankAngle:{left:null,right:null},kneeFlex:{left:null,right:null},ankleFlex:{left:null,right:null},elbowAngle:{left:null,right:null},toeHorizontalDistance:{left:null,right:null}};const d={x:(a.x+f.x)/2,y:(a.y+f.y)/2},$={x:(N.x+r.x)/2,y:(N.y+r.y)/2},R=$.x-d.x,D=$.y-d.y;let J=90-Math.atan2(R,-D)*180/Math.PI;for(;J<0;)J+=180;for(;J>180;)J-=180;const ie=_=>{const C=_==="left"?23:24,V=_==="left"?25:26,oe=_==="left"?27:28,L=_==="left"?31:32,Y=n(C),ee=n(V),ye=n(oe),v=n(L),be=Math.atan2(ye.x-Y.x,-(ye.y-Y.y))*180/Math.PI,W=ee.x-Y.x,A=ee.y-Y.y;let se=Math.atan2(W,A)*180/Math.PI;se=-se;const le=ye.x-ee.x,Fe=ye.y-ee.y;let de=Math.atan2(le,Fe)*180/Math.PI;de=-de;const he={x:ee.x-Y.x,y:ee.y-Y.y},j={x:ye.x-ee.x,y:ye.y-ee.y},Ne=he.x*j.x+he.y*j.y,pe=Math.sqrt(he.x*he.x+he.y*he.y),je=Math.sqrt(j.x*j.x+j.y*j.y),De=Ne/(pe*je),rt=180-Math.acos(ot(De,-1,1))*180/Math.PI,et={x:v.x-ye.x,y:v.y-ye.y},kt=j.x*et.x+j.y*et.y,wt=Math.sqrt(et.x*et.x+et.y*et.y),xe=kt/(je*wt),Ge=180-Math.acos(ot(xe,-1,1))*180/Math.PI,Ye=pe,Ie=-(v.x-Y.x),Pe=Ye>0?Ie/Ye*50:null;return{hipAnkleAngle:be,thighAngle:se,shankAngle:de,kneeFlex:rt,ankleFlex:Ge,toeHorizontalDistanceCm:Pe}},me=ie("left"),ce=ie("right"),Q=_=>{const C=_==="left"?11:12,V=_==="left"?13:14,oe=_==="left"?15:16,L=n(C),Y=n(V),ee=n(oe);if(L.visibility<.1||Y.visibility<.1||ee.visibility<.1)return null;const ye={x:Y.x-L.x,y:Y.y-L.y},v={x:ee.x-Y.x,y:ee.y-Y.y},be=ye.x*v.x+ye.y*v.y,W=Math.sqrt(ye.x*ye.x+ye.y*ye.y),A=Math.sqrt(v.x*v.x+v.y*v.y);if(W===0||A===0)return null;const se=be/(W*A);return 180-Math.acos(ot(se,-1,1))*180/Math.PI},ue=Q("left"),E=Q("right");return{trunkAngle:J,hipAnkleAngle:{left:me.hipAnkleAngle,right:ce.hipAnkleAngle},thighAngle:{left:me.thighAngle,right:ce.thighAngle},shankAngle:{left:me.shankAngle,right:ce.shankAngle},kneeFlex:{left:me.kneeFlex,right:ce.kneeFlex},ankleFlex:{left:me.ankleFlex,right:ce.ankleFlex},elbowAngle:{left:ue,right:E},toeHorizontalDistance:{left:me.toeHorizontalDistanceCm,right:ce.toeHorizontalDistanceCm}}},On={contactTime:"æ¥åœ°æ™‚é–“ [s]",flightTime:"æ»ç©ºæ™‚é–“ [s]",stepPitch:"ãƒ”ãƒƒãƒ [æ­©/s]",stride:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ [m]",speedMps:"ã‚¹ãƒ”ãƒ¼ãƒ‰ [m/s]",brakeRatio:"ãƒ–ãƒ¬ãƒ¼ã‚­ç‡ [%]",kickRatio:"ã‚­ãƒƒã‚¯ç‡ [%]"},Oi={contactTime:"#2563eb",flightTime:"#10b981",stepPitch:"#f97316",stride:"#7c3aed",speedMps:"#dc2626",brakeRatio:"#ef4444",kickRatio:"#22c55e"};function Ui(l,n){const p=1/n,a=new Array(l.length).fill(0);if(l.length<2)return a;a[0]=(l[1]-l[0])/p;for(let f=1;f<l.length-1;f++)a[f]=(l[f+1]-l[f-1])/(2*p);return a[l.length-1]=(l[l.length-1]-l[l.length-2])/p,a}function Vi(l,n){const{contactFrame:p,toeOffFrame:a}=l,f=Math.max(0,p),N=Math.min(n.length-2,a);if(N-f+1<=1)return{brakeTimeRatio:void 0,kickTimeRatio:void 0,brakeImpulseRatio:void 0,kickImpulseRatio:void 0,quality:"bad"};let d=0,$=0,R=0,D=0;for(let _=f;_<=N;_++){const C=n[_+1]-n[_];C<0?(d++,R+=-C):C>0&&($++,D+=C)}const J=d+$;let ie,me,ce,Q,ue;J<3?ue="bad":J<6?ue="warning":ue="good",J>0&&(ie=d/J,me=$/J);const E=R+D;return E>0&&(ce=R/E,Q=D/E),{brakeTimeRatio:ie,kickTimeRatio:me,brakeImpulseRatio:ce,kickImpulseRatio:Q,quality:ue}}function Xi(l,n,p){const a=Ui(n,p);return l.map(f=>{const N=Vi(f,a);return{...f,...N}})}const qi=({userProfile:l})=>{const[n,p]=h.useState(!1),[a,f]=h.useState(!1);h.useEffect(()=>{const i=()=>{const c=navigator.userAgent,o=window.innerWidth,x=/iPhone|iPad|iPod|Android/i.test(c)||o<1024;p(x),f(!1),console.log(`ğŸ“± ãƒ‡ãƒã‚¤ã‚¹åˆ¤å®š: ${x?"ãƒ¢ãƒã‚¤ãƒ«ï¼ˆiPadå«ã‚€ï¼‰":"PC"} (å¹…: ${o}px, UA: ${c.substring(0,50)})`)};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const[N,r]=h.useState(0),[d,$]=h.useState(120),[R,D]=h.useState("single"),[J,ie]=h.useState(null),[me,ce]=h.useState([]),[Q,ue]=h.useState(!1),E={name:"",age:null,gender:null,affiliation:"",height_cm:null,current_record:"",target_record:""},[_,C]=h.useState(E),[V,oe]=h.useState([]),[L,Y]=h.useState(null);h.useEffect(()=>{(async()=>{const{data:c,error:o}=await ve.auth.getSession();if(o||!c.session)return;const x=c.session.user.id,{data:y,error:m}=await ve.from("athletes").select("id, full_name, sex, birth_date, affiliation, height_cm, current_record_s, target_record_s").eq("owner_auth_user_id",x).order("created_at",{ascending:!1});if(m){console.error("athletes ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ",m);return}const H=(y??[]).map(T=>{const S=T.birth_date??T.birthdate??T.date_of_birth??null;let k=null;if(S){const G=new Date(S);if(!isNaN(G.getTime())){const t=new Date;k=t.getFullYear()-G.getFullYear();const s=t.getMonth()-G.getMonth();(s<0||s===0&&t.getDate()<G.getDate())&&k--}}const P=typeof T.age=="number"?T.age:k,I=T.gender??T.sex??null;let re=null;if(I)switch(I){case"male":case"ç”·æ€§":case"ç”·":re="male";break;case"female":case"å¥³æ€§":case"å¥³":re="female";break;case"other":case"ãã®ä»–":re="other";break;default:re="other"}const K=T.affiliation??T.team??null;return{id:T.id,full_name:T.full_name??"",gender:re,affiliation:K,height_cm:T.height_cm??null,current_record_s:T.current_record_s??null,target_record_s:T.target_record_s??null,birthdate:S,age:P}});oe(H)})()},[]),h.useEffect(()=>{if(!L)return;const i=V.find(c=>c.id===L);i&&C(c=>({...c,name:i.full_name,height_cm:i.height_cm,current_record:i.current_record_s!=null?String(i.current_record_s):"",target_record:i.target_record_s!=null?String(i.target_record_s):""}))},[L,V]);const[ee,ye]=h.useState(null),[v,be]=h.useState(null),[W,A]=h.useState(!1),[se,le]=h.useState(0),[Fe,de]=h.useState(""),he=h.useRef([]),[j,Ne]=h.useState(0),[pe,je]=h.useState(0),De=h.useRef(null),[nt,rt]=h.useState(null),[et,kt]=h.useState(null),wt=h.useRef(null),xe=h.useRef(null),[ze,Ge]=h.useState(null),[Ye,He]=h.useState(()=>localStorage.getItem("hideTutorial")!=="true"),[Ie,st]=h.useState(0);h.useEffect(()=>{const i=new URLSearchParams(window.location.search),c=i.get("viewMode"),o=i.get("sessionId"),x=i.get("step");if(c==="true"&&o){const y=localStorage.getItem("viewSessionData");if(localStorage.getItem("viewFullSession"),y)try{const m=JSON.parse(y);console.log("Loading session data for viewing:",m),x==="6"&&m&&(r(6),console.log("Session data loaded for viewing:",{hasStepMetrics:!!m.stepMetrics,hasThreePhaseAngles:!!m.threePhaseAngles,hasStepSummary:!!m.stepSummary,hasAthleteInfo:!!m.athleteInfo}),window.history.replaceState({},document.title,"/"))}catch(m){console.error("Failed to load session data:",m)}}},[]);const[Pe,at]=h.useState(!1),[Ft,$n]=h.useState(3),[te,sn]=h.useState([]),[El,Cn]=h.useState(!1),[Zn,ln]=h.useState(0),[pt,gn]=h.useState(!0),[Ee,Kt]=h.useState(null),[mt,Yt]=h.useState(null),[Xe,Jt]=h.useState(null),[Qn,xn]=h.useState(0),[es,un]=h.useState(0),[ts,fn]=h.useState(0),[Gt,mn]=h.useState(null),[Hs,bn]=h.useState(null),[Zt,yn]=h.useState(null),[Os,Nn]=h.useState(null),[Us,ns]=h.useState(null),[Vs,ss]=h.useState(null),[Ze,is]=h.useState("accel"),gt=h.useMemo(()=>{const i=Ee??0,c=Math.max(0,i-50),o=Xe??(he.current.length>0?he.current.length-1:0),x=o>=c?o-c+1:0,y=Ee!=null&&Xe!=null?Xe-Ee:0;return{start:c,end:o,count:x,displayStart:i,actualCount:y}},[Ee,Xe,j]),Dt=ze&&gt.actualCount>0?gt.actualCount/ze:null,ls=()=>{r(0),Y(null),C(E),ye(null),be(null),A(!1),le(0),de(""),he.current=[],Ne(0),je(0),Ge(null),sn([]),Cn(!1),ln(0),Kt(null),Yt(null),Jt(null),window.scrollTo({top:0,behavior:"smooth"})},[zn,os]=h.useState("10"),[Mn,rs]=h.useState(""),[Rn,as]=h.useState(""),[Wl,Bl]=h.useState("170"),[ds,Xs]=h.useState(""),[cs,qs]=h.useState(""),Oe=h.useMemo(()=>{const i=parseFloat(zn);return!isNaN(i)&&i>0?i:null},[zn]),jn=Oe!=null&&Dt!=null&&Dt>0?Oe/Dt:null,[Dl,Hl]=h.useState(null),[Qt,hs]=h.useState(!1),[Ol,Ul]=h.useState(null),[Ks,vn]=h.useState(null),[Te,on]=h.useState(null),[Vl,Ht]=h.useState(0),[Xl,Sn]=h.useState({contactFrame:null,toeOffFrame:null}),[ql,Tn]=h.useState(null),[Kl,An]=h.useState(null),[$e,Qe]=h.useState([]),[qe,it]=h.useState([]),[tt,Pn]=h.useState([]),Be=h.useMemo(()=>{const i=[];for(let c=0;c<$e.length;c++){const o=$e[c];if(i.push(o),Te===3){if(c<tt.length){let x=tt[c];x<=o&&(console.warn(`âš ï¸ ã‚¹ãƒ†ãƒƒãƒ—${c+1}: é›¢åœ°(${x})ãŒæ¥åœ°(${o})ä»¥å‰ã§ã™ã€‚è‡ªå‹•ä¿®æ­£ã—ã¾ã™ã€‚`),x=o+10),i.push(x)}}else if(c<qe.length){let x=qe[c];x<=o&&(console.warn(`âš ï¸ ã‚¹ãƒ†ãƒƒãƒ—${c+1}: é›¢åœ°(${x})ãŒæ¥åœ°(${o})ä»¥å‰ã§ã™ã€‚è‡ªå‹•ä¿®æ­£ã—ã¾ã™ã€‚`),x=o+10),i.push(x)}}return i},[$e,qe,tt,Te]),ps=()=>{Qe([]),it([]),Pn([]),Ht(0),Sn({contactFrame:null,toeOffFrame:null}),Tn(null),An(null),on(null)},Ys=i=>{if(!i||!i.landmarks)return null;const c=i.landmarks,o=c[23],x=c[24],y=c[25],m=c[26],M=c[27],H=c[28],T=c[31],S=c[32],k=c[11],P=c[12];if(!o||!x||!y||!m||!M||!H||!T||!S||!k||!P)return null;const I=(o.y+x.y)/2,re=Math.max(T.y,S.y),K=re-I,G=Math.atan2(M.y-y.y,M.x-y.x)-Math.atan2(o.y-y.y,o.x-y.x),t=Math.atan2(H.y-m.y,H.x-m.x)-Math.atan2(x.y-m.y,x.x-m.x),s=Math.max(M.y,H.y),g=s-I,b=(k.y+P.y)/2,u=Math.atan2(b-I,.01);return{relativeToeHeight:K,leftKneeAngle:G,rightKneeAngle:t,relativeAnkleHeight:g,torsoAngle:u,hipHeight:I,toeY:re,ankleY:s}},gs=i=>{if(!te.length)return null;console.log(`ğŸ” é›¢åœ°æ¤œå‡ºé–‹å§‹ï¼ˆæ”¹è¨‚ç‰ˆï¼‰: æ¥åœ°ãƒ•ãƒ¬ãƒ¼ãƒ =${i}`);const c=8,o=i,x=Math.min(i+60,te.length-1),y=[];for(let s=o;s<=x;s++){const g=Ys(te[s]);g&&y.push({frame:s,y:g.relativeToeHeight})}if(y.length<c+3)return console.warn(`âš ï¸ é›¢åœ°æ¤œå‡ºç”¨ãƒ‡ãƒ¼ã‚¿ä¸è¶³ï¼ˆ${y.length}ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰`),null;const m=y.length,M=new Array(m);for(let s=0;s<m;s++)s===0||s===m-1?M[s]=y[s].y:M[s]=(y[s-1].y+y[s].y+y[s+1].y)/3;const H=new Array(m).fill(0);for(let s=1;s<m;s++)H[s]=M[s]-M[s-1];let T=M[0],S=M[0];for(let s=1;s<m;s++)M[s]<T&&(T=M[s]),M[s]>S&&(S=M[s]);const k=S-T;if(k<1e-4)return console.warn(`âš ï¸ é›¢åœ°æ¤œå‡º: ã¤ã¾å…ˆã®ä¸Šä¸‹å‹•ãŒã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ï¼ˆrange=${k.toExponential(2)}ï¼‰`),null;const P=k*.001,I=k*.0015;let re=y.findIndex(s=>s.frame===i);re<0&&(re=0);let K=re;const G=Math.min(re+c,m-1);for(let s=re+1;s<m&&(s<G||Math.abs(H[s])<=P);s++)K=s;console.log(`  ğŸ“Š æ¥åœ°ãƒ—ãƒ©ãƒˆãƒ¼æ¨å®š: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹=${re}ï½${K} (ç·ãƒ•ãƒ¬ãƒ¼ãƒ =${m})`);const t=[];for(let s=K+1;s<m-3;s++){const g=H[s],b=H[s+1],u=H[s+2],F=H[s+3],w=(g+b+u+F)/4,q=[g,b,u,F].filter(X=>X<-I*.3).length;if(g<-I&&w<-I*.4&&q>=3){const X=Math.abs(w)*q;t.push({frame:y[s].frame,idx:s,score:X,riseDuration:q})}}if(t.length>0){const s=t[0];return console.log(`âœ… è¶…é«˜ç²¾åº¦é›¢åœ°æ¤œå‡º: Frame=${s.frame} (idx=${s.idx}, score=${s.score.toFixed(5)}, riseDuration=${s.riseDuration}, candidates=${t.length})`),s.frame}return console.warn(`âš ï¸ é›¢åœ°ãŒæ¤œå‡ºã§ãã¾ã›ã‚“ã§ã—ãŸï¼ˆæ¥åœ°Frame=${i}ï¼‰`),null};h.useEffect(()=>{if(N===5&&j>0&&te.length>0){if(Ee===null){Kt(0);const c=te[0];let o=null;if(c&&c.landmarks){const x=c.landmarks[23],y=c.landmarks[24];x&&y&&(o=(x.x+y.x)/2)}if(mn(o),xn(0),o!==null&&xe.current){const x=o*xe.current.width;Nn(x),console.log(`ğŸŸ¢ ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹åˆæœŸå€¤è¨­å®š: Frame 0, HipX=${o}, PixelX=${x.toFixed(0)}`)}else console.warn("âš ï¸ ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã§å§¿å‹¢èªè­˜å¤±æ•—: Frame 0 - è·é›¢è¨ˆç®—ã¯ä¸æ­£ç¢ºã«ãªã‚Šã¾ã™"),Nn(null)}if(Xe===null){const i=Math.max(0,j-1);Jt(i);const c=te[i];let o=null;if(c&&c.landmarks){const x=c.landmarks[23],y=c.landmarks[24];x&&y&&(o=(x.x+y.x)/2)}if(yn(o),fn(0),o!==null&&xe.current){const x=o*xe.current.width;ss(x),console.log(`ğŸ”´ ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥åœ°ç‚¹åˆæœŸå€¤è¨­å®š: Frame ${i}, HipX=${o}, PixelX=${x.toFixed(0)}`)}else console.log(`ğŸ”´ ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥åœ°ç‚¹åˆæœŸå€¤è¨­å®š: Frame ${i}, HipX=${o}`)}if(mt===null){const i=Math.floor(j/2);Yt(i);const c=te[i];let o=null;if(c&&c.landmarks){const x=c.landmarks[23],y=c.landmarks[24];x&&y&&(o=(x.x+y.x)/2)}if(bn(o),un(0),o!==null&&xe.current){const x=o*xe.current.width;ns(x),console.log(`ğŸŸ¡ ä¸­é–“åœ°ç‚¹åˆæœŸå€¤è¨­å®š: Frame ${i}, HipX=${o}, PixelX=${x.toFixed(0)}`)}else console.log(`ğŸŸ¡ ä¸­é–“åœ°ç‚¹åˆæœŸå€¤è¨­å®š: Frame ${i}, HipX=${o}`)}}},[N,j,te,Ee,Xe,mt]),h.useEffect(()=>{const i=c=>{if(j){if(c.code==="Space"){if(c.preventDefault(),Te===2){const o=[...$e,pe];Qe(o),console.log(`ğŸ“ æ¥åœ°ãƒãƒ¼ã‚¯: ãƒ•ãƒ¬ãƒ¼ãƒ  ${pe}`);const x=gs(pe);x!==null?it([...qe,x]):console.warn(`âš ï¸ é›¢åœ°ãŒæ¤œå‡ºã§ãã¾ã›ã‚“ã§ã—ãŸï¼ˆæ¥åœ°: ${pe}ï¼‰`)}else if(Te===3)if($e.length===tt.length)Qe([...$e,pe]),console.log(`ğŸ“ æ¥åœ°ãƒãƒ¼ã‚¯: ãƒ•ãƒ¬ãƒ¼ãƒ  ${pe}`);else{const o=$e[$e.length-1];if(pe<=o){alert("é›¢åœ°ãƒ•ãƒ¬ãƒ¼ãƒ ã¯æ¥åœ°ãƒ•ãƒ¬ãƒ¼ãƒ ã‚ˆã‚Šå¾Œã«ã—ã¦ãã ã•ã„ã€‚");return}Pn([...tt,pe]),console.log(`ğŸ“ é›¢åœ°ãƒãƒ¼ã‚¯: ãƒ•ãƒ¬ãƒ¼ãƒ  ${pe}`)}return}c.code==="ArrowRight"?(c.preventDefault(),je(o=>ot(o+1,0,Math.max(0,he.current.length-1)))):c.code==="ArrowLeft"?(c.preventDefault(),je(o=>ot(o-1,0,Math.max(0,he.current.length-1)))):c.code==="ArrowUp"?(c.preventDefault(),je(o=>ot(o+10,0,Math.max(0,he.current.length-1)))):c.code==="ArrowDown"&&(c.preventDefault(),je(o=>ot(o-10,0,Math.max(0,he.current.length-1))))}};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[pe,j]);const We=h.useMemo(()=>{var re,K,G,t,s,g,b;if(!ze)return[];const i=Te===2?2:3;if(Be.length<i)return[];const c=Oe??10,o=u=>{var F;if((F=te[u])!=null&&F.landmarks){const w=te[u].landmarks[23],B=te[u].landmarks[24];return(w.x+B.x)/2}return null};let x=null,y=null;Gt!=null?x=Gt:Ee!=null&&(x=o(Ee)),Zt!=null?y=Zt:Xe!=null&&(y=o(Xe)),(x==null||y==null||x===y)&&(console.warn("âš ï¸ ã‚¹ã‚¿ãƒ¼ãƒˆ/ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥ãƒ©ã‚¤ãƒ³ã®åº§æ¨™ãŒå–å¾—ã§ãã¾ã›ã‚“ã€‚å¾“æ¥è¨ˆç®—ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯"),x=0,y=1);const m=c/Math.abs(y-x),M=y>x,H=u=>{const F=o(u);return F==null?null:M?(F-x)*m:(x-F)*m};console.log("ğŸ“ ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰è¨ˆç®—ï¼ˆæ–°ä»•æ§˜ï¼‰:"),console.log(`   å…¥åŠ›è·é›¢: ${c}m`),console.log(`   ã‚¹ã‚¿ãƒ¼ãƒˆãƒ©ã‚¤ãƒ³X: ${x==null?void 0:x.toFixed(4)}, ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥ãƒ©ã‚¤ãƒ³X: ${y==null?void 0:y.toFixed(4)}`),console.log(`   èµ°è¡Œæ–¹å‘: ${M?"å·¦â†’å³":"å³â†’å·¦"}`),console.log(`   è·é›¢å¤‰æ›ä¿‚æ•°: ${m.toFixed(4)} m/æ­£è¦åŒ–å˜ä½`),console.log(`   èµ°è¡Œã‚¿ã‚¤ãƒ—: ${Ze==="dash"?"ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥":"åŠ é€Ÿèµ°ï¼ˆãƒ•ãƒ©ã‚¤ãƒ³ã‚°ï¼‰"}`);const T=Te===2?[...$e]:Be.filter((u,F)=>F%2===0),S=T.map(u=>H(u));console.log(`   æ¥åœ°ãƒ•ãƒ¬ãƒ¼ãƒ : ${T.join(", ")}`),console.log(`   å„æ¥åœ°è·é›¢[m]: ${S.map(u=>(u==null?void 0:u.toFixed(2))??"N/A").join(", ")}`);const k=[];if(Te===2){console.log(`ğŸ¯ ãƒ¢ãƒ¼ãƒ‰2ï¼ˆåŠè‡ªå‹•è¨­å®šï¼‰: ${$e.length}å€‹ã®æ¥åœ°ãƒ•ãƒ¬ãƒ¼ãƒ , ${qe.length}å€‹ã®é›¢åœ°ãƒ•ãƒ¬ãƒ¼ãƒ `);for(let u=0;u<$e.length-1;u++){const F=$e[u],w=$e[u+1];let B=qe[u];(B===void 0||B<=F)&&(B=Math.floor(F+(w-F)*.4)),B>=w&&(B=w-1);const q=B>F?(B-F)/ze:null,X=w>B?(w-B)/ze:null,z=(w-F)/ze,U=z>0?1/z:null,O=S[u],ne=S[u+1];let fe=null,Me=null,Z=O,_e=!1;if(O!=null&&ne!=null){fe=ne-O,Ze==="dash"&&u===0&&(_e=!0,fe=O);const we=Math.min(O,ne),lt=Math.max(O,ne),Ue=Math.max(0,we),Ct=Math.min(c,lt);Me=Math.max(0,Ct-Ue)}const Se=fe,ge=Se!=null&&z>0?Se/z:null;k.push({index:u+1,contactFrame:F,toeOffFrame:B,nextContactFrame:w,contactTime:q,flightTime:X,stepTime:z,stepPitch:U,stride:Se,speedMps:ge,acceleration:null,fullStride:fe??void 0,sectionStride:Me??void 0,distanceAtContact:Z??void 0,isFirstStepFromStart:_e})}}else{console.log(`âš¡ ãƒ¢ãƒ¼ãƒ‰1/3: ${Math.floor(Be.length/2)}ã‚¹ãƒ†ãƒƒãƒ—`);for(let u=0;u+2<Be.length;u+=2){const F=Be[u],w=Be[u+1],B=Be[u+2],q=w>F?(w-F)/ze:null,X=B>w?(B-w)/ze:null,z=B>F?(B-F)/ze:null,U=z&&z>0?1/z:null,O=u/2,ne=S[O],fe=S[O+1];let Me=null,Z=null,_e=ne,Se=!1;if(ne!=null&&fe!=null){Me=fe-ne,Ze==="dash"&&O===0&&(Se=!0,Me=ne);const lt=Math.min(ne,fe),Ue=Math.max(ne,fe),Ct=Math.max(0,lt),Ot=Math.min(c,Ue);Z=Math.max(0,Ot-Ct)}const ge=Me,we=ge!=null&&z!=null&&z>0?ge/z:null;k.push({index:k.length+1,contactFrame:F,toeOffFrame:w,nextContactFrame:B??null,contactTime:q,flightTime:X,stepTime:z,stepPitch:U,stride:ge,speedMps:we,acceleration:null,fullStride:Me??void 0,sectionStride:Z??void 0,distanceAtContact:_e??void 0,isFirstStepFromStart:Se})}}for(let u=0;u<k.length-1;u++){const F=k[u].speedMps,w=k[u+1].speedMps,B=k[u].stepTime;F!=null&&w!=null&&B!=null&&B>0&&(k[u].acceleration=(w-F)/B)}const P=[];for(let u=0;u<te.length;u++)if((re=te[u])!=null&&re.landmarks){const F=te[u].landmarks[23],w=te[u].landmarks[24],B=(F.x+w.x)/2;P.push(B)}else P.push(P.length>0?P[P.length-1]:0);console.log("ğŸ” COM X (first 20 frames):",P.slice(0,20).map(u=>u.toFixed(4))),console.log(`ğŸ“Š Total frames with pose data: ${P.length}, FPS: ${ze}`);const I=Xi(k,P,ze);for(const u of I){const F=u.contactFrame;if((K=te[F])!=null&&K.landmarks){const w=Ut(te[F].landmarks);u.trunkAngleAtContact=w.trunkAngle;const B=w.kneeFlex.left,q=w.kneeFlex.right;B!=null&&q!=null?u.kneeFlexAtContact=Math.max(B,q):u.kneeFlexAtContact=B??q}}if(I.length>0){const u=I[0];console.log(`ğŸ“ˆ Step 1:
        - Full Stride: ${((G=u.fullStride)==null?void 0:G.toFixed(2))??"N/A"}m
        - Section Stride: ${((t=u.sectionStride)==null?void 0:t.toFixed(2))??"N/A"}m
        - Distance at Contact: ${((s=u.distanceAtContact)==null?void 0:s.toFixed(2))??"N/A"}m
        - Is First Step (Dash): ${u.isFirstStepFromStart}
        - Brake/Kick Ratios: ${u.brakeImpulseRatio!=null?(u.brakeImpulseRatio*100).toFixed(1):"N/A"}% / ${u.kickImpulseRatio!=null?(u.kickImpulseRatio*100).toFixed(1):"N/A"}%
        - Trunk Angle at Contact: ${((g=u.trunkAngleAtContact)==null?void 0:g.toFixed(1))??"N/A"}Â°
        - Knee Flex at Contact: ${((b=u.kneeFlexAtContact)==null?void 0:b.toFixed(1))??"N/A"}Â°
      `)}return I},[Be,$e,ze,te,Oe,Qt,Te,Ze,Gt,Zt,Ee,Xe]),rn=h.useMemo(()=>{if(!ze||!te.length||Oe==null)return{time:null,speed:null};const i=Oe,c=S=>{var k;if((k=te[S])!=null&&k.landmarks){const P=te[S].landmarks[23],I=te[S].landmarks[24];return(P.x+I.x)/2}return null};let o=Gt,x=Zt;if(o==null&&Ee!=null&&(o=c(Ee)),x==null&&Xe!=null&&(x=c(Xe)),o==null||x==null||o===x)return{time:null,speed:null};const y=i/Math.abs(x-o),m=x>o,M=S=>{const k=c(S);return k==null?null:m?(k-o)*y:(o-k)*y};let H=null;for(let S=0;S<te.length-1;S++){const k=M(S),P=M(S+1);if(k!=null&&P!=null&&k<0&&P>=0){const I=(0-k)/(P-k);H=(S+I)/ze;break}else if(k!=null&&k>=0&&H==null){H=S/ze;break}}let T=null;for(let S=0;S<te.length-1;S++){const k=M(S),P=M(S+1);if(k!=null&&P!=null&&k<i&&P>=i){const I=(i-k)/(P-k);T=(S+I)/ze;break}}if(H!=null&&T!=null&&T>H){const S=T-H,k=i/S;return console.log(`ğŸƒ ${i}mã‚¿ã‚¤ãƒ : ${S.toFixed(3)}ç§’, å¹³å‡é€Ÿåº¦: ${k.toFixed(2)} m/s`),console.log(`   (ãƒˆãƒ«ã‚½ãƒ¼é€šé: ${H.toFixed(3)}s â†’ ${T.toFixed(3)}s)`),{time:S,speed:k}}return{time:null,speed:null}},[ze,te,Oe,Gt,Zt,Ee,Xe]),ae=h.useMemo(()=>{if(!We.length)return{stepCount:0,avgContact:null,avgFlight:null,avgStepTime:null,avgStepPitch:null,avgStride:null,avgSpeedMps:null,sectionTime:rn.time,sectionSpeed:rn.speed};let i=0,c=0,o=0,x=0,y=0,m=0,M=0,H=0,T=0,S=0,k=0,P=0;for(const b of We)b.contactTime!=null&&(i+=b.contactTime,c++),b.flightTime!=null&&(o+=b.flightTime,x++),b.stepTime!=null&&(y+=b.stepTime,m++),b.stepPitch!=null&&(M+=b.stepPitch,H++),b.stride!=null&&(T+=b.stride,S++),b.speedMps!=null&&(k+=b.speedMps,P++);const I=m,re=c?i/c:null,K=x?o/x:null,G=m?y/m:null,t=H?M/H:null,s=S?T/S:null,g=P?k/P:null;return{stepCount:I,avgContact:re,avgFlight:K,avgStepTime:G,avgStepPitch:t,avgStride:s,avgSpeedMps:g,sectionTime:rn.time,sectionSpeed:rn.speed}},[We,rn]),Le=h.useMemo(()=>{var c;if(!((c=te[pe])!=null&&c.landmarks))return null;const i=Ut(te[pe].landmarks);return{frame:pe,...i}},[pe,te]),_t=h.useMemo(()=>{var c,o,x;if(Be.length<3||te.length===0)return[];const i=[];for(let y=0;y+1<Be.length;y+=2){const m=Be[y],M=Be[y+1],H=Math.floor(y/2);if(M<=m)continue;if((c=te[m])!=null&&c.landmarks){const k=Ut(te[m].landmarks);i.push({stepIndex:H,phase:"initial",frame:m,angles:k})}let T=1/0,S=m;for(let k=m;k<=M;k++){const P=te[k];if(!(P!=null&&P.landmarks))continue;const I=Ut(P.landmarks),re=((I.thighAngle.left??0)+(I.thighAngle.right??0))/2,K=Math.abs(re);K<T&&(T=K,S=k)}if((o=te[S])!=null&&o.landmarks){const k=Ut(te[S].landmarks);i.push({stepIndex:H,phase:"mid",frame:S,angles:k})}if((x=te[M])!=null&&x.landmarks){const k=Ut(te[M].landmarks);i.push({stepIndex:H,phase:"late",frame:M,angles:k})}}return i},[Be,te]),Js=i=>{var o,x,y,m,M,H,T;const c=[...i];for(let S=0;S<c.length;S++)if(c[S]===null||!((o=c[S])!=null&&o.landmarks)){let k=S-1,P=S+1;for(;k>=0&&k>=S-20&&!((x=c[k])!=null&&x.landmarks);)k--;for(;P<c.length&&P<=S+20&&!((y=c[P])!=null&&y.landmarks);)P++;if(k>=0&&k>=S-20&&P<c.length&&P<=S+20&&((m=c[k])!=null&&m.landmarks)&&((M=c[P])!=null&&M.landmarks)){const I=c[k].landmarks,re=c[P].landmarks,K=(S-k)/(P-k),G=I.map((t,s)=>{const g=re[s];return{x:t.x+(g.x-t.x)*K,y:t.y+(g.y-t.y)*K,z:t.z+(g.z-t.z)*K,visibility:Math.min(t.visibility,g.visibility)*.8}});c[S]={landmarks:G},S%10===0&&console.log(`ğŸ”§ Frame ${S} interpolated from ${k} and ${P}`)}else k>=0&&k>=S-15&&((H=c[k])!=null&&H.landmarks)?(c[S]={landmarks:c[k].landmarks.map(I=>({...I,visibility:I.visibility*.6}))},S%10===0&&console.log(`ğŸ”§ Frame ${S} copied from ${k}`)):P<c.length&&P<=S+10&&((T=c[P])!=null&&T.landmarks)&&(c[S]={landmarks:c[P].landmarks.map(I=>({...I,visibility:I.visibility*.6}))},S%10===0&&console.log(`ğŸ”§ Frame ${S} copied from ${P}`))}return c},In=async()=>{var i;if(!he.current.length){alert("å…ˆã«ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡ºã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚");return}console.log("ğŸ§¹ Clearing previous pose estimation results..."),sn([]),await new Promise(c=>setTimeout(c,100)),Cn(!0),ln(0),de("å§¿å‹¢æ¨å®šã‚’å®Ÿè¡Œä¸­...");try{console.log("ğŸ” Checking MediaPipe availability..."),console.log("window.Pose:",typeof window.Pose),console.log("User Agent:",navigator.userAgent);const c=window.Pose;if(!c)if(console.error("âŒ MediaPipe Pose not found!"),console.error("Available globals:",Object.keys(window).filter(Z=>Z.toLowerCase().includes("pose")||Z.toLowerCase().includes("media"))),/iPad|iPhone/i.test(navigator.userAgent)){if(console.log("ğŸ”„ Attempting to reload MediaPipe for iOS..."),await new Promise((_e,Se)=>{const ge=document.createElement("script");ge.src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.5.1675469404/pose.min.js",ge.crossOrigin="anonymous",ge.onload=()=>{console.log("âœ… MediaPipe Pose script reloaded"),_e(!0)},ge.onerror=we=>{console.error("âŒ Failed to reload MediaPipe:",we),Se(we)},document.head.appendChild(ge)}),await new Promise(_e=>setTimeout(_e,500)),!window.Pose)throw new Error("MediaPipe Poseãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒiPadã§èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚")}else throw new Error("MediaPipe Poseãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");const o=window.Pose||c;console.log("ğŸ¯ Creating Pose instance...");const x=new o({locateFile:Z=>{const _e=`https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.5.1675469404/${Z}`;return console.log(`ğŸ“ Loading MediaPipe file: ${Z} from ${_e}`),_e}}),y=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),m=/iPhone|iPad|iPod/i.test(navigator.userAgent),M=/iPad/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;let H=2,T=.1,S=.1,k=!1,P=!0;M?(console.log("ğŸ“± iPad detected - applying mobile optimized settings"),H=1,T=.05,S=.05,k=!1,P=!0):y?(console.log("ğŸ“± Mobile device detected"),H=1,T=.08,S=.08):(console.log("ğŸ’» Desktop detected"),T=.05,S=.05),console.log(`ğŸ”§ Setting options: modelComplexity=${H}, detection=${T}, tracking=${S}`),x.setOptions({modelComplexity:H,smoothLandmarks:P,enableSegmentation:!1,smoothSegmentation:!1,minDetectionConfidence:T,minTrackingConfidence:S,selfieMode:!1,staticImageMode:k}),console.log(`ğŸš€ Pose estimation config: mobile=${y}, iOS=${m}, iPad=${M}, modelComplexity=${H}`),M&&(console.log("â³ Waiting for MediaPipe initialization on iPad..."),await new Promise(Z=>setTimeout(Z,1e3)));const I=[],re=he.current.length,K=document.createElement("canvas"),G=he.current[0];K.width=G.width,K.height=G.height;const t=K.getContext("2d",{willReadFrequently:!0});if(!t)throw new Error("Canvas context ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ");const g=Math.min(1,(M?540:960)/K.width),b=document.createElement("canvas");b.width=Math.max(1,Math.round(K.width*g)),b.height=Math.max(1,Math.round(K.height*g));const u=b.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("Pose canvas context ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ");const F=()=>{u.clearRect(0,0,b.width,b.height),u.drawImage(K,0,0,K.width,K.height,0,0,b.width,b.height)},w=M?3:y?5:20,B=M?15e3:y?1e4:5e3;if(re>0){console.log("ğŸ§ª Testing pose estimation on first frame..."),t.putImageData(he.current[0],0,0);try{(await new Promise((_e,Se)=>{const ge=setTimeout(()=>{console.error("âŒ Test frame timeout"),Se(new Error("Test timeout"))},M?1e4:5e3);x.onResults(we=>{clearTimeout(ge),console.log("âœ… Test frame processed:",we.poseLandmarks?"Landmarks found":"No landmarks"),_e(we)}),F(),x.send({image:b}).catch(we=>{console.error("âŒ Test frame send error:",we),Se(we)})})).poseLandmarks||(console.warn("âš ï¸ First frame test: No landmarks detected"),M&&(console.log("ğŸ”„ iPad: Retrying with different settings..."),x.setOptions({modelComplexity:0,staticImageMode:!0,minDetectionConfidence:.01,minTrackingConfidence:.01})))}catch(Z){console.error("âŒ First frame test failed:",Z)}}for(let Z=0;Z<re;Z++){const _e=he.current[Z];t.putImageData(_e,0,0);try{const Se=await new Promise((ge,we)=>{const lt=setTimeout(()=>{console.warn(`â±ï¸ Frame ${Z} timeout after ${B}ms`),we(new Error("Timeout"))},B);x.onResults(Ue=>{clearTimeout(lt),(Z<3||Z%50===0)&&console.log(`ğŸ“Š Frame ${Z} result:`,Ue.poseLandmarks?"Detected":"Not detected"),ge(Ue)}),F(),x.send({image:b}).catch(Ue=>{console.error(`âŒ Frame ${Z} send error:`,Ue),we(Ue)})});Se.poseLandmarks?(I.push({landmarks:Se.poseLandmarks.map(ge=>({x:ge.x,y:ge.y,z:ge.z,visibility:ge.visibility??0}))}),Z<5&&console.log(`âœ… Frame ${Z}: Pose detected`)):(I.push(null),Z<5&&console.warn(`âŒ Frame ${Z}: No pose landmarks`))}catch(Se){Se.message==="Timeout"?console.warn(`â±ï¸ Frame ${Z} timed out`):console.error(`âŒ Frame ${Z} error:`,Se.message),I.push(null)}if((Z+1)%w===0){await new Promise(ge=>setTimeout(ge,y?100:10));const Se=Math.round((Z+1)/re*100);if(ln(Se),de(`å§¿å‹¢æ¨å®šä¸­... ${Z+1}/${re} ãƒ•ãƒ¬ãƒ¼ãƒ  (${Se}%)`),(i=window.performance)!=null&&i.memory){const ge=window.performance.memory,we=Math.round(ge.usedJSHeapSize/1024/1024),lt=Math.round(ge.jsHeapSizeLimit/1024/1024);console.log(`ğŸ“Š Memory: ${we}MB / ${lt}MB (${Math.round(we/lt*100)}%)`),we/lt>.8&&(console.warn("âš ï¸ High memory usage detected!"),await new Promise(Ue=>setTimeout(Ue,500)))}}else{const Se=Math.round((Z+1)/re*100);ln(Se),de(`å§¿å‹¢æ¨å®šä¸­... ${Z+1}/${re} ãƒ•ãƒ¬ãƒ¼ãƒ `)}}K.width=0,K.height=0,b.width=0,b.height=0;try{x.close(),console.log("ğŸ§¹ MediaPipe Pose instance closed successfully")}catch(Z){console.warn("âš ï¸ Failed to close Pose instance:",Z)}await new Promise(Z=>setTimeout(Z,200)),console.log("ğŸ”§ æ¬ æãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è£œé–“ä¸­..."),de("ğŸ”§ æ¬ æãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è£œé–“ä¸­..."),ln(100),await new Promise(Z=>setTimeout(Z,100));const q=Js(I);sn(q);const X=I.filter(Z=>Z!==null&&Z.landmarks).length,U=(X/I.length*100).toFixed(1),O=q.filter(Z=>Z!==null&&Z.landmarks).length,ne=O/q.length*100,fe=ne.toFixed(1);if(console.log(`ğŸ“Š Pose estimation complete: ${X}/${I.length} frames (${U}%)`),console.log(`âœ¨ After interpolation: ${O}/${q.length} frames (${fe}%)`),X===0){de("âŒ å§¿å‹¢æ¨å®šãŒå®Œå…¨ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å‹•ç”»ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚"),alert(`å§¿å‹¢æ¨å®šãŒå¤±æ•—ã—ã¾ã—ãŸã€‚

ã€æ¨å¥¨äº‹é …ã€‘
ãƒ»äººç‰©ãŒç”»é¢ã®ä¸­å¤®ã«å¤§ããæ˜ ã£ã¦ã„ã‚‹å‹•ç”»ã‚’ä½¿ç”¨
ãƒ»ç…§æ˜ãŒæ˜ã‚‹ãã€äººç‰©ãŒã¯ã£ãã‚Šè¦‹ãˆã‚‹å‹•ç”»ã‚’ä½¿ç”¨
ãƒ»èƒŒæ™¯ãŒã‚·ãƒ³ãƒ—ãƒ«ãªå‹•ç”»ã‚’ä½¿ç”¨
ãƒ»ã‚«ãƒ¡ãƒ©ãŒå›ºå®šã•ã‚Œã¦ã„ã‚‹ï¼ˆæ‰‹ãƒ–ãƒ¬ãŒå°‘ãªã„ï¼‰å‹•ç”»ã‚’ä½¿ç”¨
ãƒ»å‹•ç”»ã®é•·ã•ã‚’5-10ç§’ç¨‹åº¦ã«åˆ¶é™

ã“ã‚Œã‚‰ã®æ¡ä»¶ã‚’æº€ãŸã™å‹•ç”»ã§å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚`);return}else if(ne<50){if(de(`âš ï¸ å§¿å‹¢æ¨å®šå®Œäº†ï¼ˆæˆåŠŸç‡: ${fe}%ã€è£œé–“å‰: ${U}%ï¼‰- ç²¾åº¦ãŒä½ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™`),!confirm(`âš ï¸ å§¿å‹¢æ¨å®šã®æˆåŠŸç‡ãŒä½ã„ã§ã™ï¼ˆ${fe}%ï¼‰ã€‚

ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ

â€» æˆåŠŸç‡ãŒä½ã„ã¨ã€è§£æç²¾åº¦ãŒå¤§å¹…ã«ä½ä¸‹ã—ã¾ã™ã€‚

ã€å‹•ç”»å“è³ªã®æ¨å¥¨æ¡ä»¶ã€‘
âœ… äººç‰©ãŒç”»é¢ã®50%ä»¥ä¸Šã‚’å ã‚ã¦ã„ã‚‹
âœ… ç…§æ˜ãŒååˆ†æ˜ã‚‹ã„ï¼ˆæ—¥ä¸­ã®å±‹å¤–ãªã©ï¼‰
âœ… èƒŒæ™¯ãŒã‚·ãƒ³ãƒ—ãƒ«ï¼ˆãƒˆãƒ©ãƒƒã‚¯ã‚„é‹å‹•å ´ãªã©ï¼‰
âœ… ã‚«ãƒ¡ãƒ©ãŒå®Œå…¨ã«å›ºå®šã•ã‚Œã¦ã„ã‚‹
âœ… è§£åƒåº¦ãŒHDï¼ˆ1280x720ï¼‰ä»¥ä¸Š
âœ… ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆãŒ30fpsä»¥ä¸Š

âŒ äººç‰©ãŒå°ã•ã„å‹•ç”»ã¯æ¤œå‡ºç‡ãŒæ¥µç«¯ã«ä½ä¸‹ã—ã¾ã™`))return}else de(`âœ… å§¿å‹¢æ¨å®šå®Œäº†ï¼ï¼ˆæˆåŠŸç‡: ${fe}%ã€è£œé–“å‰: ${U}%ï¼‰`);/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)&&console.log(`ğŸ“± Mobile device detected â†’ keeping all ${he.current.length} frames for accurate overlay`),setTimeout(()=>{r(5)},1e3)}catch(c){console.error("Pose estimation error:",c),de("âŒ å§¿å‹¢æ¨å®šã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: "+c.message);try{he.current.length>50&&(console.log("ğŸ§¹ Error recovery: Clearing frame data..."),he.current.length=0)}catch(o){console.warn("âš ï¸ Failed to cleanup frames:",o)}}finally{Cn(!1),await new Promise(c=>setTimeout(c,100))}},Gs=(i,c,o,x)=>{const y=/iPad/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,m=y?.01:.05;if(!(()=>{const K=c[11],G=c[12],t=c[23],s=c[24];if(K.visibility<m||G.visibility<m||t.visibility<m||s.visibility<m)return!1;const g=(K.y+G.y)/2,b=(t.y+s.y)/2;return!(g>=b)})())return;i.strokeStyle="#0ea5e9",i.lineWidth=4,[[11,12],[11,13],[13,15],[12,14],[14,16],[11,23],[12,24],[23,24],[23,25],[25,27],[27,31],[24,26],[26,28],[28,32]].forEach(([K,G])=>{const t=c[K],s=c[G];if(t&&s&&t.visibility>m&&s.visibility>m){const g=(s.x-t.x)*o,b=(s.y-t.y)*x;if(Math.sqrt(g*g+b*b)>o*.5)return;const F=t.x*o,w=t.y*x,B=s.x*o,q=s.y*x;i.beginPath(),i.moveTo(F,w),i.lineTo(B,q),i.stroke()}}),i.fillStyle="#f97316",c.forEach((K,G)=>{if(K.visibility>m){const t=K.x*o,s=K.y*x;i.beginPath(),i.arc(t,s,4,0,2*Math.PI),i.fill(),y&&Math.random()<.01&&(G===0||G===11||G===23)&&console.log(`ğŸ¯ Point ${G}: x=${(K.x*100).toFixed(1)}%, y=${(K.y*100).toFixed(1)}%, vis=${K.visibility.toFixed(2)}`)}});const T=c[23],S=c[24],k=c[25],P=c[26],I=c[31],re=c[32];if(T.visibility>m&&S.visibility>m){const K=(T.x+S.x)/2*o,G=(T.y+S.y)/2*x,t=50,s=Math.sqrt(Math.pow(k.x-T.x,2)+Math.pow(k.y-T.y,2)),g=Math.sqrt(Math.pow(P.x-S.x,2)+Math.pow(P.y-S.y,2)),b=(s+g)/2;if(i.strokeStyle="#dc2626",i.lineWidth=3,i.setLineDash([8,4]),i.beginPath(),i.moveTo(K,G),i.lineTo(K,x),i.stroke(),i.setLineDash([]),i.fillStyle="#dc2626",i.beginPath(),i.arc(K,G,8,0,2*Math.PI),i.fill(),i.fillStyle="#dc2626",i.font="bold 14px sans-serif",i.textAlign="left",i.fillText("å¤§è»¢å­",K+12,G-5),I.visibility>m){const u=I.x*o,F=I.y*x,w=I.x-(T.x+S.x)/2,B=b>0?-w/b*t:0;i.strokeStyle="#22c55e",i.lineWidth=3,i.beginPath(),i.moveTo(K,F),i.lineTo(u,F),i.stroke(),i.fillStyle="#22c55e",i.beginPath(),i.arc(u,F,6,0,2*Math.PI),i.fill();const q=B<0?`L: ${Math.abs(B).toFixed(1)}cmå‰`:`L: ${B.toFixed(1)}cmå¾Œ`;i.font="bold 14px sans-serif";const X=i.measureText(q).width,z=(K+u)/2-X/2,U=F-8;i.fillStyle="rgba(255, 255, 255, 0.85)",i.fillRect(z-4,U-14,X+8,18),i.fillStyle="#16a34a",i.textAlign="left",i.fillText(q,z,U)}if(re.visibility>m){const u=re.x*o,F=re.y*x,w=re.x-(T.x+S.x)/2,B=b>0?-w/b*t:0;i.strokeStyle="#3b82f6",i.lineWidth=3,i.beginPath(),i.moveTo(K,F),i.lineTo(u,F),i.stroke(),i.fillStyle="#3b82f6",i.beginPath(),i.arc(u,F,6,0,2*Math.PI),i.fill();const q=B<0?`R: ${Math.abs(B).toFixed(1)}cmå‰`:`R: ${B.toFixed(1)}cmå¾Œ`;i.font="bold 14px sans-serif";const X=i.measureText(q).width,z=(K+u)/2-X/2,U=F-8;i.fillStyle="rgba(255, 255, 255, 0.85)",i.fillRect(z-4,U-14,X+8,18),i.fillStyle="#2563eb",i.textAlign="left",i.fillText(q,z,U)}}},Zs=()=>{var y,m,M,H,T,S,k,P,I,re,K,G,t,s,g;if(!te.length){alert("å§¿å‹¢æ¨å®šã‚’å…ˆã«å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚");return}let i=`Frame,Trunk_Angle,Left_HipAnkle,Right_HipAnkle,Left_Thigh_deg,Right_Thigh_deg,Left_Shank_deg,Right_Shank_deg,Left_Knee,Right_Knee,Left_Ankle,Right_Ankle,Left_Elbow,Right_Elbow,Left_Toe_Distance_cm,Right_Toe_Distance_cm
# å¤§è…¿è§’åº¦(Thigh)ã¨ä¸‹è…¿è§’åº¦(Shank)ã¯é‰›ç›´ä¸‹å‘ãã‚’0Â°ã€å‰æ–¹ãŒãƒã‚¤ãƒŠã‚¹ã€å¾Œæ–¹ãŒãƒ—ãƒ©ã‚¹
# è¶³å…ˆè·é›¢(Toe_Distance)ã¯å¤§è»¢å­ã‹ã‚‰é‰›ç›´ä¸‹æ–¹å‘ã‚’0cmã€å‰æ–¹ãŒãƒã‚¤ãƒŠã‚¹ã€å¾Œæ–¹ãŒãƒ—ãƒ©ã‚¹
`;for(let b=0;b<te.length;b++){const u=te[b];if(!(u!=null&&u.landmarks)){i+=`${b},,,,,,,,,,,,,,,
`;continue}const F=Ut(u.landmarks);i+=`${b},${((y=F.trunkAngle)==null?void 0:y.toFixed(2))??""},${((m=F.hipAnkleAngle.left)==null?void 0:m.toFixed(2))??""},${((M=F.hipAnkleAngle.right)==null?void 0:M.toFixed(2))??""},${((H=F.thighAngle.left)==null?void 0:H.toFixed(2))??""},${((T=F.thighAngle.right)==null?void 0:T.toFixed(2))??""},${((S=F.shankAngle.left)==null?void 0:S.toFixed(2))??""},${((k=F.shankAngle.right)==null?void 0:k.toFixed(2))??""},${((P=F.kneeFlex.left)==null?void 0:P.toFixed(2))??""},${((I=F.kneeFlex.right)==null?void 0:I.toFixed(2))??""},${((re=F.ankleFlex.left)==null?void 0:re.toFixed(2))??""},${((K=F.ankleFlex.right)==null?void 0:K.toFixed(2))??""},${((G=F.elbowAngle.left)==null?void 0:G.toFixed(2))??""},${((t=F.elbowAngle.right)==null?void 0:t.toFixed(2))??""},${((s=F.toeHorizontalDistance.left)==null?void 0:s.toFixed(2))??""},${((g=F.toeHorizontalDistance.right)==null?void 0:g.toFixed(2))??""}
`}const c=new Blob([i],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(c),x=document.createElement("a");x.href=o,x.download=`angles_${Date.now()}.csv`,x.click(),URL.revokeObjectURL(o)},[Qs,xs]=h.useState(!1),[us,Ln]=h.useState(null),ei=async()=>{var m,M,H,T,S,k;Ln(null);const i=(ee==null?void 0:ee.name)??"(åç§°ãªã—)",c=Oe,o=gt.count>0?gt.count:null,x=Dt,y=jn;try{xs(!0);const P=(ae==null?void 0:ae.avgStride)??null,I=(ae==null?void 0:ae.avgStepPitch)??null,re=(ae==null?void 0:ae.avgContact)??null,K=(ae==null?void 0:ae.avgFlight)??null,G=Ks===1?"dash":"accel",t=G==="dash"?"acceleration":"topSpeed",s={avgContact:(ae==null?void 0:ae.avgContact)??0,avgFlight:(ae==null?void 0:ae.avgFlight)??0,avgStepPitch:(ae==null?void 0:ae.avgStepPitch)??0,avgStride:(ae==null?void 0:ae.avgStride)??0,avgSpeed:(ae==null?void 0:ae.avgSpeedMps)??0},g=ws(We??[],_t??[],s,t,{heightCm:_==null?void 0:_.height_cm,gender:_==null?void 0:_.gender},G);let b=null;if(_!=null&&_.target_record){const z=parseFloat(_.target_record);!isNaN(z)&&z>0&&(b=vs(z,t))}const u={athleteInfo:_,analysisType:t,runMode:G,stepMetrics:We,stepSummary:ae,threePhaseAngles:_t,distance:Oe,sectionTime:Dt,avgSpeed:jn,sectionRange:gt,usedTargetFps:ze,framesCount:j,aiEvaluation:g,targetAdvice:b,timestamp:new Date().toISOString(),version:"1.0"},F={has_ai_evaluation:!!g,has_target_advice:!!b,analysis_type:t,athlete_name:(_==null?void 0:_.name)||null,run_type:G},w={source_video_name:i,distance_m:c,section_time_s:x,avg_speed_mps:y,target_fps:ze,label:Mn||null,notes:Rn||null};j&&(w.frames_count=j),j&&(w.frame_count=j),gt.start!==null&&(w.section_start_frame=gt.start),gt.end!==null&&(w.section_end_frame=gt.end),o&&(w.section_frame_count=o),P&&(w.avg_stride_m=P),I&&(w.avg_cadence_hz=I),re&&(w.avg_contact_time_s=re),K&&(w.avg_flight_time_s=K),(m=De.current)!=null&&m.duration&&(w.source_video_duration_s=De.current.duration),w.video_filename=i,w.section_start_type="manual",w.section_end_type="manual",w.session_data=u,w.metadata=F;let B=null,q=null;try{const z=await ve.from("running_analysis_sessions").insert(w).select().single();B=z.data,q=z.error}catch(z){if((M=z==null?void 0:z.message)!=null&&M.includes("column")){console.warn("ä¸€éƒ¨ã®ã‚«ãƒ©ãƒ ãŒå­˜åœ¨ã—ã¾ã›ã‚“ã€‚åŸºæœ¬ãƒ‡ãƒ¼ã‚¿ã®ã¿ä¿å­˜ã—ã¾ã™ã€‚");const U={source_video_name:i,distance_m:c,section_time_s:x,avg_speed_mps:y,label:Mn||null,notes:Rn||null,session_data:u,metadata:F},O=await ve.from("running_analysis_sessions").insert(U).select().single();B=O.data,q=O.error}else throw z}if(q)throw q;const X=B.id;if(We&&We.length>0)try{const z=We.map((O,ne)=>({session_id:X,step_index:ne,contact_frame:O.contactFrame,toe_off_frame:O.toeOffFrame,next_contact_frame:O.nextContactFrame,contact_time:O.contactTime,flight_time:O.flightTime,step_time:O.stepTime,stride_length:O.stride,speed:O.speedMps})),{error:U}=await ve.from("step_metrics").insert(z);U&&console.warn("ã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ä¿å­˜ã«å¤±æ•—ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„å¯èƒ½æ€§ï¼‰:",U)}catch(z){console.warn("ã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ä¿å­˜ã‚’ã‚¹ã‚­ãƒƒãƒ—:",z)}if(_t&&_t.length>0)try{const z={initial:"contact",mid:"mid_support",late:"toe_off"},U=fe=>{const Me=fe.filter(Z=>typeof Z=="number"&&Number.isFinite(Z));return Me.length?Me.reduce((Z,_e)=>Z+_e,0)/Me.length:null},O=fe=>typeof fe=="number"&&Number.isFinite(fe)?fe:null,ne=_t.map((fe,Me)=>{const{stepIndex:Z,phase:_e,frame:Se,angles:ge}=fe,we=typeof Z=="number"&&Number.isFinite(Z)?Z:Math.floor(Me/3);return{session_id:X,step_index:we,phase:z[_e]??_e,frame_number:typeof Se=="number"?Se:null,trunk_angle:O(ge.trunkAngle),hip_angle:O(U([ge.hipAnkleAngle.left,ge.hipAnkleAngle.right])),knee_angle:O(U([ge.kneeFlex.left,ge.kneeFlex.right])),ankle_angle:O(U([ge.ankleFlex.left,ge.ankleFlex.right])),shoulder_angle:null,elbow_angle:O(U([ge.elbowAngle.left,ge.elbowAngle.right]))}}).filter(fe=>fe.phase&&typeof fe.step_index=="number");if(ne.length>0){await ve.from("three_phase_angles").delete().eq("session_id",X);const{error:fe}=await ve.from("three_phase_angles").insert(ne);fe&&console.warn("3å±€é¢è§’åº¦ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„å¯èƒ½æ€§ï¼‰:",fe)}}catch(z){console.warn("3å±€é¢è§’åº¦ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã‚’ã‚¹ã‚­ãƒƒãƒ—:",z)}if(ae)try{const z={session_id:X,avg_stride_length:ae.avgStride,avg_contact_time:ae.avgContact,avg_flight_time:ae.avgFlight,avg_speed:ae.avgSpeedMps,avg_cadence:I,total_steps:(We==null?void 0:We.length)||0},{error:U}=await ve.from("step_summaries").insert(z);U&&console.warn("ã‚¹ãƒ†ãƒƒãƒ—ã‚µãƒãƒªãƒ¼ã®ä¿å­˜ã«å¤±æ•—ï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„å¯èƒ½æ€§ï¼‰:",U)}catch(z){console.warn("ã‚¹ãƒ†ãƒƒãƒ—ã‚µãƒãƒªãƒ¼ã®ä¿å­˜ã‚’ã‚¹ã‚­ãƒƒãƒ—:",z)}Ln(`âœ… ä¿å­˜æˆåŠŸ: ã‚»ãƒƒã‚·ãƒ§ãƒ³ID=${X}
è©³ç´°ãƒ‡ãƒ¼ã‚¿ã¨AIã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚‚ä¿å­˜ã•ã‚Œã¾ã—ãŸã€‚`)}catch(P){console.error("ä¿å­˜ã‚¨ãƒ©ãƒ¼è©³ç´°:",P);let I="âŒ ä¿å­˜ã‚¨ãƒ©ãƒ¼: ";(H=P.message)!=null&&H.includes("column")?I+="ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹é€ ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ç®¡ç†è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚":(T=P.message)!=null&&T.includes("permission")||(S=P.message)!=null&&S.includes("policy")?I+="æ¨©é™ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³ã—ç›´ã—ã¦ãã ã•ã„ã€‚":(k=P.message)!=null&&k.includes("network")?I+="ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚":I+=P.message||"ä¸æ˜ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",Ln(I)}finally{xs(!1)}},ti=i=>{var o;const c=((o=i.target.files)==null?void 0:o[0])??null;if(v&&(URL.revokeObjectURL(v),be(null)),he.current=[],Ne(0),je(0),le(0),Ge(null),de(""),Kt(null),Yt(null),Jt(null),xn(0),un(0),fn(0),mn(null),bn(null),yn(null),Nn(null),ns(null),ss(null),Qe([]),it([]),Ht(0),Tn(null),An(null),sn([]),c&&c.type.startsWith("video/")){const x=URL.createObjectURL(c);ye(c),be(x),De.current&&(De.current.src=x,De.current.load())}else ye(null),c&&alert("mp4 ãªã©ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚")},ni=async()=>{if(console.log("ğŸ¬ === Frame Extraction Started ==="),!ee){alert("å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"),r(1);return}let i=0;const c=5;for(;(!De.current||!wt.current)&&i<c;)console.log(`Waiting for DOM elements... retry ${i+1}`),await new Promise(z=>setTimeout(z,200)),i++;if(!De.current||!wt.current){alert("ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚"),r(1);return}const o=De.current,x=wt.current,y=x.getContext("2d",{willReadFrequently:!0});if(!y){alert("ã‚­ãƒ£ãƒ³ãƒã‚¹ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");return}A(!0),le(0),de("å‹•ç”»æƒ…å ±ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...");try{await new Promise((z,U)=>{const O=()=>{o.removeEventListener("loadedmetadata",O),o.removeEventListener("error",ne),rt(o.videoWidth),kt(o.videoHeight),console.log(`ğŸ“¹ å‹•ç”»ã‚µã‚¤ã‚º: ${o.videoWidth} Ã— ${o.videoHeight}`),z()},ne=()=>{o.removeEventListener("loadedmetadata",O),o.removeEventListener("error",ne),U(new Error("å‹•ç”»ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚"))};if(o.addEventListener("loadedmetadata",O),o.addEventListener("error",ne),v)o.src=v;else{const fe=URL.createObjectURL(ee);be(fe),o.src=fe}})}catch(z){console.error(z),A(!1),de("âŒ å‹•ç”»ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚"),alert("å‹•ç”»ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"),r(1);return}if(!o.videoWidth||!o.videoHeight){A(!1),de("âŒ å‹•ç”»ã‚µã‚¤ã‚ºãŒå–å¾—ã§ãã¾ã›ã‚“ã€‚");return}const m=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),M=/iPhone|iPad|iPod/i.test(navigator.userAgent),H=o.videoWidth*o.videoHeight*o.duration*24/(1024*1024);console.log(`ğŸ“¹ Video info: ${o.videoWidth}x${o.videoHeight}, duration: ${o.duration.toFixed(2)}s, estimated size: ${H.toFixed(1)}MB`),console.log(`ğŸ“± Device: ${m?"Mobile":"Desktop"}, iOS: ${M}`);const T=o.duration;let S,k,P;M?(S=300,k=640,P=d,console.log(`ğŸ“± iOS detected: ${d}fps mode (640px, max 300 frames - memory optimized)`)):m?(S=400,k=720,P=d,console.log(`ğŸ“± Mobile detected: ${d}fps mode (720px, max 400 frames - memory optimized)`)):(S=600,k=1280,P=d,console.log(`ğŸ’» Desktop detected: ${d}fps mode (1280px, max 600 frames)`));const I=P;let re=I;if(I<=120)re=I,console.log(`âœ… Auto-detected FPS: ${re}fps (no prompt for â‰¤120fps)`);else{const z=prompt(`é«˜ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆå‹•ç”»ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚

æ¤œå‡ºã•ã‚ŒãŸå€¤: ${I}fps
ä¸€èˆ¬çš„ãªå€¤: 30fps, 60fps, 120fps, 240fps

â€» æ­£ç¢ºãªFPSã‚’å…¥åŠ›ã™ã‚‹ã“ã¨ã§ã€è§£æç²¾åº¦ãŒå‘ä¸Šã—ã¾ã™ã€‚`,I.toString());if(z){const U=parseInt(z);!isNaN(U)&&U>0&&U<=240?(re=U,console.log(`âœ… User confirmed FPS: ${re}fps`)):console.warn(`âš ï¸ Invalid FPS input: ${z}, using default: ${I}fps`)}}const K=Math.floor(S/Math.max(T,.001)),G=Math.min(re,K);console.log(`ğŸ¬ Selected FPS: ${d}fps, Target FPS: ${G}fps (max for length: ${K}fps)`);const t=1/G,s=Math.max(1,Math.floor(T*G));Ge(G);const g=o.videoWidth>=3840||o.videoHeight>=2160,b=G>=240;let u=Math.min(1,k/o.videoWidth);if(g&&!m){const z=o.videoWidth*o.videoHeight*s*4/1048576,U=k*(o.videoHeight*k/o.videoWidth)*s*4/(1024*1024);console.log(`ğŸ“¹ 4K video detected: ${o.videoWidth}x${o.videoHeight}`),console.log(`ğŸ’¾ Full resolution would use: ${z.toFixed(0)}MB`),console.log(`ğŸ’¾ Scaled to ${k}px would use: ${U.toFixed(0)}MB`),confirm(`4Kå‹•ç”»ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸï¼ˆ${o.videoWidth}x${o.videoHeight}ï¼‰

ãƒ•ãƒ«è§£åƒåº¦ã§å‡¦ç†ã—ã¾ã™ã‹ï¼Ÿ

ã€ŒOKã€: ãƒ•ãƒ«è§£åƒåº¦ï¼ˆ${z.toFixed(0)}MBä½¿ç”¨ã€é«˜ç²¾åº¦ï¼‰
ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€: ${k}pxã«ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆ${U.toFixed(0)}MBä½¿ç”¨ã€æ¨å¥¨ï¼‰`)?(u=1,console.log("âœ… Processing at full 4K resolution")):console.log(`âœ… Scaling to ${k}px for performance`)}const F=Math.round(o.videoWidth*u),w=Math.round(o.videoHeight*u),B=F*w*s*4/(1024*1024);if(console.log(`ğŸ’¾ Estimated memory usage: ${B.toFixed(1)}MB for ${s} frames at ${F}x${w}`),console.log(`ğŸ“Š Video specs: ${G}fps, ${s} frames, ${T.toFixed(2)}s`),b&&B>500&&(console.warn(`âš ï¸ Very high FPS video (${G}fps) with large memory usage`),!confirm(`è¶…é«˜ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆå‹•ç”»ï¼ˆ${G}fpsï¼‰ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚
ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: ç´„${B.toFixed(0)}MB

å‡¦ç†ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ`))){A(!1),de("ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ");return}if(M&&B>200&&(console.warn("âš ï¸ High memory usage detected on iOS. May cause crash."),!confirm(`ã“ã®å‹•ç”»ã®å‡¦ç†ã«ã¯ç´„${B.toFixed(0)}MBã®ãƒ¡ãƒ¢ãƒªãŒå¿…è¦ã§ã™ã€‚
iPhoneã§ã¯å‡¦ç†ä¸­ã«ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ`))){A(!1),de("ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ");return}x.width=F,x.height=w,he.current=[],Ne(0),je(0),de(`ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡ºä¸­... é•·ã• ${T.toFixed(2)} ç§’, fps â‰’ ${G}`);let q=0;const X=()=>{if(q>=s){A(!1),le(100),Ne(he.current.length),je(0),de(`âœ… ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡ºå®Œäº†ï¼ˆ${he.current.length} ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰`),setTimeout(()=>{r(3.5)},1e3);return}const z=q*t,U=()=>{o.removeEventListener("seeked",U),requestAnimationFrame(()=>{try{y.drawImage(o,0,0,F,w);const ne=y.getImageData(0,0,F,w);he.current.push(ne);const fe=Math.round((q+1)/s*100);le(ot(fe,0,99)),de(`ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡ºä¸­... ${q+1}/${s} ãƒ•ãƒ¬ãƒ¼ãƒ `),q+=1,X()}catch(ne){console.error("âŒ Frame extraction error:",ne),A(!1),de(`âš ï¸ ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡ºä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸï¼ˆ${q}/${s}ãƒ•ãƒ¬ãƒ¼ãƒ ã¾ã§å‡¦ç†ï¼‰`),he.current.length>0?(Ne(he.current.length),je(0),alert(`ãƒ¡ãƒ¢ãƒªä¸è¶³ã®ãŸã‚ã€${q}ãƒ•ãƒ¬ãƒ¼ãƒ ã¾ã§ã§å‡¦ç†ã‚’ä¸­æ–­ã—ã¾ã—ãŸã€‚
æŠ½å‡ºæ¸ˆã¿ã®${he.current.length}ãƒ•ãƒ¬ãƒ¼ãƒ ã¯ä½¿ç”¨ã§ãã¾ã™ã€‚

ã‚ˆã‚ŠçŸ­ã„å‹•ç”»ã‚„ä½è§£åƒåº¦ã®å‹•ç”»ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚`)):(alert(`ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡ºä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
ã‚ˆã‚ŠçŸ­ã„å‹•ç”»ã‚„ä½è§£åƒåº¦ã®å‹•ç”»ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚`),r(1))}})},O=()=>{o.removeEventListener("seeked",U),o.removeEventListener("error",O),console.error("âŒ Video seek error at frame",q),A(!1),de(`âš ï¸ å‹•ç”»ã‚·ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ï¼ˆ${q}/${s}ãƒ•ãƒ¬ãƒ¼ãƒ ï¼‰`),he.current.length>0?(Ne(he.current.length),je(0),alert(`å‹•ç”»ã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
æŠ½å‡ºæ¸ˆã¿ã®${he.current.length}ãƒ•ãƒ¬ãƒ¼ãƒ ã¯ä½¿ç”¨ã§ãã¾ã™ã€‚`)):(alert(`å‹•ç”»ã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
åˆ¥ã®å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚`),r(1))};o.addEventListener("seeked",U),o.addEventListener("error",O),o.currentTime=ot(z,0,T)};X()},si=i=>{if(console.log(`ğŸ” calculateHipPosition called: frameIndex=${i}, poseResults.length=${te.length}`),i>=0){let y=0,m=0,M=0;for(let H=0;H<Math.min(te.length,100);H++){const T=te[H];T==null?m++:T.landmarks?y++:M++}console.log("ğŸ“Š PoseResults summary (first 100 frames):"),console.log(`  - Valid poses with landmarks: ${y}`),console.log(`  - Null/undefined poses: ${m}`),console.log(`  - Poses without landmarks: ${M}`)}if(te.length===0||i>=te.length||i<0)return console.log(`âš ï¸ calculateHipPosition: Invalid frame ${i} (poseResults.length=${te.length})`),null;const c=y=>{if(y<0||y>=te.length)return null;const m=te[y];if(y===i&&(console.log(`ğŸ” Detailed check for frame ${y}:`),console.log(`  - pose is null: ${m===null}`),console.log(`  - pose is undefined: ${m===void 0}`),console.log(`  - typeof pose: ${typeof m}`),m&&(console.log(`  - pose has landmarks: ${"landmarks"in m}`),console.log("  - landmarks value:",m.landmarks),m.landmarks&&(console.log(`  - landmarks.length: ${m.landmarks.length}`),console.log("  - landmarks[23] (leftHip):",m.landmarks[23]),console.log("  - landmarks[24] (rightHip):",m.landmarks[24])))),!(m!=null&&m.landmarks))return null;const M=m.landmarks[23],H=m.landmarks[24];return!M||!H||M.visibility<.3||H.visibility<.3?(y===i&&console.log(`  - Hip visibility too low or missing: L=${M==null?void 0:M.visibility}, R=${H==null?void 0:H.visibility}`),null):(M.x+H.x)/2};let o=c(i);if(o!==null)return console.log(`âœ… calculateHipPosition: Frame ${i} â†’ hipX=${(o*100).toFixed(1)}%`),o;console.log(`âš ï¸ Frame ${i} has no valid hip data, searching nearby frames...`);const x=20;for(let y=1;y<=x;y++){const m=i-y;if(o=c(m),o!==null)return console.log(`âœ… calculateHipPosition: Using frame ${m} (offset: ${-y}) â†’ hipX=${(o*100).toFixed(1)}%`),o;const M=i+y;if(o=c(M),o!==null)return console.log(`âœ… calculateHipPosition: Using frame ${M} (offset: +${y}) â†’ hipX=${(o*100).toFixed(1)}%`),o}return console.log(`âŒ calculateHipPosition: No valid hip data found within Â±${x} frames of ${i}`),null},fs=(i,c,o,x,y)=>{[{frame:Ee,color:"#10b981",label:"ã‚¹ã‚¿ãƒ¼ãƒˆ",offset:Qn,savedHipX:Gt,savedPixelX:Os},{frame:mt,color:"#f59e0b",label:"ä¸­é–“",offset:es,savedHipX:Hs,savedPixelX:Us},{frame:Xe,color:"#ef4444",label:"ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥",offset:ts,savedHipX:Zt,savedPixelX:Vs}].forEach(({frame:M,color:H,label:T,offset:S,savedHipX:k,savedPixelX:P})=>{if(M==null||x!==M)return;let I,re=!1;if(Qt){const s=si(M);s!==null?(I=s*c,re=!0,console.log(`ğŸ¥ [${T}] Pan mode: Using current frame hip position: ${(s*100).toFixed(1)}% â†’ ${I.toFixed(0)}px`)):P!==null?(I=P,console.log(`ğŸ¥ [${T}] Pan mode: Using saved pixel position (no pose): ${I.toFixed(0)}px`)):(I=c/2,console.log(`ğŸ“ [${T}] Pan mode: No data, using center: ${I.toFixed(0)}px`))}else k!==null?(y?I=(k*c-y.srcX)/y.srcW*c:I=k*c,re=!0,console.log(`ğŸ“Œ [${T}] Fixed camera: Using saved hip position: ${(k*100).toFixed(1)}% â†’ ${I.toFixed(0)}px`)):(I=c/2,console.log(`ğŸ“ [${T}] No saved position, using center: ${I.toFixed(0)}px`));const K=I+S;console.log(`ğŸ“ [${T}] Frame ${M}: Final position: ${K.toFixed(0)} (base=${I.toFixed(0)} + offset=${S})`);const G=Math.max(20,Math.min(c-20,K));i.strokeStyle=H,i.lineWidth=8,i.setLineDash([15,8]),i.beginPath(),i.moveTo(G,o),i.lineTo(G,0),i.stroke(),i.setLineDash([]),i.fillStyle="rgba(255, 255, 255, 0.95)",i.font="bold 18px sans-serif";const t=i.measureText(T).width;i.fillRect(G-t/2-10,8,t+20,32),i.fillStyle=H,i.textAlign="center",i.fillText(T,G,30),re||(i.fillStyle="rgba(239, 68, 68, 0.8)",i.font="10px sans-serif",i.fillText("æ‰‹å‹•",G,45))})};h.useEffect(()=>{var k,P,I,re;const i=xe.current,c=he.current;if(!i||!c.length)return;const o=i.getContext("2d",{willReadFrequently:!0});if(!o)return;const x=ot(pe,0,c.length-1),y=c[x];if(!y||!y.width||!y.height){console.warn(`âš ï¸ ãƒ•ãƒ¬ãƒ¼ãƒ  ${x} ãŒå­˜åœ¨ã—ãªã„ã‹ç„¡åŠ¹ã§ã™`);return}const m=y.width,M=y.height,H=document.createElement("canvas");H.width=m,H.height=M;const T=H.getContext("2d");if(!T)return;if(T.putImageData(y,0,0),i.width=m,i.height=M,/iPad/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)i.style.width="",i.style.height="",i.style.maxWidth="100%",i.style.maxHeight="40vh",i.style.objectFit="contain";else{const K=((k=i.parentElement)==null?void 0:k.clientWidth)||window.innerWidth,G=window.innerHeight*.4,t=m/M,s=K/G;let g,b;t>s?(g=K,b=K/t):(b=G,g=G*t),i.style.width=`${g}px`,i.style.height=`${b}px`,i.style.maxWidth="100%",i.style.maxHeight="40vh"}if(!Pe)o.drawImage(H,0,0,m,M,0,0,m,M),pt&&((P=te[x])!=null&&P.landmarks)&&Gs(o,te[x].landmarks,m,M),fs(o,m,M,pe);else{let K=.75,G=.5;if((I=te[x])!=null&&I.landmarks){const u=te[x].landmarks,F=u[27],w=u[28],B=u[31],q=u[32];let X=0,z=0,U=0;if(F.visibility>.5&&(z+=F.x,U+=F.y,X++),w.visibility>.5&&(z+=w.x,U+=w.y,X++),X>0){G=z/X,K=U/X;let O=0,ne=0;if(B.visibility>.5&&(ne+=B.y,O++),q.visibility>.5&&(ne+=q.y,O++),O>0){const fe=ne/O;K=K*.7+fe*.3}}}const t=m/Ft,s=M/Ft;let g=G*m-t/2,b=K*M-s/2;if(g=ot(g,0,m-t),b=ot(b,0,M-s),o.drawImage(H,g,b,t,s,0,0,m,M),pt&&((re=te[x])!=null&&re.landmarks)){const u=te[x].landmarks;o.strokeStyle="#0ea5e9",o.lineWidth=5;const F=[[11,12],[11,13],[13,15],[12,14],[14,16],[11,23],[12,24],[23,24],[23,25],[25,27],[27,31],[24,26],[26,28],[28,32]],w=fe=>{const Me=fe.x*m,Z=fe.y*M,_e=Me-g,Se=Z-b,ge=_e/t*m,we=Se/s*M;return{x:ge,y:we}};F.forEach(([fe,Me])=>{const Z=u[fe],_e=u[Me];if(Z.visibility>.5&&_e.visibility>.5){const Se=w(Z),ge=w(_e);Se.x>=-10&&Se.x<=m+10&&Se.y>=-10&&Se.y<=M+10&&ge.x>=-10&&ge.x<=m+10&&ge.y>=-10&&ge.y<=M+10&&(o.beginPath(),o.moveTo(Se.x,Se.y),o.lineTo(ge.x,ge.y),o.stroke())}}),o.fillStyle="#f97316";const B=.15;u.forEach(fe=>{if(fe.visibility>B){const Me=w(fe);Me.x>=-10&&Me.x<=m+10&&Me.y>=-10&&Me.y<=M+10&&(o.beginPath(),o.arc(Me.x,Me.y,6,0,2*Math.PI),o.fill())}});const q=u[23],X=u[24],z=u[25],U=u[26],O=u[31],ne=u[32];if(q.visibility>B&&X.visibility>B){const Me=Math.sqrt(Math.pow(z.x-q.x,2)+Math.pow(z.y-q.y,2)),Z=Math.sqrt(Math.pow(U.x-X.x,2)+Math.pow(U.y-X.y,2)),_e=(Me+Z)/2,Se={x:(q.x+X.x)/2,y:(q.y+X.y)/2},ge=w(Se);if(o.strokeStyle="#dc2626",o.lineWidth=4,o.setLineDash([10,5]),o.beginPath(),o.moveTo(ge.x,ge.y),o.lineTo(ge.x,M),o.stroke(),o.setLineDash([]),o.fillStyle="#dc2626",o.beginPath(),o.arc(ge.x,ge.y,10,0,2*Math.PI),o.fill(),o.fillStyle="#dc2626",o.font="bold 16px sans-serif",o.textAlign="left",o.fillText("å¤§è»¢å­",ge.x+15,ge.y-5),O.visibility>B){const we=w(O),lt=O.x-Se.x,Ue=_e>0?-lt/_e*50:0;o.strokeStyle="#22c55e",o.lineWidth=4,o.beginPath(),o.moveTo(ge.x,we.y),o.lineTo(we.x,we.y),o.stroke(),o.fillStyle="#22c55e",o.beginPath(),o.arc(we.x,we.y,8,0,2*Math.PI),o.fill();const Ct=Ue<0?`L: ${Math.abs(Ue).toFixed(1)}cmå‰`:`L: ${Ue.toFixed(1)}cmå¾Œ`;o.font="bold 16px sans-serif";const Ot=o.measureText(Ct).width,an=(ge.x+we.x)/2-Ot/2,dn=we.y-10;o.fillStyle="rgba(255, 255, 255, 0.9)",o.fillRect(an-6,dn-16,Ot+12,22),o.fillStyle="#16a34a",o.textAlign="left",o.fillText(Ct,an,dn)}if(ne.visibility>B){const we=w(ne),lt=ne.x-Se.x,Ue=_e>0?-lt/_e*50:0;o.strokeStyle="#3b82f6",o.lineWidth=4,o.beginPath(),o.moveTo(ge.x,we.y),o.lineTo(we.x,we.y),o.stroke(),o.fillStyle="#3b82f6",o.beginPath(),o.arc(we.x,we.y,8,0,2*Math.PI),o.fill();const Ct=Ue<0?`R: ${Math.abs(Ue).toFixed(1)}cmå‰`:`R: ${Ue.toFixed(1)}cmå¾Œ`;o.font="bold 16px sans-serif";const Ot=o.measureText(Ct).width,an=(ge.x+we.x)/2-Ot/2,dn=we.y-10;o.fillStyle="rgba(255, 255, 255, 0.9)",o.fillRect(an-6,dn-16,Ot+12,22),o.fillStyle="#2563eb",o.textAlign="left",o.fillText(Ct,an,dn)}}}fs(o,m,M,pe,{srcX:g,srcW:t})}},[pe,j,Pe,Ft,pt,te,Ee,mt,Xe,Qn,es,ts,Be]);const Ae=j>0,Je=i=>{if(!Ae)return;const c=ot(pe+i,0,Math.max(0,he.current.length-1));je(c)},ms=i=>{if(!Ae)return;const c=Number(i.target.value)||0;je(c)},bs=Ae?pe+1:0,ys=Ae?j:0,En=h.useRef(null),dt=h.useRef(null),[kn,ii]=h.useState(["stride","stepPitch","speedMps"]),[Wn,js]=h.useState("line"),[Bn,Dn]=h.useState({contactTime:"bar",flightTime:"bar",stepPitch:"line",stride:"bar",speedMps:"line",brakeRatio:"bar",kickRatio:"bar"}),li=i=>{ii(c=>{if(c.includes(i)){const o=c.filter(x=>x!==i);return o.length?o:[i]}return[...c,i]})},oi=i=>{Dn(c=>({...c,[i]:c[i]==="line"?"bar":"line"}))};h.useEffect(()=>{const i=En.current;if(!i)return;const c=i.getContext("2d");if(!c)return;if(!We.length||!kn.length){dt.current&&(dt.current.destroy(),dt.current=null);return}dt.current&&(dt.current.destroy(),dt.current=null);const o=We.map(y=>`#${y.index}`),x=kn.map(y=>{const m=Oi[y],M=Bn[y],H=We.map(T=>{let S=null;return y==="brakeRatio"?S=T.brakeImpulseRatio!=null?T.brakeImpulseRatio*100:null:y==="kickRatio"?S=T.kickImpulseRatio!=null?T.kickImpulseRatio*100:null:S=T[y],S!=null?Number(S.toFixed(4)):null});return{label:On[y],data:H,type:M,borderColor:m,backgroundColor:M==="bar"?`${m}33`:m,borderWidth:2,tension:.25,pointRadius:M==="line"?3:0,pointHoverRadius:M==="line"?4:0}});return dt.current=new As(c,{type:"bar",data:{labels:o,datasets:x},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:350},scales:{x:{grid:{color:"rgba(148, 163, 184, 0.15)"},ticks:{color:"#6b7280",font:{size:11}}},y:{grid:{color:"rgba(148, 163, 184, 0.15)"},ticks:{color:"#6b7280",font:{size:11}}}},plugins:{legend:{labels:{color:"#374151",font:{size:11},boxWidth:14}},tooltip:{backgroundColor:"#0f172a",titleColor:"#e5e7eb",bodyColor:"#e5e7eb",padding:8}}}}),()=>{dt.current&&(dt.current.destroy(),dt.current=null)}},[We,kn,Wn,Bn]),h.useEffect(()=>{if(N===7&&We.length>0){const i=setTimeout(()=>{En.current&&dt.current&&dt.current.update()},100);return()=>clearTimeout(i)}},[N,We.length]);const $t=h.useMemo(()=>{const i=Ze==="dash"?"acceleration":"topSpeed";return ws(We,_t,{avgContact:ae.avgContact??0,avgFlight:ae.avgFlight??0,avgStepPitch:ae.avgStepPitch??0,avgStride:ae.avgStride??0,avgSpeed:ae.avgSpeedMps??0},i,{heightCm:_.height_cm,gender:_.gender},Ze)},[We,_t,ae,_.height_cm,_.gender,Ze]),ri=(i,c,o)=>{const x={"9.50":[{pitch:4.66,stride:2.65},{pitch:4.84,stride:2.54},{pitch:5.03,stride:2.45}],"9.60":[{pitch:4.66,stride:2.62},{pitch:4.84,stride:2.52},{pitch:5.03,stride:2.42}],"9.70":[{pitch:4.66,stride:2.59},{pitch:4.84,stride:2.49},{pitch:5.03,stride:2.4}],"9.80":[{pitch:4.66,stride:2.56},{pitch:4.84,stride:2.46},{pitch:5.03,stride:2.37}],"9.90":[{pitch:4.66,stride:2.53},{pitch:4.84,stride:2.43},{pitch:5.03,stride:2.34}],"10.00":[{pitch:4.66,stride:2.5},{pitch:4.84,stride:2.4},{pitch:5.03,stride:2.32}],"10.10":[{pitch:4.66,stride:2.47},{pitch:4.84,stride:2.38},{pitch:5.03,stride:2.29}],"10.20":[{pitch:4.66,stride:2.44},{pitch:4.84,stride:2.35},{pitch:5.03,stride:2.26}],"10.30":[{pitch:4.66,stride:2.41},{pitch:4.84,stride:2.32},{pitch:5.03,stride:2.24}],"10.50":[{pitch:4.44,stride:2.36},{pitch:4.65,stride:2.26},{pitch:4.86,stride:2.18}],"10.60":[{pitch:4.44,stride:2.33},{pitch:4.65,stride:2.24},{pitch:4.86,stride:2.15}],"10.80":[{pitch:4.44,stride:2.27},{pitch:4.65,stride:2.18},{pitch:4.86,stride:2.1}],"11.00":[{pitch:4.44,stride:2.21},{pitch:4.65,stride:2.12},{pitch:4.86,stride:2.05}],"11.20":[{pitch:4.44,stride:2.15},{pitch:4.65,stride:2.07},{pitch:4.86,stride:1.99}],"11.50":[{pitch:4.44,stride:2.24},{pitch:4.65,stride:2.14},{pitch:4.86,stride:2.05}],"12.00":[{pitch:4.44,stride:1.92},{pitch:4.65,stride:1.84},{pitch:4.86,stride:1.78}]},y=i.toFixed(2);let m=x[y];if(!m){const k=Object.keys(x).map(P=>parseFloat(P)).sort((P,I)=>P-I).reduce((P,I)=>Math.abs(I-i)<Math.abs(P-i)?I:P);m=x[k.toFixed(2)]}const M=c/o;let H=1;M>2.4?H=0:M<2.2&&(H=2);const T=m[H];return{pitch:T.pitch,stride:T.stride,type:H===0?"ãƒ”ãƒƒãƒå‹":H===2?"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å‹":"å¹³å‡å‹"}},vs=(i,c="topSpeed")=>{if(!ae.avgSpeedMps||!ae.avgStride||!ae.avgStepPitch)return"ç¾åœ¨ã®èµ°è¡Œãƒ‡ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚ãƒãƒ¼ã‚«ãƒ¼ã‚’è¨­å®šã—ã¦è§£æã‚’å®Œäº†ã—ã¦ãã ã•ã„ã€‚";const o=ae.avgSpeedMps,x=ae.avgStride,y=ae.avgStepPitch,m=100/i,M=m-o,H=M/o*100,T=ri(i,y,x),S=T.pitch,k=T.stride,P=T.type,I=k-x,re=S-y,K=x/k,G=y/S;let t=`## ğŸ¯ 100m ${i}ç§’é”æˆã®ãŸã‚ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹

`;t+=`### ğŸ“Š ç¾çŠ¶åˆ†æ
`,t+=`- **ç¾åœ¨ã®å¹³å‡é€Ÿåº¦**: ${o.toFixed(2)} m/s
`,t+=`- **ç¾åœ¨ã®ãƒ”ãƒƒãƒ**: ${y.toFixed(2)} æ­©/ç§’
`,t+=`- **ç¾åœ¨ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰**: ${x.toFixed(2)} m
`,t+=`- **åˆ¤å®šã•ã‚ŒãŸä½“å‹**: ${P}

`,t+=`### ğŸ¯ ç›®æ¨™å€¤ï¼ˆã“ã‚Œã¾ã§ã®ç ”ç©¶å ±å‘Šã«åŸºã¥ãï¼‰
`,t+=`- **å¿…è¦ãªå¹³å‡é€Ÿåº¦**: ${m.toFixed(2)} m/s
`,t+=`- **æœ€é©ãªãƒ”ãƒƒãƒï¼ˆ${P}ï¼‰**: ${S.toFixed(2)} æ­©/ç§’
`,t+=`- **æœ€é©ãªã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ï¼ˆ${P}ï¼‰**: ${k.toFixed(2)} m

`,t+=`> ğŸ“š **ç§‘å­¦çš„æ ¹æ‹ **: ã“ã‚Œã¾ã§ã®ç ”ç©¶å ±å‘Šã«ã‚ˆã‚‹ã¨ã€Œèº«ä½“ã®å¤§ãã•ã€å››è‚¢ã®é•·ã•ãŒãƒ”ãƒƒãƒã«å¤§ããå½±éŸ¿ã—ã€ä½“å‹ã«ã‚ˆã£ã¦è‡³é©ãƒ”ãƒƒãƒãŒé¸æŠã•ã‚Œã€ãã®ã¨ãã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰é•·ã«ã‚ˆã£ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæ±ºã¾ã‚‹ã€

`,t+=`### ğŸ“ˆ æ”¹å–„ãŒå¿…è¦ãªé …ç›®
`,t+=`- **é€Ÿåº¦**: ${M>=0?"+":""}${M.toFixed(2)} m/s (${H>=0?"+":""}${H.toFixed(1)}%)
`,t+=`- **ãƒ”ãƒƒãƒ**: ${re>=0?"+":""}${re.toFixed(2)} æ­©/ç§’ (ç¾åœ¨ã¯æœ€é©å€¤ã®${(G*100).toFixed(1)}%)
`,t+=`- **ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰**: ${I>=0?"+":""}${I.toFixed(2)} m (ç¾åœ¨ã¯æœ€é©å€¤ã®${(K*100).toFixed(1)}%)

`,t+=`### ğŸ’¡ ä½“å‹åˆ¥ã®ç‰¹å¾´
`,P==="ãƒ”ãƒƒãƒå‹"?(t+=`ã‚ãªãŸã¯**ãƒ”ãƒƒãƒå‹**ã§ã™ã€‚ä»¥ä¸‹ã®ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ï¼š
`,t+=`- é«˜ã„ãƒ”ãƒƒãƒï¼ˆæ­©/ç§’ï¼‰ã§èµ°ã‚‹ã‚¿ã‚¤ãƒ—
`,t+=`- æ¥åœ°æ™‚é–“ãŒçŸ­ãã€ç´ æ—©ã„è¶³ã®å›è»¢ãŒå¾—æ„
`,t+=`- ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã¯ç›¸å¯¾çš„ã«çŸ­ã‚
`,t+=`- **å¼·åŒ–ãƒã‚¤ãƒ³ãƒˆ**: æ¥åœ°æ™‚é–“ã®çŸ­ç¸®ã€çˆ†ç™ºçš„ãªåœ°é¢ååŠ›ã®å‘ä¸Š

`):P==="ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å‹"?(t+=`ã‚ãªãŸã¯**ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å‹**ã§ã™ã€‚ä»¥ä¸‹ã®ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ï¼š
`,t+=`- å¤§ããªã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ï¼ˆæ­©å¹…ï¼‰ã§èµ°ã‚‹ã‚¿ã‚¤ãƒ—
`,t+=`- è‚¡é–¢ç¯€ã®å¯å‹•åŸŸãŒåºƒãã€æ»ç©ºæ™‚é–“ãŒé•·ã„
`,t+=`- ãƒ”ãƒƒãƒã¯ç›¸å¯¾çš„ã«ä½ã‚
`,t+=`- **å¼·åŒ–ãƒã‚¤ãƒ³ãƒˆ**: è‚¡é–¢ç¯€å‘¨è¾ºã®ç­‹åŠ›å¼·åŒ–ã€æŸ”è»Ÿæ€§å‘ä¸Š

`):(t+=`ã‚ãªãŸã¯**å¹³å‡å‹**ã§ã™ã€‚ä»¥ä¸‹ã®ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ï¼š
`,t+=`- ãƒ”ãƒƒãƒã¨ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚ŒãŸã‚¿ã‚¤ãƒ—
`,t+=`- ä¸¡æ–¹ã®è¦ç´ ã‚’å‡ç­‰ã«æ´»ç”¨ã§ãã‚‹
`,t+=`- æ±ç”¨æ€§ãŒé«˜ãã€æ§˜ã€…ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã«å¯¾å¿œå¯èƒ½
`,t+=`- **å¼·åŒ–ãƒã‚¤ãƒ³ãƒˆ**: ãƒ”ãƒƒãƒã¨ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®ä¸¡æ–¹ã‚’æ®µéšçš„ã«å‘ä¸Š

`),t+=`### ğŸ”¬ é€Ÿåº¦ã®æ–¹ç¨‹å¼
`,t+=`é€Ÿåº¦ = ãƒ”ãƒƒãƒ Ã— ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ ã®é–¢ä¿‚å¼ã‹ã‚‰ã€ç›®æ¨™é€Ÿåº¦é”æˆã«ã¯ä»¥ä¸‹ã®çµ„ã¿åˆã‚ã›ãŒå¿…è¦ã§ã™ï¼š
`,t+=`${m.toFixed(2)} m/s = ${S.toFixed(2)} æ­©/ç§’ Ã— ${k.toFixed(2)} m

`;const s=m/x,g=s-y,b=g/y*100,u=m/y,F=u-x,w=F/x*100,B=m/o,q=Math.sqrt(B),X=y*q,z=x*q,U=X-y,O=z-x,ne=U/y*100,fe=O/x*100;return t+=`---

`,t+=`## ğŸ“‹ ç›®æ¨™é”æˆã¸ã®3ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

`,t+=`### ğŸ”µ ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ1: ãƒ”ãƒƒãƒå‘ä¸Šï¼ˆç¾åœ¨ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ç¶­æŒï¼‰

`,t+=`**ç›®æ¨™å€¤**
`,t+=`- ç¾åœ¨ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰: ${x.toFixed(2)} mï¼ˆç¶­æŒï¼‰
`,t+=`- å¿…è¦ãªãƒ”ãƒƒãƒ: **${s.toFixed(2)} æ­©/ç§’**
`,t+=`- ãƒ”ãƒƒãƒå‘ä¸Šå¹…: +${g.toFixed(2)} æ­©/ç§’ï¼ˆ+${b.toFixed(1)}%ï¼‰

`,b<=15?t+=`âœ… **å®Ÿç¾å¯èƒ½æ€§: é«˜ã„** - çŸ­æœŸé–“ï¼ˆ4-8é€±é–“ï¼‰ã§é”æˆå¯èƒ½ãªç¯„å›²ã§ã™

`:b<=25?t+=`âš ï¸ **å®Ÿç¾å¯èƒ½æ€§: ä¸­ç¨‹åº¦** - ä¸­æœŸé–“ï¼ˆ8-16é€±é–“ï¼‰ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãŒå¿…è¦ã§ã™

`:t+=`âŒ **å®Ÿç¾å¯èƒ½æ€§: ä½ã„** - ãƒ”ãƒƒãƒã®ã¿ã§ã®é”æˆã¯å›°é›£ã§ã™ã€‚ä»–ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚æ¤œè¨ã—ã¦ãã ã•ã„

`,t+=`**ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ–¹æ³•**
`,t+=`1. **æ¥åœ°æ™‚é–“çŸ­ç¸®ãƒ‰ãƒªãƒ«**
`,t+=`   - ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ãƒ†ãƒƒãƒ—èµ° 20m Ã— 6æœ¬ï¼ˆãƒ¡ãƒˆãƒ­ãƒãƒ¼ãƒ  ${(s*60).toFixed(0)} BPMï¼‰
`,t+=`   - ç›®æ¨™æ¥åœ°æ™‚é–“: 0.08-0.10ç§’ï¼ˆç¾åœ¨ã‚ˆã‚Š10-20%çŸ­ç¸®ï¼‰
`,t+=`   - çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ã‚’æ„è­˜ï¼ˆé‰›ç›´æˆåˆ†ã®å¼·åŒ–ï¼‰

`,t+=`2. **è…•æŒ¯ã‚Šé«˜é€ŸåŒ–**
`,t+=`   - è…•æŒ¯ã‚Šå˜ç‹¬ç·´ç¿’ 30ç§’ Ã— 5ã‚»ãƒƒãƒˆï¼ˆ${(s*60).toFixed(0)} BPMï¼‰
`,t+=`   - è‚˜è§’åº¦90Â°ã‚’ç¶­æŒã€ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãªå‹•ã
`,t+=`   - è…•æŒ¯ã‚Šé€Ÿåº¦ãŒãƒ”ãƒƒãƒã‚’æ±ºå®šã™ã‚‹é‡è¦å› å­

`,t+=`3. **ãƒ—ãƒ©ã‚¤ã‚ªãƒ¡ãƒˆãƒªã‚¯ã‚¹**
`,t+=`   - ã‚¢ãƒ³ã‚¯ãƒ«ãƒ›ãƒƒãƒ— 20å› Ã— 4ã‚»ãƒƒãƒˆï¼ˆè¶³é¦–ã®åç™ºåŠ›å¼·åŒ–ï¼‰
`,t+=`   - ãƒã‚´ã‚¸ãƒ£ãƒ³ãƒ— 30ç§’ Ã— 3ã‚»ãƒƒãƒˆï¼ˆæ¥åœ°æ™‚é–“æœ€å°åŒ–ï¼‰
`,t+=`   - ä¸‹ã‚Šå‚ãƒ€ãƒƒã‚·ãƒ¥ 30m Ã— 4æœ¬ï¼ˆé‡åŠ›ã‚’åˆ©ç”¨ã—ãŸãƒ”ãƒƒãƒæ„Ÿè¦šï¼‰

`,t+=`### ğŸŸ¢ ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ2: ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å‘ä¸Šï¼ˆç¾åœ¨ã®ãƒ”ãƒƒãƒç¶­æŒï¼‰

`,t+=`**ç›®æ¨™å€¤**
`,t+=`- ç¾åœ¨ã®ãƒ”ãƒƒãƒ: ${y.toFixed(2)} æ­©/ç§’ï¼ˆç¶­æŒï¼‰
`,t+=`- å¿…è¦ãªã‚¹ãƒˆãƒ©ã‚¤ãƒ‰: **${u.toFixed(2)} m**
`,t+=`- ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å‘ä¸Šå¹…: +${F.toFixed(2)} mï¼ˆ+${w.toFixed(1)}%ï¼‰

`,w<=10?t+=`âœ… **å®Ÿç¾å¯èƒ½æ€§: é«˜ã„** - çŸ­æœŸé–“ï¼ˆ4-8é€±é–“ï¼‰ã§é”æˆå¯èƒ½ãªç¯„å›²ã§ã™

`:w<=20?t+=`âš ï¸ **å®Ÿç¾å¯èƒ½æ€§: ä¸­ç¨‹åº¦** - ä¸­æœŸé–“ï¼ˆ8-16é€±é–“ï¼‰ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãŒå¿…è¦ã§ã™

`:t+=`âŒ **å®Ÿç¾å¯èƒ½æ€§: ä½ã„** - ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®ã¿ã§ã®é”æˆã¯å›°é›£ã§ã™ã€‚ä»–ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚æ¤œè¨ã—ã¦ãã ã•ã„

`,t+=`**ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ–¹æ³•**
`,t+=`1. **è‚¡é–¢ç¯€å¯å‹•åŸŸæ‹¡å¤§**
`,t+=`   - å‹•çš„ã‚¹ãƒˆãƒ¬ãƒƒãƒï¼ˆãƒ¬ãƒƒã‚°ã‚¹ã‚¤ãƒ³ã‚°ï¼‰å„è„š20å› Ã— 3ã‚»ãƒƒãƒˆ
`,t+=`   - ãƒãƒ¼ãƒ‰ãƒ«ãƒ‰ãƒªãƒ« 30m Ã— 6æœ¬ï¼ˆã‚¹ãƒˆãƒ©ã‚¤ãƒ‰æ„Ÿè¦šï¼‰
`,t+=`   - ç›®æ¨™å¯å‹•åŸŸ: å‰å¾Œ70Â°ä»¥ä¸Š

`,t+=`2. **ä¸‹è‚¢ç­‹åŠ›å¼·åŒ–**
`,t+=`   - ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ 3ã‚»ãƒƒãƒˆ Ã— 6å›ï¼ˆä½“é‡ã®1.5-2å€ã®é‡é‡ï¼‰
`,t+=`   - ãƒ©ãƒ³ã‚¸ã‚¦ã‚©ãƒ¼ã‚¯ 20m Ã— 4æœ¬ï¼ˆè‚¡é–¢ç¯€ä¼¸å±•ã®å¼·åŒ–ï¼‰
`,t+=`   - ãƒ’ãƒƒãƒ—ã‚¹ãƒ©ã‚¹ãƒˆ 4ã‚»ãƒƒãƒˆ Ã— 8å›ï¼ˆè‡€ç­‹ã®å¼·åŒ–ï¼‰

`,t+=`3. **ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°**
`,t+=`   - ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚° 40m Ã— 5æœ¬ï¼ˆæ»ç©ºæ™‚é–“ã‚’æ„è­˜ï¼‰
`,t+=`   - 1æ­©ã‚ãŸã‚Š${u.toFixed(2)}mä»¥ä¸Šã‚’ç›®æ¨™
`,t+=`   - è‚¡é–¢ç¯€ä¼¸å±•ã¨è†ã®å¼•ãä¸Šã’ã‚’æ„è­˜

`,t+=`### ğŸŸ¡ ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ3: ãƒãƒ©ãƒ³ã‚¹å‘ä¸Šï¼ˆä¸¡æ–¹ã‚’æ”¹å–„ï¼‰ã€æ¨å¥¨ã€‘

`,t+=`**ç›®æ¨™å€¤**
`,t+=`- ç›®æ¨™ãƒ”ãƒƒãƒ: **${X.toFixed(2)} æ­©/ç§’**ï¼ˆ+${U.toFixed(2)}ã€+${ne.toFixed(1)}%ï¼‰
`,t+=`- ç›®æ¨™ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰: **${z.toFixed(2)} m**ï¼ˆ+${O.toFixed(2)}ã€+${fe.toFixed(1)}%ï¼‰
`,t+=`- æ¤œç®—: ${X.toFixed(2)} Ã— ${z.toFixed(2)} = ${(X*z).toFixed(2)} m/s â‰ˆ ${m.toFixed(2)} m/s âœ“

`,ne<=10&&fe<=10?t+=`âœ… **å®Ÿç¾å¯èƒ½æ€§: æœ€ã‚‚é«˜ã„** - ä¸¡æ–¹ã‚’å°‘ã—ãšã¤å‘ä¸Šã•ã›ã‚‹ã®ãŒæœ€ã‚‚ç¾å®Ÿçš„ã§ã™

`:ne<=15&&fe<=15?t+=`âœ… **å®Ÿç¾å¯èƒ½æ€§: é«˜ã„** - ãƒãƒ©ãƒ³ã‚¹ã‚ˆãå‘ä¸Šã•ã›ã‚‹ã“ã¨ã§é”æˆå¯èƒ½ã§ã™

`:t+=`âš ï¸ **å®Ÿç¾å¯èƒ½æ€§: ä¸­ç¨‹åº¦** - ä¸­é•·æœŸçš„ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨ˆç”»ãŒå¿…è¦ã§ã™

`,t+=`**é€±é–“ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒ³**

`,t+=`**Day 1: ãƒ”ãƒƒãƒå¼·åŒ–æ—¥**
`,t+=`- ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—: å‹•çš„ã‚¹ãƒˆãƒ¬ãƒƒãƒ 10åˆ†
`,t+=`- ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ãƒ†ãƒƒãƒ—èµ° 20m Ã— 6æœ¬ï¼ˆç›®æ¨™: ${X.toFixed(2)}æ­©/ç§’ï¼‰
`,t+=`- ã‚¢ãƒ³ã‚¯ãƒ«ãƒ›ãƒƒãƒ— 20å› Ã— 3ã‚»ãƒƒãƒˆ
`,t+=`- è…•æŒ¯ã‚Šç·´ç¿’ 30ç§’ Ã— 4ã‚»ãƒƒãƒˆï¼ˆ${(X*60).toFixed(0)} BPMï¼‰
`,t+=`- 30måŠ é€Ÿèµ° Ã— 4æœ¬ï¼ˆãƒ”ãƒƒãƒæ„è­˜ï¼‰

`,t+=`**Day 2: ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å¼·åŒ–æ—¥**
`,t+=`- ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—: å‹•çš„ã‚¹ãƒˆãƒ¬ãƒƒãƒ 10åˆ†
`,t+=`- ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚° 40m Ã— 5æœ¬ï¼ˆç›®æ¨™: ${z.toFixed(2)}m/æ­©ï¼‰
`,t+=`- ãƒãƒ¼ãƒ‰ãƒ«ãƒ‰ãƒªãƒ« 30m Ã— 4æœ¬
`,t+=`- ãƒ©ãƒ³ã‚¸ã‚¦ã‚©ãƒ¼ã‚¯ 20m Ã— 4æœ¬
`,t+=`- 50mèµ° Ã— 3æœ¬ï¼ˆã‚¹ãƒˆãƒ©ã‚¤ãƒ‰æ„è­˜ï¼‰

`,t+=`**Day 3: ç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°**
`,t+=`- ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ 4ã‚»ãƒƒãƒˆ Ã— 6å›ï¼ˆ85% 1RMï¼‰
`,t+=`- ãƒ’ãƒƒãƒ—ã‚¹ãƒ©ã‚¹ãƒˆ 4ã‚»ãƒƒãƒˆ Ã— 8å›
`,t+=`- ãƒ«ãƒ¼ãƒãƒ‹ã‚¢ãƒ³ãƒ‡ãƒƒãƒ‰ãƒªãƒ•ãƒˆ 3ã‚»ãƒƒãƒˆ Ã— 8å›
`,t+=`- ã‚«ãƒ¼ãƒ•ãƒ¬ã‚¤ã‚º 3ã‚»ãƒƒãƒˆ Ã— 15å›

`,t+=`**Day 4: çµ±åˆãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°**
`,t+=`- ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—: å‹•çš„ã‚¹ãƒˆãƒ¬ãƒƒãƒ 10åˆ†
`,t+=`- 60mèµ° Ã— 4æœ¬ï¼ˆç›®æ¨™é€Ÿåº¦: ${m.toFixed(2)}m/sï¼‰
`,t+=`  - ãƒ”ãƒƒãƒ ${X.toFixed(2)}æ­©/ç§’ + ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ ${z.toFixed(2)}m ã‚’åŒæ™‚æ„è­˜
`,t+=`- 80mèµ° Ã— 2æœ¬ï¼ˆ95%å¼·åº¦ï¼‰
`,t+=`- ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³: é™çš„ã‚¹ãƒˆãƒ¬ãƒƒãƒ 10åˆ†

`,t+=`**é€±é–“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä¾‹**
`,t+=`| æœˆ | ç« | æ°´ | æœ¨ | é‡‘ | åœŸ | æ—¥ |
`,t+=`|---|---|---|---|---|---|---|
`,t+=`| Day1 | Day3 | ä¼‘æ¯ | Day2 | Day3 | Day4 | ä¼‘æ¯ |

`,c==="acceleration"?(t+=`## ğŸš€ ã‚¹ã‚¿ãƒ¼ãƒˆèƒ½åŠ›å‘ä¸Šã®ãŸã‚ã®å°‚é–€ã‚¢ãƒ‰ãƒã‚¤ã‚¹

`,t+=`ã‚¹ã‚¿ãƒ¼ãƒˆã‹ã‚‰ã®åŠ é€Ÿå±€é¢ï¼ˆ0-30mï¼‰ã«ç‰¹åŒ–ã—ãŸæŠ€è¡“ã¨ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æä¾›ã—ã¾ã™ã€‚

`,t+=`### ğŸ¯ ã‚¹ã‚¿ãƒ¼ãƒˆæŠ€è¡“ã®ç§‘å­¦çš„åŸç†

`,t+=`#### 1ï¸âƒ£ ãƒ–ãƒ­ãƒƒã‚¯ã‚¯ãƒªã‚¢ãƒ©ãƒ³ã‚¹å¾Œã®å§¿å‹¢ï¼ˆæœ€åˆã®2-3æ­©ï¼‰
`,t+=`**ç›®æ¨™ä½“å¹¹è§’åº¦**: 42-48Â°ã®å¼·ã„å‰å‚¾
`,t+=`- ãƒ–ãƒ­ãƒƒã‚¯é›¢è„šå¾Œã€ä½“å¹¹ã‚’ä¸€ç›´ç·šã«ä¿ã£ãŸã¾ã¾å‰æ–¹ã¸å€’ã‚Œè¾¼ã‚€
`,t+=`- é ­éƒ¨ã‹ã‚‰è¶³é¦–ã¾ã§ä¸€ç›´ç·šã®ãƒ©ã‚¤ãƒ³ï¼ˆã€Œä½“å¹¹ã®å‰›æ€§ã€ã‚’ä¿ã¤ï¼‰
`,t+=`- é‡å¿ƒã‚’å‰æ–¹ã«ä½ç½®ã•ã›ã€èº«ä½“ã®é‡ã•ã‚’åˆ©ç”¨ã—ãŸæ¨é€²åŠ›ã‚’ç”Ÿã‚€

`,t+=`**è†è§’åº¦ã®å›ºå®š**: 150-160Â°ã‚’ç¶­æŒ
`,t+=`- æœ€åˆã®2-3æ­©ã¯è†ã‚’æ›²ã’ãªã„ï¼ˆè†é–¢ç¯€ã®å±ˆæ›²ãƒ»ä¼¸å±•ã‚’æŠ‘åˆ¶ï¼‰
`,t+=`- è†ã‚’å¼•ãä¸Šã’ã‚‹å‹•ä½œã¯æ°´å¹³åŠ é€Ÿã‚’å¦¨ã’ã‚‹
`,t+=`- è†ã‚’ä¼¸ã°ã—ãŸã¾ã¾ã€è‚¡é–¢ç¯€ä¼¸å±•ã®ã¿ã§ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’ç²å¾—

`,t+=`**è‚¡é–¢ç¯€ä¸»å°ã®ä¼¸å±•**: å¤§è‡€ç­‹ãƒ»ãƒãƒ ã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹ã®æ´»ç”¨
`,t+=`- æ¥åœ°ã¯èº«ä½“ã®å¾Œæ–¹ã§è¡Œã„ã€åœ°é¢ã‚’å¾Œã‚ã«æŠ¼ã™æ„è­˜
`,t+=`- è‚¡é–¢ç¯€ä¼¸å±•ã«ã‚ˆã‚Šã€å¼·åŠ›ãªæ°´å¹³æ¨é€²åŠ›ã‚’ç™ºæ®
`,t+=`- æ¥åœ°æ™‚é–“ã‚’æœ€å°é™ã«æŠ‘ãˆã€ç´ æ—©ãæ¬¡ã®ä¸€æ­©ã¸

`,t+=`#### 2ï¸âƒ£ åŠ›ã®ãƒ™ã‚¯ãƒˆãƒ«ã®å¤‰åŒ–ï¼ˆ1-12æ­©ï¼‰
`,t+=`**1ã€œ3æ­©ç›®**: å¾Œæ–¹ï¼†ä¸‹æ–¹å‘ã¸ã®åŠ›ç™ºæ®
`,t+=`- åœ°é¢ã‚’å¾Œã‚ã«æŠ¼ã™æ°´å¹³æˆåˆ†ãŒæœ€å¤§
`,t+=`- ä½“å¹¹è§’åº¦42-48Â°ã§æœ€å¤§æ¨é€²åŠ›
`,t+=`- ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã¯å¾ã€…ã«ä¼¸ã³ã¦ã„ãï¼ˆæ®µéšçš„ä¼¸é•·ï¼‰

`,t+=`**4ã€œ8æ­©ç›®**: æ°´å¹³æˆåˆ†ã‹ã‚‰é‰›ç›´æˆåˆ†ã¸ã®ç§»è¡Œ
`,t+=`- ã‚„ã‚„å¾Œã‚æ–¹å‘ã ãŒã€å¾ã€…ã«çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ã«ç§»è¡Œ
`,t+=`- ä½“å¹¹è§’åº¦ã¯å¾ã€…ã«èµ·ãä¸ŠãŒã‚‹ï¼ˆ48Â° â†’ 60Â° â†’ 75Â°ï¼‰
`,t+=`- ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã¯æœ€å¤§ã«é”ã—ã€ãƒ”ãƒƒãƒãŒä¸ŠãŒã‚Šå§‹ã‚ã‚‹

`,t+=`**9ã€œ12æ­©ç›®**: æœ€é«˜é€Ÿåº¦åŸŸã¸ã®ç§»è¡Œ
`,t+=`- ã»ã¼çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ï¼ˆé‰›ç›´æˆåˆ†ãŒä¸»ï¼‰
`,t+=`- ä½“å¹¹è§’åº¦ã¯80-85Â°ï¼ˆã»ã¼å‚ç›´ï¼‰
`,t+=`- åˆæœŸåŠ é€ŸãŒå®Œäº†ã—ã€æœ€é«˜é€Ÿåº¦ç¶­æŒãƒ•ã‚§ãƒ¼ã‚ºã¸

`,t+=`### ğŸ’ª ã‚¹ã‚¿ãƒ¼ãƒˆèƒ½åŠ›å‘ä¸Šã®ãŸã‚ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¡ãƒ‹ãƒ¥ãƒ¼

`,t+=`#### é€±é–“ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°æ§‹æˆï¼ˆé€±3-4å›æ¨å¥¨ï¼‰

`,t+=`**Day 1: ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥æŠ€è¡“ + çˆ†ç™ºåŠ›**
`,t+=`1. **ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆç·´ç¿’** (30åˆ†)
`,t+=`   - 10måŠ é€Ÿèµ° Ã— 8æœ¬ï¼ˆå®Œå…¨å›å¾©: å„3-4åˆ†ï¼‰
`,t+=`   - ãƒ•ã‚©ãƒ¼ã‚«ã‚¹: ä½“å¹¹42-48Â°ã€è†å›ºå®šã€è‚¡é–¢ç¯€ä¼¸å±•
`,t+=`   - ãƒ“ãƒ‡ã‚ªæ’®å½±ã§å§¿å‹¢ãƒã‚§ãƒƒã‚¯

`,t+=`2. **ã‚¹ãƒ¬ãƒƒãƒ‰ãƒ—ãƒƒã‚·ãƒ¥** (20åˆ†)
`,t+=`   - 20m Ã— 5æœ¬ï¼ˆé‡ã•: ä½“é‡ã®50-70%ï¼‰
`,t+=`   - ãƒ•ã‚©ãƒ¼ã‚«ã‚¹: æ°´å¹³æ¨é€²åŠ›ã€å‰å‚¾å§¿å‹¢ã®ç¶­æŒ

`,t+=`3. **ãƒ‘ãƒ¯ãƒ¼ã‚¯ãƒªãƒ¼ãƒ³** (20åˆ†)
`,t+=`   - 3ã‚»ãƒƒãƒˆ Ã— 3å›ï¼ˆä½“é‡ã®80-90%ã®é‡é‡ï¼‰
`,t+=`   - çˆ†ç™ºçš„ãªè‚¡é–¢ç¯€ä¼¸å±•å‹•ä½œã®ç¿’å¾—

`,t+=`**Day 2: è‡€ç­‹ãƒ»ãƒãƒ ã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹å¼·åŒ–**
`,t+=`1. **ãƒ’ãƒƒãƒ—ã‚¹ãƒ©ã‚¹ãƒˆ** (é‡ç‚¹ç¨®ç›®)
`,t+=`   - 5ã‚»ãƒƒãƒˆ Ã— 5å›ï¼ˆä½“é‡ã®1.5-2å€ã®é‡é‡ï¼‰
`,t+=`   - ã‚¹ã‚¿ãƒ¼ãƒˆã§æœ€ã‚‚é‡è¦ãªå¤§è‡€ç­‹ã®æœ€å¤§ç­‹åŠ›å¼·åŒ–

`,t+=`2. **ãƒãƒ«ãƒ‡ã‚£ãƒƒã‚¯ãƒãƒ ã‚¹ãƒˆãƒªãƒ³ã‚°ã‚«ãƒ¼ãƒ«**
`,t+=`   - 4ã‚»ãƒƒãƒˆ Ã— 6-8å›
`,t+=`   - ãƒãƒ ã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹ã®é›¢å¿ƒæ€§åç¸®å¼·åŒ–
`,t+=`   - æ€ªæˆ‘äºˆé˜²ã¨åŠ é€ŸåŠ›å‘ä¸Š

`,t+=`3. **ãƒ«ãƒ¼ãƒãƒ‹ã‚¢ãƒ³ãƒ‡ãƒƒãƒ‰ãƒªãƒ•ãƒˆ**
`,t+=`   - 4ã‚»ãƒƒãƒˆ Ã— 6å›ï¼ˆä½“é‡ã®1.2-1.5å€ã®é‡é‡ï¼‰
`,t+=`   - è‚¡é–¢ç¯€ä¼¸å±•ã®ä¸»åƒç­‹ç¾¤ã‚’ç·åˆçš„ã«å¼·åŒ–

`,t+=`4. **ã‚·ãƒ³ã‚°ãƒ«ãƒ¬ãƒƒã‚°RDL**
`,t+=`   - 3ã‚»ãƒƒãƒˆ Ã— 8å›ï¼ˆå·¦å³å„ï¼‰
`,t+=`   - ãƒãƒ©ãƒ³ã‚¹ã¨ç‰‡è„šã§ã®è‚¡é–¢ç¯€ä¼¸å±•åŠ›ã‚’å¼·åŒ–

`,t+=`**Day 3: ãƒ—ãƒ©ã‚¤ã‚ªãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ã‚¹ã‚¿ãƒ¼ãƒˆåå¾©**
`,t+=`1. **ãƒ‡ãƒ—ã‚¹ã‚¸ãƒ£ãƒ³ãƒ—** (é«˜ã•40-60cm)
`,t+=`   - 5ã‚»ãƒƒãƒˆ Ã— 3å›ï¼ˆå®Œå…¨å›å¾©ï¼‰
`,t+=`   - ä¼¸å¼µåå°„ã®å¼·åŒ–ã€çˆ†ç™ºçš„ãªåŠ›ç™ºæ®

`,t+=`2. **ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°** (ä½ãé•·ã)
`,t+=`   - 30m Ã— 6æœ¬ï¼ˆæ°´å¹³æ–¹å‘é‡è¦–ï¼‰
`,t+=`   - ãƒ•ã‚©ãƒ¼ã‚«ã‚¹: æ¥åœ°ã¯èº«ä½“ã®å¾Œæ–¹ã€è†ã‚’ä¼¸ã°ã—ãŸã¾ã¾

`,t+=`3. **ãƒ’ãƒ«ã‚¹ãƒ—ãƒªãƒ³ãƒˆ** (å‚¾æ–œ5-10åº¦)
`,t+=`   - 20m Ã— 6æœ¬ï¼ˆå®Œå…¨å›å¾©ï¼‰
`,t+=`   - è‡ªç„¶ã«å‰å‚¾å§¿å‹¢ãŒå¼·åˆ¶ã•ã‚Œã€ã‚¹ã‚¿ãƒ¼ãƒˆå§¿å‹¢ã®ç¿’å¾—

`,t+=`4. **ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥åå¾©** (ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯é‡è¦–)
`,t+=`   - 15m Ã— 8æœ¬ï¼ˆ80-90%ã®åŠ›ã§ï¼‰
`,t+=`   - è†å›ºå®šãƒ»è‚¡é–¢ç¯€ä¼¸å±•ãƒ»ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰æ®µéšçš„ä¼¸é•·ã‚’æ„è­˜

`,t+=`**Day 4 (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ã‚¹ãƒ”ãƒ¼ãƒ‰æŒä¹…åŠ›**
`,t+=`1. **30måŠ é€Ÿèµ°**
`,t+=`   - 8æœ¬ï¼ˆ90-95%ã®åŠ›ï¼‰
`,t+=`   - å®Œå…¨å›å¾©ï¼ˆ5åˆ†ï¼‰

`,t+=`2. **50måŠ é€Ÿèµ°**
`,t+=`   - 5æœ¬ï¼ˆ85-90%ã®åŠ›ï¼‰
`,t+=`   - ã‚¹ã‚¿ãƒ¼ãƒˆã€œæœ€é«˜é€Ÿåº¦ã¾ã§ã®ä¸€é€£ã®å‹•ãã‚’åå¾©

`,t+=`### ğŸ¯ é‡ç‚¹å¼·åŒ–ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚ºã®è©³ç´°

`,t+=`#### ã‚¹ã‚¿ãƒ¼ãƒˆå§¿å‹¢ãƒ‰ãƒªãƒ«ï¼ˆæ¯å›ã®ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—ã§å®Ÿæ–½ï¼‰
`,t+=`1. **ã‚¦ã‚©ãƒ¼ãƒ«ãƒ‰ãƒªãƒ«**
`,t+=`   - å£ã«æ‰‹ã‚’ã¤ãã€ä½“å¹¹ã‚’42-45Â°ã«ä¿ã¤ç·´ç¿’
`,t+=`   - è†ã‚’æ›²ã’ãšã€è‚¡é–¢ç¯€ä¼¸å±•ã®ã¿ã§ç‰‡è„šã‚’å¾Œæ–¹ã¸ä¼¸ã°ã™
`,t+=`   - å·¦å³å„10å› Ã— 3ã‚»ãƒƒãƒˆ

`,t+=`2. **ãƒ•ã‚©ãƒ¼ãƒ«ã‚¹ã‚¿ãƒ¼ãƒˆ**
`,t+=`   - ç›´ç«‹ã‹ã‚‰å‰æ–¹ã«å€’ã‚Œè¾¼ã¿ã€è‡ªç„¶ã«èµ°ã‚Šå‡ºã™
`,t+=`   - æœ€åˆã®3æ­©ã§è†ã‚’å›ºå®šã—ã€è‚¡é–¢ç¯€ä¼¸å±•ã®ã¿ã‚’æ„è­˜
`,t+=`   - 5å› Ã— 3ã‚»ãƒƒãƒˆ

`,t+=`3. **ãƒã‚¦ãƒ³ãƒ†ãƒ³ã‚¯ãƒ©ã‚¤ãƒãƒ¼** (ã‚¹ãƒ­ãƒ¼ç‰ˆ)
`,t+=`   - ãƒ—ãƒ©ãƒ³ã‚¯å§¿å‹¢ã‹ã‚‰ã€ã‚¹ã‚¿ãƒ¼ãƒˆå‹•ä½œã‚’ã‚¹ãƒ­ãƒ¼ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ã§ç·´ç¿’
`,t+=`   - è†ã®ä½ç½®ã¨è‚¡é–¢ç¯€ã®å‹•ãã‚’ç¢ºèª
`,t+=`   - 30ç§’ Ã— 3ã‚»ãƒƒãƒˆ

`,t+=`### ğŸ“Š 8é€±é–“ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³è¨ˆç”»

`,t+=`**é€±1-2: æŠ€è¡“ç¿’å¾—ãƒ•ã‚§ãƒ¼ã‚º**
`,t+=`- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹: æ­£ã—ã„ã‚¹ã‚¿ãƒ¼ãƒˆå§¿å‹¢ã®ç¿’å¾—
`,t+=`- è² è·: è»½ã‚ã®é‡é‡ï¼ˆ70-80% 1RMï¼‰
`,t+=`- ã‚¹ãƒ”ãƒ¼ãƒ‰: 80%ã®åŠ›ã§ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯é‡è¦–

`,t+=`**é€±3-4: ç­‹åŠ›æ§‹ç¯‰ãƒ•ã‚§ãƒ¼ã‚º**
`,t+=`- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹: è‡€ç­‹ãƒ»ãƒãƒ ã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹ã®æœ€å¤§ç­‹åŠ›
`,t+=`- è² è·: é‡ã„é‡é‡ï¼ˆ85-90% 1RMï¼‰
`,t+=`- ã‚¹ãƒ”ãƒ¼ãƒ‰: 90%ã®åŠ›ã§ãƒ‘ãƒ¯ãƒ¼é‡è¦–

`,t+=`**é€±5-6: ãƒ‘ãƒ¯ãƒ¼å¤‰æ›ãƒ•ã‚§ãƒ¼ã‚º**
`,t+=`- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹: ç­‹åŠ›ã‚’çˆ†ç™ºçš„ãªåŠ›ã¸å¤‰æ›
`,t+=`- è² è·: ä¸­ç¨‹åº¦ã®é‡é‡ï¼ˆ75-85% 1RMï¼‰+ ãƒ—ãƒ©ã‚¤ã‚ªé‡è¦–
`,t+=`- ã‚¹ãƒ”ãƒ¼ãƒ‰: 95%ã®åŠ›ã§å®Ÿæˆ¦çš„ãªã‚¹ã‚¿ãƒ¼ãƒˆç·´ç¿’

`,t+=`**é€±7-8: ãƒ”ãƒ¼ã‚­ãƒ³ã‚°ãƒ•ã‚§ãƒ¼ã‚º**
`,t+=`- ãƒ•ã‚©ãƒ¼ã‚«ã‚¹: ç–²åŠ´å›å¾©ã¨ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³èª¿æ•´
`,t+=`- è² è·: è»½ã‚ã®é‡é‡ï¼ˆ60-70% 1RMï¼‰
`,t+=`- ã‚¹ãƒ”ãƒ¼ãƒ‰: çŸ­ã„è·é›¢ã§100%ã®åŠ›ã€æœ¬æ•°ã‚’æ¸›ã‚‰ã™

`,t+=`### ğŸ”¬ åŠ¹æœæ¸¬å®šã¨é€²æ—ç¢ºèª

`,t+=`**é€±ã«1å›æ¸¬å®šã™ã¹ãæŒ‡æ¨™**:
`,t+=`1. **10mèµ°ã‚¿ã‚¤ãƒ **ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆèƒ½åŠ›ã®ç›´æ¥çš„æŒ‡æ¨™ï¼‰
`,t+=`2. **30mèµ°ã‚¿ã‚¤ãƒ **ï¼ˆåˆæœŸåŠ é€Ÿã®ç·åˆåŠ›ï¼‰
`,t+=`3. **æœ€åˆã®3æ­©ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰é•·**ï¼ˆè‚¡é–¢ç¯€ä¼¸å±•åŠ›ã®æŒ‡æ¨™ï¼‰
`,t+=`4. **ãƒ’ãƒƒãƒ—ã‚¹ãƒ©ã‚¹ãƒˆ1RM**ï¼ˆè‡€ç­‹ã®æœ€å¤§ç­‹åŠ›ï¼‰

`,t+=`**ãƒ“ãƒ‡ã‚ªåˆ†æãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ**:
`,t+=`- ãƒ–ãƒ­ãƒƒã‚¯é›¢è„šæ™‚ã®ä½“å¹¹è§’åº¦ï¼ˆç›®æ¨™: 42-48Â°ï¼‰
`,t+=`- æœ€åˆã®3æ­©ã®è†è§’åº¦ï¼ˆç›®æ¨™: 150-160Â°ã‚’ç¶­æŒï¼‰
`,t+=`- ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®æ®µéšçš„ä¼¸é•·ï¼ˆä¸€æ­©ã”ã¨ã«ä¼¸ã³ã¦ã„ã‚‹ã‹ï¼‰
`,t+=`- æ—©æœŸèµ·ãä¸ŠãŒã‚Šã®æœ‰ç„¡ï¼ˆ5æ­©ç›®ã¾ã§ã¯å‰å‚¾ç¶­æŒï¼‰

`,t+=`### âš ï¸ ã‚ˆãã‚ã‚‹é–“é•ã„ã¨ä¿®æ­£æ–¹æ³•

`,t+=`**âŒ é–“é•ã„1: ã‚¹ã‚¿ãƒ¼ãƒˆç›´å¾Œã«è†ã‚’å¼•ãä¸Šã’ã‚‹**
`,t+=`âœ… ä¿®æ­£: æœ€åˆã®2-3æ­©ã¯è†ã‚’ä¼¸ã°ã—ãŸã¾ã¾ã€è‚¡é–¢ç¯€ä¼¸å±•ã®ã¿

`,t+=`**âŒ é–“é•ã„2: æ—©æœŸã«ä½“å¹¹ã‚’èµ·ã“ã™**
`,t+=`âœ… ä¿®æ­£: 5æ­©ç›®ã¾ã§42-48Â°ã®å‰å‚¾ã‚’ç¶­æŒã€è‡ªç„¶ã«èµ·ãä¸ŠãŒã‚‹

`,t+=`**âŒ é–“é•ã„3: æ¥åœ°ãŒèº«ä½“ã®çœŸä¸‹ã¾ãŸã¯å‰æ–¹**
`,t+=`âœ… ä¿®æ­£: æ¥åœ°ã¯èº«ä½“ã®å¾Œæ–¹ã€åœ°é¢ã‚’å¾Œã‚ã«æŠ¼ã™æ„è­˜

`,t+=`**âŒ é–“é•ã„4: è†ã®å±ˆæ›²ãƒ»ä¼¸å±•ã§åŠ é€Ÿã—ã‚ˆã†ã¨ã™ã‚‹**
`,t+=`âœ… ä¿®æ­£: è†ã¯å›ºå®šã—ã€è‚¡é–¢ç¯€ä¼¸å±•ï¼ˆè‡€ç­‹ãƒ»ãƒãƒ ï¼‰ã§æ¨é€²åŠ›ã‚’ç”Ÿã‚€

`,t+=`### ğŸ“š å‚è€ƒ: ä¸–ç•Œãƒˆãƒƒãƒ—ã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã®ã‚¹ã‚¿ãƒ¼ãƒˆæŠ€è¡“

`,t+=`- **ã‚¦ã‚µã‚¤ãƒ³ãƒ»ãƒœãƒ«ãƒˆ**: æœ€åˆã®10æ­©ã§7mã‚¹ãƒˆãƒ©ã‚¤ãƒ‰é”æˆï¼ˆå¼·åŠ›ãªè‚¡é–¢ç¯€ä¼¸å±•ï¼‰
`,t+=`- **ãƒã‚¢ãƒ»ãƒ©ã‚¤ãƒ«ã‚º**: ãƒ–ãƒ­ãƒƒã‚¯é›¢è„šè§’åº¦42Â°ï¼ˆç§‘å­¦çš„ã«æœ€é©ï¼‰
`,t+=`- **ã‚¯ãƒªã‚¹ãƒãƒ£ãƒ³ãƒ»ã‚³ãƒ¼ãƒ«ãƒãƒ³**: æœ€åˆã®3æ­©ã§è†è§’åº¦ã»ã¼å›ºå®šï¼ˆ160Â°ç¶­æŒï¼‰

`,t+=`---

`,t+=`**ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’8é€±é–“å®Ÿæ–½ã™ã‚‹ã“ã¨ã§ã€10mèµ°ã‚¿ã‚¤ãƒ ã§0.1-0.2ç§’ã€30mèµ°ã‚¿ã‚¤ãƒ ã§0.2-0.4ç§’ã®æ”¹å–„ãŒæœŸå¾…ã§ãã¾ã™ã€‚**
`):M<=0?(t+=`### âœ… ç›®æ¨™é”æˆå¯èƒ½ï¼
`,t+=`ç¾åœ¨ã®èµ°åŠ›ã§100m ${i}ç§’ã¯ååˆ†ã«é”æˆå¯èƒ½ã§ã™ï¼

`,t+=`### ğŸƒ é«˜é‡é€²æ°ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆç†è«–ã«åŸºã¥ãã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥æŠ€è¡“ã®æœ€é©åŒ–

`,t+=`#### ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ï¼ˆ1ã€œ12æ­©ï¼‰ã®æ´—ç·´
`,t+=`**é£›ã³å‡ºã—è§’åº¦**: 42-45Â°ã‚’ç¶­æŒ
`,t+=`- ãƒã‚¢ãƒ»ãƒ©ã‚¤ãƒ«ã‚ºï¼ˆ9ç§’83ï¼‰ãªã©ãƒˆãƒƒãƒ—ã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã®ç§‘å­¦çš„åˆ†æçµæœ
`,t+=`- ç„¡ç†ãªå‰å‚¾å§¿å‹¢ã¯æ¨é€²åŠ›ã«ç¹‹ãŒã‚‰ãªã„
`,t+=`- **åŠ›ã®ãƒ™ã‚¯ãƒˆãƒ«ã®å¤‰åŒ–**:
`,t+=`  - 1ã€œ3æ­©ç›®: **å¾Œã‚æ–¹å‘ï¼†ä¸‹æ–¹å‘**ã¸ã®åŠ›ç™ºæ®
`,t+=`  - 4ã€œ12æ­©: ã‚„ã‚„å¾Œã‚æ–¹å‘ã ãŒã€ã»ã¼**ä¸‹æ–¹å‘**ã¸ç§»è¡Œ
`,t+=`  - 8ã€œ12æ­©ç¨‹åº¦ã§åˆæœŸåŠ é€ŸãŒçµ‚ã‚ã‚Šã€çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ï¼ˆé‰›ç›´æˆåˆ†ï¼‰ãŒå¼·ããªã‚‹

`,t+=`**åŠ é€Ÿå±€é¢ã®æŠ€è¡“**:
`,t+=`- è†ã®è§’åº¦å¤‰åŒ–ã¯å°‘ãªãä¿ã¤
`,t+=`- è†ã®ä¼¸å±•å‹•ä½œã‚ˆã‚Šã‚‚ã€**è‡€éƒ¨ã‚’ä½¿ã£ãŸä¼¸å±•å‹•ä½œ**ãŒé‡è¦
`,t+=`- è†ã‚’è»½åº¦å±ˆæ›²ä½ã«ç¶­æŒã—ãŸã¾ã¾è‚¡é–¢ç¯€ä¼¸å±•ã‚’è¡Œã†
`,t+=`- æ¥åœ°æ™‚ã®è†è§’åº¦ã‚’ç¶­æŒã—ã€è‡€éƒ¨ã®åŠ›ã‚’æœ€å¤§é™ã«æ´»ç”¨

`,t+=`#### æœ€é«˜é€Ÿåº¦åŸŸã®æŠ€è¡“
`,t+=`**æ¥åœ°æ™‚é–“ã®çŸ­ç¸®**: ç›®æ¨™ 0.08-0.10ç§’
`,t+=`- çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ï¼ˆé‰›ç›´æˆåˆ†ï¼‰ã‚’å¼·åŒ–
`,t+=`- åœ°é¢ã‹ã‚‰ã®åç™ºåŠ›ã‚’æœ€å¤§åŒ–
`,t+=`**æ¥åœ°ä½ç½®ã®æœ€é©åŒ–**:
`,t+=`- ä½“ã®çœŸä¸‹ã§æ¥åœ°
`,t+=`- ãƒ–ãƒ¬ãƒ¼ã‚­ãƒ³ã‚°åŠ¹æœã‚’æœ€å°é™ã«
`,t+=`- ã‚¹ãƒ ãƒ¼ã‚ºãªé‡å¿ƒç§»å‹•

`,t+=`---

`,t+=`**ç¶­æŒãƒ»å¾®èª¿æ•´ã™ã¹ããƒã‚¤ãƒ³ãƒˆ**:
`,t+=`1. **ãƒ”ãƒƒãƒã®å¾®èª¿æ•´**: ${y.toFixed(2)} â†’ ${S.toFixed(2)}æ­©/ç§’
`,t+=`   - ãƒ¡ãƒˆãƒ­ãƒãƒ¼ãƒ ã‚’ä½¿ã£ãŸä¸€å®šãƒªã‚ºãƒ ã®ç·´ç¿’
`,t+=`   - æ¥åœ°æ™‚é–“ã‚’çŸ­ãã™ã‚‹æ„è­˜ï¼ˆ0.08-0.10ç§’ãŒç†æƒ³ï¼‰

`,t+=`2. **ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®åŠ¹ç‡åŒ–**: ${x.toFixed(2)} â†’ ${k.toFixed(2)}m
`,t+=`   - ç„¡é§„ãªå‹•ãã‚’å‰Šæ¸›ï¼ˆä¸Šä¸‹å‹•ã‚’æœ€å°é™ã«ï¼‰
`,t+=`   - æ¥åœ°ä½ç½®ã‚’æœ€é©åŒ–ï¼ˆä½“ã®çœŸä¸‹ã§æ¥åœ°ï¼‰

`,t+=`3. **ãƒ¬ãƒ¼ã‚¹æˆ¦ç•¥**
`,t+=`   - ã‚¹ã‚¿ãƒ¼ãƒˆã€œ30m: åŠ é€Ÿãƒ•ã‚§ãƒ¼ã‚ºï¼ˆãƒ”ãƒƒãƒé‡è¦–ã€æ°´å¹³æˆåˆ†ã®åŠ›ç™ºæ®ï¼‰
`,t+=`   - 30-60m: æœ€é«˜é€Ÿåº¦ç¶­æŒï¼ˆãƒ”ãƒƒãƒã¨ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®ãƒãƒ©ãƒ³ã‚¹ï¼‰
`,t+=`   - 60-100m: é€Ÿåº¦ç¶­æŒï¼ˆãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ã¦èµ°ã‚‹ã€çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ï¼‰
`):c==="topSpeed"&&H<5?(t+=`### ğŸ”¥ ç›®æ¨™é”æˆã¾ã§ã‚ã¨å°‘ã—ï¼
`,t+=`ã‚ã¨${H.toFixed(1)}%ã®é€Ÿåº¦å‘ä¸Šã§ç›®æ¨™é”æˆã§ã™ï¼

`,t+=`### ğŸƒ é«˜é‡é€²æ°ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆç†è«–ï¼šã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥æŠ€è¡“ã®æœ€é©åŒ–

`,t+=`#### ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ï¼ˆ1ã€œ12æ­©ï¼‰ã®æ´—ç·´
`,t+=`**é£›ã³å‡ºã—è§’åº¦**: 42-45Â°ã‚’ç¶­æŒ
`,t+=`- 1ã€œ3æ­©ç›®: **å¾Œã‚æ–¹å‘ï¼†ä¸‹æ–¹å‘**ã¸ã®åŠ›ç™ºæ®
`,t+=`- 4ã€œ12æ­©: ã‚„ã‚„å¾Œã‚æ–¹å‘ã ãŒã€ã»ã¼**ä¸‹æ–¹å‘**ã¸ç§»è¡Œ
`,t+=`- æ¥åœ°æ™‚ã«æ°´å¹³æˆåˆ†ã‚’æœ€å¤§åŒ–ï¼ˆè†ã‚’ä¸Šã’ã™ããªã„ï¼‰
`,t+=`- è‡€éƒ¨ã‚’ä½¿ã£ãŸä¼¸å±•å‹•ä½œï¼ˆè†ã®ä¼¸å±•ã«é ¼ã‚‰ãªã„ï¼‰

`,t+=`---

`,G<.9?(t+=`### ğŸ¯ å„ªå…ˆæ”¹å–„é …ç›®: ãƒ”ãƒƒãƒå‘ä¸Š
`,t+=`ç¾åœ¨ã®ãƒ”ãƒƒãƒï¼ˆ${y.toFixed(2)}æ­©/ç§’ï¼‰ã¯æœ€é©å€¤ã®${(G*100).toFixed(1)}%ã§ã™ã€‚

`,t+=`**ãƒ”ãƒƒãƒå‘ä¸Šãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°** (ç›®æ¨™: ${S.toFixed(2)}æ­©/ç§’)
`,t+=`1. **æ¥åœ°æ™‚é–“çŸ­ç¸®ãƒ‰ãƒªãƒ«**
`,t+=`   - ç›®æ¨™æ¥åœ°æ™‚é–“: 0.08-0.10ç§’ï¼ˆç¾åœ¨ã‚ˆã‚Š10-20%çŸ­ç¸®ï¼‰
`,t+=`   - ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ãƒ†ãƒƒãƒ—ãƒ‰ãƒªãƒ«ï¼ˆ20m Ã— 3æœ¬ï¼‰
`,t+=`   - ãƒ¡ãƒˆãƒ­ãƒãƒ¼ãƒ ç·´ç¿’ï¼ˆç›®æ¨™ãƒ”ãƒƒãƒã«è¨­å®šï¼‰
`,t+=`   - **çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿**ã‚’æ„è­˜ï¼ˆé‰›ç›´æˆåˆ†ã®å¼·åŒ–ï¼‰

`,t+=`2. **ãƒ—ãƒ©ã‚¤ã‚ªãƒ¡ãƒˆãƒªã‚¯ã‚¹**
`,t+=`   - ã‚¢ãƒ³ã‚¯ãƒ«ãƒ›ãƒƒãƒ—ï¼ˆè¶³é¦–ã®åç™ºåŠ›å¼·åŒ–ï¼‰
`,t+=`   - ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆçŸ­è·é›¢ãƒ»é«˜é »åº¦ï¼‰
`,t+=`   - ãƒœãƒƒã‚¯ã‚¹ã‚¸ãƒ£ãƒ³ãƒ—ï¼ˆçˆ†ç™ºçš„ãªåŠ›ç™ºæ®ï¼‰
`,t+=`   - åœ°é¢ååŠ›ã®æœ€å¤§åŒ–ï¼ˆä½“é‡ã®3-5å€ã®åŠ›ã‚’ç™ºæ®ï¼‰

`,t+=`3. **æŠ€è¡“ç·´ç¿’**
`,t+=`   - è…•æŒ¯ã‚Šã®é«˜é€ŸåŒ–ï¼ˆè…•æŒ¯ã‚Šé€Ÿåº¦ãŒãƒ”ãƒƒãƒã‚’æ±ºå®šï¼‰
`,t+=`   - ä¸‹ã‚Šå‚ãƒ€ãƒƒã‚·ãƒ¥ï¼ˆé‡åŠ›ã‚’åˆ©ç”¨ã—ãŸãƒ”ãƒƒãƒæ„Ÿè¦šï¼‰
`,t+=`   - ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥1ã€œ12æ­©ã®æ°´å¹³æˆåˆ†é‡è¦–
`):K<.9?(t+=`### ğŸ¯ å„ªå…ˆæ”¹å–„é …ç›®: ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å‘ä¸Š
`,t+=`ç¾åœ¨ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ï¼ˆ${x.toFixed(2)}mï¼‰ã¯æœ€é©å€¤ã®${(K*100).toFixed(1)}%ã§ã™ã€‚

`,t+=`**ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å‘ä¸Šãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°** (ç›®æ¨™: ${k.toFixed(2)}m)
`,t+=`1. **ç­‹åŠ›å¼·åŒ–**
`,t+=`   - ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆï¼ˆä½“é‡ã®1.5-2å€ã®é‡é‡ï¼‰
`,t+=`   - ãƒ©ãƒ³ã‚¸ï¼ˆè‚¡é–¢ç¯€ã®å¯å‹•åŸŸã¨ç­‹åŠ›ï¼‰
`,t+=`   - ãƒ¬ãƒƒã‚°ã‚«ãƒ¼ãƒ«ï¼ˆãƒãƒ ã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹å¼·åŒ–ï¼‰
`,t+=`   - **è‡€éƒ¨ï¼ˆã‚°ãƒ«ãƒ¼ãƒˆï¼‰ã®å¼·åŒ–**: è‚¡é–¢ç¯€ä¼¸å±•ã®ä¸»è¦ç­‹

`,t+=`2. **æŸ”è»Ÿæ€§å‘ä¸Š**
`,t+=`   - å‹•çš„ã‚¹ãƒˆãƒ¬ãƒƒãƒï¼ˆç·´ç¿’å‰ï¼‰
`,t+=`   - è‚¡é–¢ç¯€ã®å¯å‹•åŸŸã‚’åºƒã’ã‚‹ãƒ‰ãƒªãƒ«ï¼ˆç›®æ¨™: 70Â°ä»¥ä¸Šï¼‰
`,t+=`   - ãƒãƒ¼ãƒ‰ãƒ«ãƒ‰ãƒªãƒ«ï¼ˆã‚¹ãƒˆãƒ©ã‚¤ãƒ‰æ„Ÿè¦šï¼‰
`,t+=`   - **è†ã‚’è»½åº¦å±ˆæ›²ä½ã«ç¶­æŒ**ã—ãªãŒã‚‰è‚¡é–¢ç¯€ä¼¸å±•ã‚’è¡Œã†

`,t+=`3. **æŠ€è¡“ç·´ç¿’**
`,t+=`   - ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆæ»ç©ºæ™‚é–“ã‚’æ„è­˜ï¼‰
`,t+=`   - é«˜è†èµ°ï¼ˆè†ã‚’é«˜ãä¸Šã’ã‚‹æ„è­˜ï¼‰
`,t+=`   - æ¥åœ°ä½ç½®ã®æœ€é©åŒ–ï¼ˆä½“ã®çœŸä¸‹ã§æ¥åœ°ï¼‰
`,t+=`   - ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã§**è‡€éƒ¨ã‚’ä½¿ã£ãŸä¼¸å±•å‹•ä½œ**ã‚’æ„è­˜
`):(t+=`### ğŸ¯ ãƒãƒ©ãƒ³ã‚¹å‹æ”¹å–„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
`,t+=`ãƒ”ãƒƒãƒãƒ»ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã¨ã‚‚ã«æœ€é©å€¤ã«è¿‘ã¥ã„ã¦ã„ã¾ã™ã€‚

`,t+=`**çµ±åˆãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°**
`,t+=`1. **ã‚¹ãƒ”ãƒ¼ãƒ‰æŒä¹…åŠ›**
`,t+=`   - 80mèµ° Ã— 3-5æœ¬ï¼ˆ95%ã®å¼·åº¦ï¼‰
`,t+=`   - ç›®æ¨™ãƒ”ãƒƒãƒã¨ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’æ„è­˜
`,t+=`   - ä¼‘æ¯æ™‚é–“: å®Œå…¨å›å¾©ï¼ˆ5-8åˆ†ï¼‰
`,t+=`   - **æ¥åœ°ä½ç½®ã®æœ€é©åŒ–**ï¼ˆä½“ã®çœŸä¸‹ã§æ¥åœ°ã€ãƒ–ãƒ¬ãƒ¼ã‚­ãƒ³ã‚°åŠ¹æœã®æœ€å°åŒ–ï¼‰

`,t+=`2. **ãƒ¬ãƒ¼ã‚¹ãƒšãƒ¼ã‚¹èµ°**
`,t+=`   - 50-60m Ã— 3æœ¬ï¼ˆç›®æ¨™é€Ÿåº¦ã§èµ°ã‚‹ï¼‰
`,t+=`   - ãƒ”ãƒƒãƒ: ${S.toFixed(2)}æ­©/ç§’ã‚’ç¶­æŒ
`,t+=`   - ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰: ${k.toFixed(2)}mã‚’ç¶­æŒ
`,t+=`   - é€Ÿåº¦ = ${m.toFixed(2)}m/s = ${S.toFixed(2)}æ­©/ç§’ Ã— ${k.toFixed(2)}m

`,t+=`3. **æŠ€è¡“çµ±åˆ**
`,t+=`   - åŠ é€Ÿèµ°ï¼ˆ30-60mã§æœ€é«˜é€Ÿåº¦åˆ°é”ï¼‰
`,t+=`   - 4ã€œ12æ­©ã§æ°´å¹³æˆåˆ†ã‹ã‚‰é‰›ç›´æˆåˆ†ã¸ç§»è¡Œ
`,t+=`   - ãƒ•ãƒ©ã‚¤ãƒ³ã‚°èµ°ï¼ˆåŠ©èµ°ã‚’ã¤ã‘ã¦æœ€é«˜é€Ÿåº¦ã‚’ä½“é¨“ï¼‰
`,t+=`   - çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ã€åœ°é¢ååŠ›ã®æœ€å¤§åŒ–
`)):c==="topSpeed"&&H<10?(t+=`### ğŸ’ª ç›®æ¨™é”æˆã«ã¯è¨ˆç”»çš„ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãŒå¿…è¦
`,t+=`${H.toFixed(1)}%ã®é€Ÿåº¦å‘ä¸ŠãŒå¿…è¦ã§ã™ã€‚

`,t+=`### ğŸƒ é«˜é‡é€²æ°ã®ã‚¹ãƒ—ãƒªãƒ³ãƒˆç†è«–ã«åŸºã¥ãæŠ€è¡“ãƒã‚¤ãƒ³ãƒˆ

`,t+=`#### 1ï¸âƒ£ ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ï¼ˆ1ã€œ12æ­©ï¼‰ã®ãƒã‚¤ãƒ³ãƒˆ
`,t+=`**é£›ã³å‡ºã—è§’åº¦**: 42-45Â°ãŒæœ€é©
`,t+=`- ãƒã‚¢ãƒ»ãƒ©ã‚¤ãƒ«ã‚ºï¼ˆ9ç§’83ï¼‰ãªã©ãƒˆãƒƒãƒ—ã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼ã®åˆ†æçµæœ
`,t+=`- ç„¡ç†ãªå‰å‚¾å§¿å‹¢ã¯æ¨é€²åŠ›ã«ç¹‹ãŒã‚‰ãªã„
`,t+=`- åŠ é€Ÿæ™‚ã¯æ¥åœ°æ™‚ã«**æ°´å¹³æˆåˆ†**ã‚’ç”Ÿã¿å‡ºã™ï¼ˆè†ã‚’ä¸Šã«å¼•ãä¸Šã’ãªã„ï¼‰
`,t+=`- æ»ç©ºãƒ•ã‚§ãƒ¼ã‚ºã§åŠ é€Ÿæˆåˆ†ã¯ç”Ÿã¿å‡ºã›ãªã„ã®ã§ã€æµ®ãã™ããªã„ã‚ˆã†ã«ã™ã‚‹

`,t+=`**åŠ›ã®ãƒ™ã‚¯ãƒˆãƒ«ã®å¤‰åŒ–**:
`,t+=`- 1ã€œ3æ­©ç›®: **å¾Œã‚æ–¹å‘ï¼†ä¸‹æ–¹å‘**ã¸ã®åŠ›ç™ºæ®
`,t+=`- 4ã€œ12æ­©: ã‚„ã‚„å¾Œã‚æ–¹å‘ã ãŒã€ã»ã¼**ä¸‹æ–¹å‘**ã¸ç§»è¡Œ
`,t+=`- 8ã€œ12æ­©ç¨‹åº¦ã§åˆæœŸåŠ é€ŸãŒçµ‚ã‚ã‚Šã€çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ï¼ˆé‰›ç›´æˆåˆ†ï¼‰ãŒå¼·ããªã‚‹

`,t+=`#### 2ï¸âƒ£ åŠ é€Ÿå±€é¢ã®æŠ€è¡“
`,t+=`**å‰å‚¾å§¿å‹¢ã®ç¶­æŒ**:
`,t+=`- è†ã®è§’åº¦å¤‰åŒ–ã¯å°‘ãªãä¿ã¤
`,t+=`- è†ã®ä¼¸å±•å‹•ä½œã‚ˆã‚Šã‚‚ã€**è‡€éƒ¨ã‚’ä½¿ã£ãŸä¼¸å±•å‹•ä½œ**ãŒé‡è¦
`,t+=`- è†ã‚’è»½åº¦å±ˆæ›²ä½ã«ç¶­æŒã—ãŸã¾ã¾è‚¡é–¢ç¯€ä¼¸å±•ã‚’è¡Œã†

`,t+=`**æŒŸã¿è¾¼ã¿å‹•ä½œã®å„ªå…ˆ**:
`,t+=`- 1ã€œ3æ­©ç›®ã¯ç‰¹ã«æ°´å¹³æ–¹å‘ã¸ã®åŠ›ç™ºæ®ã‚’æ„è­˜
`,t+=`- æ¥åœ°æ™‚ã®è†è§’åº¦ã‚’ç¶­æŒã—ã€è‡€éƒ¨ã®åŠ›ã‚’æœ€å¤§é™ã«æ´»ç”¨

`,t+=`#### 3ï¸âƒ£ æœ€é«˜é€Ÿåº¦åŸŸã®æŠ€è¡“
`,t+=`**æ¥åœ°æ™‚é–“ã®çŸ­ç¸®**:
`,t+=`- ç›®æ¨™: 0.08-0.10ç§’
`,t+=`- çœŸä¸‹ã¸ã®è¸ã¿è¾¼ã¿ï¼ˆé‰›ç›´æˆåˆ†ï¼‰ã‚’å¼·åŒ–
`,t+=`- åœ°é¢ã‹ã‚‰ã®åç™ºåŠ›ã‚’æœ€å¤§åŒ–

`,t+=`**æ¥åœ°ä½ç½®ã®æœ€é©åŒ–**:
`,t+=`- ä½“ã®çœŸä¸‹ã§æ¥åœ°
`,t+=`- ãƒ–ãƒ¬ãƒ¼ã‚­ãƒ³ã‚°åŠ¹æœã‚’æœ€å°é™ã«
`,t+=`- ã‚¹ãƒ ãƒ¼ã‚ºãªé‡å¿ƒç§»å‹•

`,t+=`---

`,t+=`### ğŸ“‹ 8é€±é–“ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒ³

`,t+=`**é€±1-2: åŸºç¤ãƒ•ã‚§ãƒ¼ã‚º**
`,t+=`ç›®çš„: ç­‹åŠ›ã¨ç¥çµŒç³»ã®é©å¿œ
`,t+=`- ç­‹åŠ›: ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ 3ã‚»ãƒƒãƒˆÃ—8å›ï¼ˆ80-85% 1RMï¼‰
`,t+=`- çˆ†ç™ºåŠ›: ãƒœãƒƒã‚¯ã‚¹ã‚¸ãƒ£ãƒ³ãƒ— 3ã‚»ãƒƒãƒˆÃ—5å›
`,t+=`- ã‚¹ãƒ”ãƒ¼ãƒ‰: 30måŠ é€Ÿèµ° 5æœ¬ï¼ˆãƒ”ãƒƒãƒæ„è­˜ï¼‰
`,t+=`- æŠ€è¡“: ãƒ‰ãƒªãƒ«ï¼ˆé«˜è†èµ°ã€ã‚‚ã‚‚ä¸Šã’ç­‰ï¼‰

`,t+=`**é€±3-4: å¼·åŒ–ãƒ•ã‚§ãƒ¼ã‚º**
`,t+=`ç›®çš„: ãƒ”ãƒƒãƒã¨ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®çµ±åˆ
`,t+=`- ç­‹åŠ›: ã‚¯ãƒªãƒ¼ãƒ³ 3ã‚»ãƒƒãƒˆÃ—5å›ï¼ˆçˆ†ç™ºçš„å‹•ä½œï¼‰
`,t+=`- ãƒ”ãƒƒãƒ: ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ãƒ†ãƒƒãƒ— 20mÃ—5æœ¬ï¼ˆ${S.toFixed(1)}æ­©/ç§’ç›®æ¨™ï¼‰
`,t+=`- ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰: ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚° 30mÃ—4æœ¬
`,t+=`- ã‚¹ãƒ”ãƒ¼ãƒ‰: 50mèµ° 4æœ¬ï¼ˆ90%å¼·åº¦ï¼‰

`,t+=`**é€±5-6: çµ±åˆãƒ•ã‚§ãƒ¼ã‚º**
`,t+=`ç›®çš„: ãƒ¬ãƒ¼ã‚¹ãƒšãƒ¼ã‚¹ã§ã®èµ°ã‚Šè¾¼ã¿
`,t+=`- ã‚¹ãƒ”ãƒ¼ãƒ‰æŒä¹…åŠ›: 80mèµ° 3æœ¬ï¼ˆ95%å¼·åº¦ï¼‰
`,t+=`- ãƒ¬ãƒ¼ã‚¹ãƒšãƒ¼ã‚¹: 60mèµ° 4æœ¬ï¼ˆç›®æ¨™é€Ÿåº¦: ${m.toFixed(2)}m/sï¼‰
`,t+=`- æŠ€è¡“: ãƒ•ãƒ©ã‚¤ãƒ³ã‚°30m 4æœ¬ï¼ˆæœ€é«˜é€Ÿåº¦ä½“é¨“ï¼‰

`,t+=`**é€±7-8: ãƒ”ãƒ¼ã‚­ãƒ³ã‚°ãƒ•ã‚§ãƒ¼ã‚º**
`,t+=`ç›®çš„: ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³èª¿æ•´ã¨è¨˜éŒ²æŒ‘æˆ¦
`,t+=`- è»½ã‚ã®ã‚¹ãƒ”ãƒ¼ãƒ‰: 40mèµ° 3æœ¬ï¼ˆ95%å¼·åº¦ï¼‰
`,t+=`- ã‚¿ã‚¤ãƒ ãƒˆãƒ©ã‚¤ã‚¢ãƒ«: 100må…¨åŠ›èµ°ï¼ˆé€±1å›ï¼‰
`,t+=`- å›å¾©: ã‚¹ãƒˆãƒ¬ãƒƒãƒã¨è»½ã„ã‚¸ãƒ§ã‚®ãƒ³ã‚°

`,t+=`### ğŸ”¬ é‡è¦ãªç§‘å­¦çš„ãƒã‚¤ãƒ³ãƒˆ
`,t+=`1. **æ¥åœ°æ™‚é–“**: 0.08-0.10ç§’ãŒç†æƒ³ï¼ˆçŸ­ã„ã»ã©ãƒ”ãƒƒãƒãŒä¸ŠãŒã‚‹ï¼‰
`,t+=`2. **åœ°é¢ååŠ›**: ä½“é‡ã®3-5å€ã®åŠ›ã‚’ç™ºæ®ï¼ˆç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã§å‘ä¸Šï¼‰
`,t+=`3. **è…•æŒ¯ã‚Š**: ãƒ”ãƒƒãƒã‚’æ±ºå®šã™ã‚‹é‡è¦å› å­ï¼ˆè‚˜è§’åº¦90åº¦ã‚’ä¿ã¤ï¼‰
`,t+=`4. **ä½“å¹¹å®‰å®šæ€§**: ä¸Šä¸‹å‹•ã‚’æœ€å°é™ã«ã—ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ­ã‚¹ã‚’é˜²ã
`):c==="topSpeed"&&(t+=`### ğŸƒ é•·æœŸçš„ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã§ç›®æ¨™é”æˆã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†
`,t+=`${H.toFixed(1)}%ã®é€Ÿåº¦å‘ä¸Šã«ã¯ã€æ®µéšçš„ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãŒå¿…è¦ã§ã™ã€‚

`,t+=`### ğŸ“‹ 16é€±é–“ï¼ˆ4ãƒ¶æœˆï¼‰ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒ³

`,t+=`**ãƒ•ã‚§ãƒ¼ã‚º1ï¼ˆé€±1-4ï¼‰: åŸºç¤ä½“åŠ›å‘ä¸Š**
`,t+=`ç›®çš„: ç­‹åŠ›ãƒ»æŸ”è»Ÿæ€§ãƒ»æŒä¹…åŠ›ã®åŸºç¤ã‚’æ§‹ç¯‰
`,t+=`- ç­‹åŠ›: é€±3å›ï¼ˆã‚¹ã‚¯ãƒ¯ãƒƒãƒˆã€ãƒ‡ãƒƒãƒ‰ãƒªãƒ•ãƒˆã€ãƒ©ãƒ³ã‚¸ï¼‰
`,t+=`  - ç›®æ¨™: ä½“é‡ã®1.5å€ã®ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆé”æˆ
`,t+=`- æŸ”è»Ÿæ€§: æ¯æ—¥20åˆ†ï¼ˆå‹•çš„ãƒ»é™çš„ã‚¹ãƒˆãƒ¬ãƒƒãƒï¼‰
`,t+=`  - è‚¡é–¢ç¯€å¯å‹•åŸŸã‚’20%å‘ä¸Š
`,t+=`- æœ‰é…¸ç´ : é€±2å›ï¼ˆ30åˆ†ã‚¸ãƒ§ã‚®ãƒ³ã‚°ï¼‰
`,t+=`- ã‚¹ãƒ”ãƒ¼ãƒ‰: é€±1å›ï¼ˆ30måŠ é€Ÿèµ°Ã—5æœ¬ï¼‰

`,t+=`**ãƒ•ã‚§ãƒ¼ã‚º2ï¼ˆé€±5-8ï¼‰: ã‚¹ãƒ”ãƒ¼ãƒ‰åŸºç¤å¼·åŒ–**
`,t+=`ç›®çš„: ãƒ”ãƒƒãƒã¨ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®å€‹åˆ¥å¼·åŒ–
`,t+=`- ãƒ”ãƒƒãƒå¼·åŒ–: é€±2å›
`,t+=`  - ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ãƒ†ãƒƒãƒ— 20mÃ—6æœ¬ï¼ˆç›®æ¨™: ${(S*.9).toFixed(2)}æ­©/ç§’ï¼‰
`,t+=`  - ãƒ—ãƒ©ã‚¤ã‚ªãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆã‚¢ãƒ³ã‚¯ãƒ«ãƒ›ãƒƒãƒ—ã€ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ï¼‰
`,t+=`- ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰å¼·åŒ–: é€±2å›
`,t+=`  - ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚° 40mÃ—5æœ¬ï¼ˆç›®æ¨™: ${(k*.9).toFixed(2)}mï¼‰
`,t+=`  - ãƒãƒ¼ãƒ‰ãƒ«ãƒ‰ãƒªãƒ«
`,t+=`- ç­‹åŠ›: é€±2å›ï¼ˆç¶­æŒãƒ¬ãƒ™ãƒ«ï¼‰

`,t+=`**ãƒ•ã‚§ãƒ¼ã‚º3ï¼ˆé€±9-12ï¼‰: ã‚¹ãƒ”ãƒ¼ãƒ‰çµ±åˆ**
`,t+=`ç›®çš„: ãƒ”ãƒƒãƒã¨ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’çµ±åˆã—ã€æœ€é«˜é€Ÿåº¦ã‚’å‘ä¸Š
`,t+=`- ãƒ¬ãƒ¼ã‚¹ãƒšãƒ¼ã‚¹èµ°: é€±2å›
`,t+=`  - 60mèµ°Ã—4æœ¬ï¼ˆç›®æ¨™é€Ÿåº¦: ${(m*.95).toFixed(2)}m/sï¼‰
`,t+=`  - ãƒ”ãƒƒãƒ ${S.toFixed(2)}æ­©/ç§’ã€ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ ${k.toFixed(2)}m ã‚’æ„è­˜
`,t+=`- ã‚¹ãƒ”ãƒ¼ãƒ‰æŒä¹…åŠ›: é€±1å›
`,t+=`  - 80mèµ°Ã—3æœ¬ï¼ˆ95%å¼·åº¦ã€å®Œå…¨å›å¾©ï¼‰
`,t+=`- æŠ€è¡“ç·´ç¿’: é€±1å›
`,t+=`  - ãƒ•ãƒ©ã‚¤ãƒ³ã‚°30mã€ä¸‹ã‚Šå‚ãƒ€ãƒƒã‚·ãƒ¥

`,t+=`**ãƒ•ã‚§ãƒ¼ã‚º4ï¼ˆé€±13-16ï¼‰: ãƒ”ãƒ¼ã‚­ãƒ³ã‚°ã¨è¨˜éŒ²æŒ‘æˆ¦**
`,t+=`ç›®çš„: æœ€é«˜ã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã§ç›®æ¨™ã‚¿ã‚¤ãƒ é”æˆ
`,t+=`- ã‚¿ã‚¤ãƒ ãƒˆãƒ©ã‚¤ã‚¢ãƒ«: é€±1å›ï¼ˆ100må…¨åŠ›èµ°ï¼‰
`,t+=`- ã‚¹ãƒ”ãƒ¼ãƒ‰ç¶­æŒ: é€±1å›ï¼ˆ40mèµ°Ã—3æœ¬ã€è»½ã‚ï¼‰
`,t+=`- å›å¾©é‡è¦–: ã‚¹ãƒˆãƒ¬ãƒƒãƒã€ãƒãƒƒã‚µãƒ¼ã‚¸
`,t+=`- è¨˜éŒ²ä¼šå‚åŠ : æœ¬ç•ªç’°å¢ƒã§ã®ãƒ¬ãƒ¼ã‚¹çµŒé¨“

`,t+=`### ğŸ”¬ ç§‘å­¦çš„æ ¹æ‹ ã¨ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°åŸç†

`,t+=`**1. é€Ÿåº¦ = ãƒ”ãƒƒãƒ Ã— ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ ã®é–¢ä¿‚**
`,t+=`- ç›®æ¨™: ${m.toFixed(2)}m/s = ${S.toFixed(2)}æ­©/ç§’ Ã— ${k.toFixed(2)}m
`,t+=`- ä¸¡æ–¹ã‚’10%å‘ä¸Šã•ã›ã‚‹ã¨ã€é€Ÿåº¦ã¯ç´„21%å‘ä¸Š
`,t+=`- ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæ”¹å–„ãŒæœ€ã‚‚åŠ¹æœçš„

`,t+=`**2. æ¥åœ°æ™‚é–“ã¨åœ°é¢ååŠ›**
`,t+=`- ãƒˆãƒƒãƒ—ã‚¹ãƒ—ãƒªãƒ³ã‚¿ãƒ¼: æ¥åœ°æ™‚é–“ 0.08-0.10ç§’
`,t+=`- åœ°é¢ååŠ›: ä½“é‡ã®3-5å€
`,t+=`- ãƒ—ãƒ©ã‚¤ã‚ªãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§å‘ä¸Šå¯èƒ½

`,t+=`**3. ç­‹åŠ›ã¨åŠ é€ŸåŠ›ã®é–¢ä¿‚**
`,t+=`- ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ1RMãŒä½“é‡ã®2å€: å„ªã‚ŒãŸã‚¹ãƒ—ãƒªãƒ³ãƒˆèƒ½åŠ›
`,t+=`- çˆ†ç™ºçš„ç­‹åŠ›ï¼ˆRFDï¼‰ãŒæœ€é«˜é€Ÿåº¦ã‚’æ±ºå®š
`,t+=`- ã‚¯ãƒªãƒ¼ãƒ³ã€ã‚¹ãƒŠãƒƒãƒã§å‘ä¸Š

`,t+=`**4. ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚·ã‚¹ãƒ†ãƒ **
`,t+=`- 100mèµ°: ä¸»ã«ATP-PCç³»ï¼ˆç„¡é…¸ç´ çš„è§£ç³–ï¼‰
`,t+=`- ä¼‘æ¯æ™‚é–“: å®Œå…¨å›å¾©ï¼ˆ5-8åˆ†ï¼‰ãŒå¿…è¦
`,t+=`- è³ªã®é«˜ã„ç·´ç¿’ãŒé‡ã‚ˆã‚Šã‚‚é‡è¦
`),$t&&(t+=`
### ğŸ¯ ãƒ•ã‚©ãƒ¼ãƒ æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ
`,t+=$t.overallMessage+`

`,$t.evaluations.length>0&&(t+=`**å…·ä½“çš„ãªæ”¹å–„ææ¡ˆ**:
`,$t.evaluations.forEach((Me,Z)=>{t+=`${Z+1}. **${Me.category}**: ${Me.advice}
`}))),t};h.useEffect(()=>{(N===4||N===5)&&Ae&&j>10&&je(10)},[N,Ae,j]);const ai=async(i,c)=>{console.log("ãƒãƒ«ãƒã‚«ãƒ¡ãƒ©è§£æé–‹å§‹:",{run:i,segments:c}),ie(i),ce(c),ue(!1),r(6)},di=async(i,c)=>(console.log(`Processing segment ${c.segmentIndex}:`,i.name),`session_${c.id}`),ci=()=>{var i,c,o,x,y,m,M,H,T,S,k,P,I,re,K,G,t;if(Q)return e.jsx(Bi,{athleteId:L||void 0,onStartAnalysis:ai,onCancel:()=>ue(!1),processSegmentVideo:di});switch(N){case 0:return e.jsxs("div",{className:"wizard-content",children:[e.jsxs("div",{className:"wizard-step-header",children:[e.jsx("h2",{className:"wizard-step-title",children:"ã‚¹ãƒ†ãƒƒãƒ— 0: æ¸¬å®šè€…æƒ…å ±"}),e.jsx("p",{className:"wizard-step-desc",children:"æ¸¬å®šè€…ã®åŸºæœ¬æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚èº«é•·ã‚„ç›®æ¨™è¨˜éŒ²ã¯è§£æã«æ´»ç”¨ã•ã‚Œã¾ã™ã€‚"})]}),e.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",background:"white",padding:"32px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[V.length>0&&e.jsxs("div",{style:{marginBottom:"24px",padding:"12px 16px",borderRadius:"8px",background:"#f1f5f9",border:"1px solid #cbd5e1"},children:[e.jsx("label",{style:{display:"block",fontSize:"13px",marginBottom:"6px",color:"#0f172a",fontWeight:600},children:"ç™»éŒ²æ¸ˆã¿ã®é¸æ‰‹ã‹ã‚‰é¸ã¶"}),e.jsxs("select",{value:L??"",onChange:s=>{const g=s.target.value||null;if(Y(g),!g){C({name:"",age:null,gender:null,affiliation:"",height_cm:null,current_record:"",target_record:""});return}const b=V.find(u=>u.id===g);b&&C({name:b.full_name??"",age:b.age??null,gender:b.gender??null,affiliation:b.affiliation??"",height_cm:b.height_cm??null,current_record:b.current_record_s!=null?String(b.current_record_s):"",target_record:b.target_record_s!=null?String(b.target_record_s):""})},style:{width:"100%",padding:"10px 12px",fontSize:"0.95rem",borderRadius:"6px",border:"1px solid #cbd5e1",backgroundColor:"white"},children:[e.jsx("option",{value:"",children:"ï¼ˆé¸æŠã—ãªã„ãƒ»æ–°ã—ã„é¸æ‰‹ã¨ã—ã¦å…¥åŠ›ï¼‰"}),V.map(s=>e.jsxs("option",{value:s.id,children:[s.full_name,s.current_record_s!=null?` / ç¾åœ¨: ${s.current_record_s.toFixed(2)} ç§’`:""]},s.id))]}),e.jsx("p",{style:{fontSize:"0.8rem",color:"#64748b",marginTop:"4px"},children:"é¸æ‰‹ã‚’é¸æŠã™ã‚‹ã¨ã€æ°åã‚„èº«é•·ãƒ»è¨˜éŒ²ãŒä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒ ã«è‡ªå‹•å…¥åŠ›ã•ã‚Œã¾ã™ã€‚"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#374151"},children:["æ°å ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"text",value:_.name,onChange:s=>C({..._,name:s.target.value}),placeholder:"å±±ç”° å¤ªéƒ",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"1px solid #d1d5db",borderRadius:"8px",outline:"none"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#374151"},children:["å¹´é½¢ ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",value:_.age??"",onChange:s=>C({..._,age:s.target.value?Number(s.target.value):null}),placeholder:"25",min:"1",max:"120",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"1px solid #d1d5db",borderRadius:"8px",outline:"none"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#374151"},children:["æ€§åˆ¥ ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("select",{value:_.gender??"",onChange:s=>C({..._,gender:s.target.value?s.target.value:null}),style:{width:"100%",padding:"12px",fontSize:"1rem",border:"1px solid #d1d5db",borderRadius:"8px",outline:"none"},children:[e.jsx("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),e.jsx("option",{value:"male",children:"ç”·æ€§"}),e.jsx("option",{value:"female",children:"å¥³æ€§"}),e.jsx("option",{value:"other",children:"ãã®ä»–"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#374151"},children:"æ‰€å±ï¼ˆä»»æ„ï¼‰"}),e.jsx("input",{type:"text",value:_.affiliation,onChange:s=>C({..._,affiliation:s.target.value}),placeholder:"ã€‡ã€‡é«˜æ ¡é™¸ä¸Šéƒ¨",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"1px solid #d1d5db",borderRadius:"8px",outline:"none"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#374151"},children:["èº«é•·ï¼ˆcmï¼‰ ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsx("input",{type:"number",value:_.height_cm??"",onChange:s=>C({..._,height_cm:s.target.value?Number(s.target.value):null}),placeholder:"170",min:"100",max:"250",step:"0.1",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"1px solid #d1d5db",borderRadius:"8px",outline:"none"}}),e.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginTop:"4px"},children:"â€» ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰æ¯”ã®è¨ˆç®—ã«ä½¿ç”¨ã•ã‚Œã¾ã™"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#374151"},children:"ç¾åœ¨ã®è¨˜éŒ²ï¼ˆä»»æ„ï¼‰"}),e.jsx("input",{type:"text",value:_.current_record,onChange:s=>C({..._,current_record:s.target.value}),placeholder:"12.50ç§’",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"1px solid #d1d5db",borderRadius:"8px",outline:"none"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",color:"#374151"},children:"ç›®æ¨™è¨˜éŒ²ï¼ˆä»»æ„ï¼‰"}),e.jsx("input",{type:"text",value:_.target_record,onChange:s=>C({..._,target_record:s.target.value}),placeholder:"12.00ç§’",style:{width:"100%",padding:"12px",fontSize:"1rem",border:"1px solid #d1d5db",borderRadius:"8px",outline:"none"}}),e.jsx("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginTop:"4px"},children:"â€» AIã‚¢ãƒ‰ãƒã‚¤ã‚¹ã«ä½¿ç”¨ã•ã‚Œã¾ã™"})]})]})]})]}),!n&&e.jsxs("div",{style:{maxWidth:"600px",margin:"24px auto",background:"white",padding:"32px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h3",{style:{marginBottom:"16px",fontSize:"1.2rem",fontWeight:"bold"},children:"è§£æãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠ"}),e.jsxs("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:R==="single"?"#3b82f6":"#f3f4f6",color:R==="single"?"white":"#374151",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:[e.jsx("input",{type:"radio",name:"analysisMode",value:"single",checked:R==="single",onChange:()=>D("single"),style:{display:"none"}}),"ğŸ“¹ ã‚·ãƒ³ã‚°ãƒ«å›ºå®šã‚«ãƒ¡ãƒ©"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:R==="multi"?"#3b82f6":"#f3f4f6",color:R==="multi"?"white":"#374151",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:[e.jsx("input",{type:"radio",name:"analysisMode",value:"multi",checked:R==="multi",onChange:()=>D("multi"),style:{display:"none"}}),"ğŸ“¹ğŸ“¹ ãƒãƒ«ãƒå›ºå®šã‚«ãƒ¡ãƒ©"]})]}),R==="multi"&&e.jsx("div",{style:{marginTop:"16px",padding:"12px",background:"#fef3c7",borderRadius:"8px",fontSize:"0.9rem"},children:"âš ï¸ ãƒãƒ«ãƒã‚«ãƒ¡ãƒ©ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€10mã”ã¨ã«è¤‡æ•°ã®å‹•ç”»ã‚’æ’®å½±ã—ã€ çµåˆã—ã¦è§£æã—ã¾ã™ã€‚"})]}),e.jsxs("div",{className:"wizard-nav",children:[e.jsx("div",{}),e.jsx("button",{className:"btn-primary-large",onClick:()=>{R==="multi"?ue(!0):(r(1),localStorage.getItem("hideTutorial")!=="true"&&(He(!0),st(0)))},disabled:!_.name||!_.age||!_.gender||!_.height_cm,children:"æ¬¡ã¸ï¼šå‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"})]})]});case 1:return e.jsxs("div",{className:"wizard-content",children:[e.jsxs("div",{className:"wizard-step-header",children:[e.jsx("h2",{className:"wizard-step-title",children:"ã‚¹ãƒ†ãƒƒãƒ— 1: å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰"}),e.jsx("p",{className:"wizard-step-desc",children:"è§£æã—ãŸã„ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°å‹•ç”»ã‚’é¸æŠã—ã€èµ°è¡Œè·é›¢ã¨ãƒ©ãƒ™ãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"})]}),e.jsx("div",{className:"upload-area",children:e.jsxs("label",{className:"upload-box",style:{borderColor:ee?"var(--success)":"var(--gray-300)",background:ee?"rgba(16, 185, 129, 0.05)":"var(--gray-50)"},children:[e.jsx("div",{className:"upload-icon",children:ee?"âœ…":"ğŸ¥"}),e.jsx("div",{className:"upload-text",children:ee?e.jsxs(e.Fragment,{children:[e.jsxs("strong",{style:{color:"var(--success)"},children:["âœ“ ",ee.name]}),e.jsx("span",{children:"ã‚¯ãƒªãƒƒã‚¯ã§åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ"})]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ"}),e.jsx("span",{children:"MP4, MOV, AVI ãªã©"})]})}),e.jsx("input",{type:"file",accept:"video/*",onChange:ti,style:{display:"none"}})]})}),e.jsxs("div",{className:"input-group",children:[e.jsxs("label",{className:"input-label",children:[e.jsxs("span",{className:"label-text",children:["èµ°è¡Œè·é›¢ (m) ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"number",min:.1,step:.1,value:zn,onChange:s=>os(s.target.value),className:"input-field",placeholder:"ä¾‹: 10",style:{borderColor:Oe&&Oe>0?"var(--success)":"var(--gray-300)"}}),Oe&&Oe>0&&e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--success)"},children:"âœ“ å…¥åŠ›æ¸ˆã¿"})]}),e.jsxs("label",{className:"input-label",children:[e.jsx("span",{className:"label-text",children:"ãƒ©ãƒ™ãƒ«ï¼ˆä»»æ„ï¼‰"}),e.jsx("input",{type:"text",value:Mn,onChange:s=>rs(s.target.value),className:"input-field",placeholder:"ä¾‹: å‰åŠ5m"})]}),e.jsxs("label",{className:"input-label",children:[e.jsx("span",{className:"label-text",children:"ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰"}),e.jsx("textarea",{value:Rn,onChange:s=>as(s.target.value),className:"textarea-field",placeholder:"ãƒ¡ãƒ¢ã‚’å…¥åŠ›...",rows:3})]})]}),e.jsxs("div",{style:{background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"12px",padding:"20px",marginTop:"24px"},children:[e.jsxs("div",{style:{fontWeight:"bold",marginBottom:"16px",color:"#0369a1",fontSize:"1.1rem"},children:["ğŸ“Š èª­ã¿è¾¼ã¿FPSã‚’é¸æŠ ",e.jsx("span",{style:{color:"#ef4444"},children:"*"})]}),e.jsxs("div",{style:{display:"flex",gap:"24px",flexWrap:"wrap"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer",padding:"16px",background:d===60?"#dbeafe":"white",border:d===60?"2px solid #3b82f6":"1px solid #e5e7eb",borderRadius:"12px",flex:"1",minWidth:"240px",transition:"all 0.2s"},children:[e.jsx("input",{type:"radio",name:"fpsSelection",value:60,checked:d===60,onChange:()=>$(60),style:{width:"20px",height:"20px",marginTop:"4px",accentColor:"#3b82f6"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"#1f2937",marginBottom:"4px"},children:"ğŸ¯ 60FPSï¼ˆæ¨™æº–ï¼‰"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280",lineHeight:"1.5"},children:["âœ“ æ—¥å¸¸ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è§£æã«æ¨å¥¨",e.jsx("br",{}),"âœ“ å‡¦ç†é€Ÿåº¦ãŒé€Ÿã„ï¼ˆç´„30ç§’ï¼‰",e.jsx("br",{}),"âœ“ ãƒ”ãƒƒãƒãƒ»ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ãƒ»å§¿å‹¢è§’åº¦ã«ååˆ†"]})]})]}),e.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"12px",cursor:"pointer",padding:"16px",background:d===120?"#fef3c7":"white",border:d===120?"2px solid #f59e0b":"1px solid #e5e7eb",borderRadius:"12px",flex:"1",minWidth:"240px",transition:"all 0.2s"},children:[e.jsx("input",{type:"radio",name:"fpsSelection",value:120,checked:d===120,onChange:()=>$(120),style:{width:"20px",height:"20px",marginTop:"4px",accentColor:"#f59e0b"}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"#1f2937",marginBottom:"4px"},children:"âš¡ 120FPSï¼ˆé«˜ç²¾åº¦ï¼‰"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6b7280",lineHeight:"1.5"},children:["âœ“ æ¥åœ°æ™‚é–“ã®è¶…é«˜ç²¾åº¦æ¸¬å®š",e.jsx("br",{}),"âœ“ å‡¦ç†æ™‚é–“ãŒé•·ã„ï¼ˆç´„120ç§’ï¼‰",e.jsx("br",{}),"âš ï¸ æ¡ä»¶ï¼šæ˜ã‚‹ã„ãƒ»ãƒ–ãƒ¬ãªã—ãƒ»é«˜æ€§èƒ½ç«¯æœ«"]})]})]})]})]}),e.jsxs("div",{className:"wizard-nav",children:[e.jsx("button",{className:"btn-ghost",onClick:()=>r(0),children:"å‰ã¸ï¼šæ¸¬å®šè€…æƒ…å ±"}),e.jsxs("button",{className:"btn-primary-large",onClick:()=>{if(!ee){alert("å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");return}if(!Oe||Oe<=0){alert("æœ‰åŠ¹ãªè·é›¢ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");return}r(3),setTimeout(()=>{ni()},300)},disabled:!ee||!Oe||Oe<=0,children:["æ¬¡ã¸ï¼šãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡ºï¼ˆ",d,"fpsï¼‰"]})]})]});case 3:return e.jsxs("div",{className:"wizard-content",children:[e.jsxs("div",{className:"wizard-step-header",children:[e.jsx("h2",{className:"wizard-step-title",children:"ã‚¹ãƒ†ãƒƒãƒ— 3: ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡ºï¼†å§¿å‹¢æ¨å®šä¸­"}),e.jsx("p",{className:"wizard-step-desc",children:"å‹•ç”»ã‹ã‚‰ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æŠ½å‡ºã—ã€å„ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰å§¿å‹¢ã‚’æ¨å®šã—ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚"})]}),e.jsxs("div",{className:"progress-area",children:[e.jsxs("div",{className:"progress-circle",children:[e.jsxs("svg",{viewBox:"0 0 100 100",className:"progress-ring",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#10b981",strokeWidth:"8",strokeDasharray:`${se*2.827}, 282.7`,strokeLinecap:"round",transform:"rotate(-90 50 50)"})]}),e.jsxs("div",{className:"progress-text",children:[se,"%"]})]}),e.jsx("div",{className:"progress-status",children:Fe})]}),Fe.includes("âŒ")&&e.jsx("div",{className:"wizard-actions",children:e.jsx("button",{className:"btn-ghost",onClick:()=>r(1),children:"æœ€åˆã«æˆ»ã‚‹"})})]});case 3.5:return e.jsxs("div",{className:"wizard-content",children:[e.jsxs("div",{className:"wizard-step-header",children:[e.jsx("h2",{className:"wizard-step-title",children:"ğŸ¥ æ’®å½±ãƒ¢ãƒ¼ãƒ‰é¸æŠ"}),e.jsx("p",{className:"wizard-step-desc",children:"å‹•ç”»ã®æ’®å½±æ–¹æ³•ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",margin:"32px 0"},children:[e.jsxs("div",{onClick:()=>{hs(!1),r(4),In()},style:{background:Qt?"white":"#dbeafe",border:Qt?"2px solid #e5e7eb":"3px solid #3b82f6",borderRadius:"16px",padding:"32px",cursor:"pointer",transition:"all 0.2s",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"16px"},children:"ğŸ“¹"}),e.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:"bold",marginBottom:"12px",color:"#1f2937"},children:"å›ºå®šã‚«ãƒ¡ãƒ©"}),e.jsxs("p",{style:{fontSize:"0.95rem",color:"#6b7280",marginBottom:"16px",lineHeight:"1.6"},children:["ã‚«ãƒ¡ãƒ©ã‚’ä¸‰è„šã§å›ºå®šã—ã¦æ’®å½±",e.jsx("br",{}),e.jsx("strong",{children:"æ¨å¥¨:"})," 4-6måŒºé–“ã‚’é«˜ç²¾åº¦æ¸¬å®š"]}),e.jsxs("div",{style:{background:"#f0f9ff",padding:"12px",borderRadius:"8px",fontSize:"0.85rem",color:"#0369a1"},children:["âœ… é«˜ç²¾åº¦",e.jsx("br",{}),"âœ… å®‰å®šã—ãŸæ¤œå‡º"]})]}),e.jsxs("div",{onClick:()=>{hs(!0),r(4),In()},style:{background:Qt?"#dbeafe":"white",border:Qt?"3px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"16px",padding:"32px",cursor:"pointer",transition:"all 0.2s",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"16px"},children:"ğŸ¥"}),e.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:"bold",marginBottom:"12px",color:"#1f2937"},children:"ãƒ‘ãƒ³æ’®å½±ï¼ˆè¿½å¾“ï¼‰"}),e.jsxs("p",{style:{fontSize:"0.95rem",color:"#6b7280",marginBottom:"16px",lineHeight:"1.6"},children:["ã‚«ãƒ¡ãƒ©ã§äººç‰©ã‚’è¿½ã„ãªãŒã‚‰æ’®å½±",e.jsx("br",{}),e.jsx("strong",{children:"æ¨å¥¨:"})," 10-20må…¨ä½“ã‚’æ¸¬å®š"]}),e.jsxs("div",{style:{background:"#fef3c7",padding:"12px",borderRadius:"8px",fontSize:"0.85rem",color:"#92400e"},children:["ğŸš€ 10mä»¥ä¸Šå¯¾å¿œ",e.jsx("br",{}),"âš¡ äººç‰©ã‚’å¤§ããæ’®å½±"]})]})]}),e.jsxs("div",{style:{background:"#fffbeb",border:"2px solid #fbbf24",borderRadius:"12px",padding:"20px",marginTop:"24px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px",color:"#92400e"},children:"ğŸ’¡ ãƒ‘ãƒ³æ’®å½±ã®ã‚³ãƒ„"}),e.jsxs("ul",{style:{fontSize:"0.9rem",color:"#78350f",margin:0,paddingLeft:"20px"},children:[e.jsx("li",{children:"äººç‰©ã‚’ç”»é¢ã®ä¸­å¤®ãƒ»å¤§ããä¿ã¤ï¼ˆç”»é¢ã®60-80%ï¼‰"}),e.jsx("li",{children:"ã‚¹ãƒ ãƒ¼ã‚ºã«è¿½å¾“ï¼ˆæ€¥ãªå‹•ãã‚’é¿ã‘ã‚‹ï¼‰"}),e.jsx("li",{children:"120fps ã§æ’®å½±ï¼ˆãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒ–ãƒ©ãƒ¼è»½æ¸›ï¼‰"}),e.jsx("li",{children:"å…‰å­¦ã‚ºãƒ¼ãƒ ã‚’æ´»ç”¨"})]})]})]});case 4:return e.jsxs("div",{className:"wizard-content",children:[e.jsxs("div",{className:"wizard-step-header",children:[e.jsx("h2",{className:"wizard-step-title",children:"ã‚¹ãƒ†ãƒƒãƒ— 4: å§¿å‹¢æ¨å®šä¸­"}),e.jsx("p",{className:"wizard-step-desc",children:"å„ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰å§¿å‹¢ã‚’æ¨å®šã—ã¦ã„ã¾ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚"})]}),e.jsxs("div",{className:"progress-area",children:[e.jsxs("div",{className:"progress-circle",children:[e.jsxs("svg",{viewBox:"0 0 100 100",className:"progress-ring",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#10b981",strokeWidth:"8",strokeDasharray:`${Zn*2.827}, 282.7`,strokeLinecap:"round",transform:"rotate(-90 50 50)"})]}),e.jsxs("div",{className:"progress-text",children:[Zn,"%"]})]}),e.jsx("div",{className:"progress-status",children:Fe})]}),Fe.includes("âŒ")&&e.jsx("div",{className:"wizard-actions",children:e.jsx("button",{className:"btn-ghost",onClick:()=>r(1),children:"æœ€åˆã«æˆ»ã‚‹"})})]});case 5:return te.length===0?e.jsxs("div",{className:"wizard-content",children:[e.jsx("div",{className:"wizard-step-header",children:e.jsx("h2",{className:"wizard-step-title",children:"âš ï¸ å§¿å‹¢æ¨å®šãŒå¿…è¦ã§ã™"})}),e.jsxs("div",{style:{background:"#fef2f2",border:"3px solid #dc2626",padding:"32px",borderRadius:"12px",margin:"32px 0",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"16px"},children:"ğŸš«"}),e.jsx("div",{style:{fontWeight:"bold",marginBottom:"16px",color:"#dc2626",fontSize:"1.3rem"},children:"å§¿å‹¢æ¨å®šãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsx("div",{style:{fontSize:"1rem",color:"#7f1d1d",marginBottom:"16px"},children:"åŒºé–“è¨­å®šã‚’è¡Œã†ã«ã¯ã€å…ˆã«ã‚¹ãƒ†ãƒƒãƒ—4ã§å§¿å‹¢æ¨å®šã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚"}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#7f1d1d",marginBottom:"24px",padding:"16px",background:"rgba(255,255,255,0.5)",borderRadius:"8px"},children:[e.jsx("strong",{children:"æ‰‹é †:"}),e.jsx("br",{}),"1. ã‚¹ãƒ†ãƒƒãƒ—4ã«æˆ»ã‚‹",e.jsx("br",{}),"2. ã€Œå§¿å‹¢æ¨å®šã‚’é–‹å§‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯",e.jsx("br",{}),"3. å®Œäº†ã¾ã§å¾…ã¤ï¼ˆæ•°åˆ†ã‹ã‹ã‚Šã¾ã™ï¼‰",e.jsx("br",{}),"4. è‡ªå‹•çš„ã«ã‚¹ãƒ†ãƒƒãƒ—5ã«é€²ã¿ã¾ã™"]}),e.jsx("button",{className:"btn-primary-large",onClick:()=>{r(4),setTimeout(()=>In(),500)},style:{fontSize:"1.1rem",padding:"16px 32px"},children:"ã‚¹ãƒ†ãƒƒãƒ—4ã«æˆ»ã£ã¦å§¿å‹¢æ¨å®šã‚’å®Ÿè¡Œ"})]})]}):e.jsxs("div",{className:"wizard-content",children:[e.jsxs("div",{className:"wizard-step-header",children:[e.jsx("h2",{className:"wizard-step-title",children:"ã‚¹ãƒ†ãƒƒãƒ— 5: åŒºé–“è¨­å®š"}),e.jsx("p",{className:"wizard-step-desc",children:"ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’å‹•ã‹ã—ã¦ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒ»ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥ãƒ»ä¸­é–“åœ°ç‚¹ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚"})]}),e.jsx("div",{className:"canvas-area",style:{marginBottom:"2rem"},children:e.jsx("canvas",{ref:xe,className:"preview-canvas"})}),e.jsxs("div",{style:{background:"#f9fafb",padding:"2rem",borderRadius:"12px",border:"2px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"1.5rem",color:"#374151",textAlign:"center"},children:"âœ¨ ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§åŒºé–“ã‚’è¨­å®š"}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"1rem",fontWeight:"bold",color:"#10b981"},children:"ğŸŸ¢ ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹"}),e.jsxs("span",{style:{fontSize:"0.95rem",color:"#6b7280",background:"#e5e7eb",padding:"4px 12px",borderRadius:"6px",fontWeight:"bold"},children:["Frame: ",Ee??0]})]}),e.jsx("input",{type:"range",min:0,max:Math.max(j-1,0),step:1,value:Ee??0,onChange:s=>{const g=Number(s.target.value);Kt(g),je(g);const b=te[g];if(b!=null&&b.landmarks){const u=b.landmarks[23],F=b.landmarks[24];u&&F&&mn((u.x+F.x)/2)}xn(0)},className:"section-slider start-slider"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginTop:"0.5rem",textAlign:"center"},children:"ğŸ’¡ ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’å‹•ã‹ã™ã¨ã€å‹•ç”»ãŒãã®ä½ç½®ã«ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¾ã™"}),Ee!==null&&!((i=te[Ee])!=null&&i.landmarks)&&e.jsxs("div",{style:{fontSize:"0.85rem",color:"#dc2626",marginTop:"0.75rem",padding:"10px 14px",background:"#fee2e2",borderRadius:"8px",border:"2px solid #fca5a5",fontWeight:"bold",textAlign:"center"},children:["âš ï¸ ã“ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã§å§¿å‹¢ãŒèªè­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"normal",color:"#991b1b"},children:"è·é›¢è¨ˆç®—ãŒä¸æ­£ç¢ºã«ãªã‚Šã¾ã™ã€‚å§¿å‹¢ãŒèªè­˜ã•ã‚Œã¦ã„ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚"})]})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"1rem",fontWeight:"bold",color:"#ef4444"},children:"ğŸ”´ ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥åœ°ç‚¹"}),e.jsxs("span",{style:{fontSize:"0.95rem",color:"#6b7280",background:"#e5e7eb",padding:"4px 12px",borderRadius:"6px",fontWeight:"bold"},children:["Frame: ",Xe??j-1]})]}),e.jsx("input",{type:"range",min:0,max:Math.max(j-1,0),step:1,value:Xe??j-1,onChange:s=>{const g=Number(s.target.value);Jt(g),je(g);const b=te[g];if(b!=null&&b.landmarks){const u=b.landmarks[23],F=b.landmarks[24];u&&F&&yn((u.x+F.x)/2)}fn(0)},className:"section-slider end-slider"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"1rem",fontWeight:"bold",color:"#f59e0b"},children:"ğŸŸ¡ ä¸­é–“åœ°ç‚¹ï¼ˆä»»æ„ï¼‰"}),e.jsxs("span",{style:{fontSize:"0.95rem",color:"#6b7280",background:"#e5e7eb",padding:"4px 12px",borderRadius:"6px",fontWeight:"bold"},children:["Frame: ",mt??Math.floor(j/2)]})]}),e.jsx("input",{type:"range",min:0,max:Math.max(j-1,0),step:1,value:mt??Math.floor(j/2),onChange:s=>{const g=Number(s.target.value);Yt(g),je(g);const b=te[g];if(b!=null&&b.landmarks){const u=b.landmarks[23],F=b.landmarks[24];u&&F&&bn((u.x+F.x)/2)}un(0)},className:"section-slider mid-slider"})]}),e.jsx("div",{style:{marginTop:"1.5rem",height:"40px",background:"linear-gradient(90deg, #e5e7eb 0%, #e5e7eb 100%)",borderRadius:"8px",position:"relative",overflow:"hidden"},children:e.jsxs("div",{style:{position:"absolute",left:`${(Ee??0)/Math.max(j-1,1)*100}%`,right:`${100-(Xe??j-1)/Math.max(j-1,1)*100}%`,height:"100%",background:"linear-gradient(90deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:["é¸æŠç¯„å›²: ",gt.actualCount," ãƒ•ãƒ¬ãƒ¼ãƒ "]})}),e.jsx("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"white",borderRadius:"8px",border:"1px solid #d1d5db"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem",textAlign:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"4px"},children:"åŒºé–“ãƒ•ãƒ¬ãƒ¼ãƒ æ•°"}),e.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#374151"},children:gt.actualCount})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"4px"},children:"åŒºé–“æ™‚é–“"}),e.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#374151"},children:[Dt!=null?Dt.toFixed(3):"ãƒ¼"," ç§’"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"4px"},children:"å¹³å‡é€Ÿåº¦"}),e.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:"bold",color:"#374151"},children:[jn!=null?jn.toFixed(3):"ãƒ¼"," m/s"]})]})]})})]}),e.jsxs("div",{style:{marginTop:"2rem",background:"#f0fdf4",border:"2px solid #10b981",borderRadius:"12px",padding:"20px",marginBottom:"24px"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"bold",marginBottom:"12px",color:"#059669"},children:"ğŸ èµ°è¡Œã‚¿ã‚¤ãƒ—ã‚’é¸æŠ"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:()=>is("accel"),style:{flex:1,minWidth:"180px",padding:"16px",borderRadius:"8px",border:Ze==="accel"?"3px solid #10b981":"2px solid #d1d5db",background:Ze==="accel"?"#d1fae5":"white",cursor:"pointer",fontWeight:Ze==="accel"?"bold":"normal",transition:"all 0.2s",textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"1.3rem",marginBottom:"8px"},children:"ğŸƒâ€â™‚ï¸ åŠ é€Ÿèµ°ï¼ˆãƒ•ãƒ©ã‚¤ãƒ³ã‚°ï¼‰"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#065f46",lineHeight:"1.5"},children:[e.jsx("strong",{children:"åŠ©èµ°ã‚ã‚Š"}),"ã®ã‚¹ã‚¿ãƒ¼ãƒˆ",e.jsx("br",{}),"â€¢ ã‚¹ã‚¿ãƒ¼ãƒˆãƒ©ã‚¤ãƒ³ã‹ã‚‰ã®1æ­©ç›®ã¯ç‰¹åˆ¥æ‰±ã„ã—ãªã„",e.jsx("br",{}),"â€¢ å„ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã¯æ¥åœ°â†’æ¥åœ°ã§è¨ˆç®—",e.jsx("br",{}),"â€¢ 10måŒºé–“å†…ã§ã®è²¢çŒ®è·é›¢ã‚‚è¡¨ç¤º"]})]}),e.jsxs("button",{onClick:()=>is("dash"),style:{flex:1,minWidth:"180px",padding:"16px",borderRadius:"8px",border:Ze==="dash"?"3px solid #10b981":"2px solid #d1d5db",background:Ze==="dash"?"#d1fae5":"white",cursor:"pointer",fontWeight:Ze==="dash"?"bold":"normal",transition:"all 0.2s",textAlign:"left"},children:[e.jsx("div",{style:{fontSize:"1.3rem",marginBottom:"8px"},children:"ğŸš€ ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥"}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#065f46",lineHeight:"1.5"},children:[e.jsx("strong",{children:"é™æ­¢çŠ¶æ…‹"}),"ã‹ã‚‰ã®ã‚¹ã‚¿ãƒ¼ãƒˆ",e.jsx("br",{}),"â€¢ 1æ­©ç›®ã¯ã€Œ0mâ†’1stæ¥åœ°ã€ã¨ã—ã¦è¨˜éŒ²",e.jsx("br",{}),"â€¢ ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã®1æ­©ç›®ã¨ã—ã¦é‡è¦",e.jsx("br",{}),"â€¢ 2æ­©ç›®ä»¥é™ã¯æ¥åœ°â†’æ¥åœ°ã§è¨ˆç®—"]})]})]}),e.jsxs("div",{style:{marginTop:"12px",padding:"10px",background:"#ecfdf5",borderRadius:"8px",fontSize:"0.85rem",color:"#047857"},children:[e.jsx("strong",{children:"ğŸ“ é¸æŠä¸­:"})," ",Ze==="dash"?"ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ - 1æ­©ç›®ã¯0mã‹ã‚‰ã®è·é›¢ã¨ã—ã¦ç‰¹åˆ¥è¨ˆç®—":"åŠ é€Ÿèµ° - å…¨ã¦ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’æ¥åœ°â†’æ¥åœ°ã§å‡ä¸€ã«è¨ˆç®—"]})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fef9e7 100%)",border:"3px solid #f59e0b",borderRadius:"12px",padding:"24px",margin:"24px 0"},children:[e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"16px",color:"#92400e",display:"flex",alignItems:"center",gap:"8px"},children:"âš ï¸ é‡è¦ï¼šå®Ÿæ¸¬è·é›¢ã®å…¥åŠ›ãŒå¿…é ˆã§ã™"}),e.jsxs("div",{style:{fontSize:"0.95rem",color:"#78350f",padding:"16px",background:"rgba(255,255,255,0.9)",borderRadius:"8px",lineHeight:"1.8"},children:[e.jsx("strong",{children:"ğŸ“ ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ãƒ»é€Ÿåº¦ã‚’æ­£ç¢ºã«è¨ˆç®—ã™ã‚‹ã«ã¯ï¼š"}),e.jsx("br",{}),e.jsx("br",{}),"1ï¸âƒ£ ",e.jsx("strong",{children:"ã‚¹ã‚¿ãƒ¼ãƒˆä½ç½®ã‹ã‚‰ãƒ•ã‚£ãƒ‹ãƒƒã‚·ãƒ¥ä½ç½®ã¾ã§ã®å®Ÿæ¸¬è·é›¢"}),"ã‚’ãƒ¡ã‚¸ãƒ£ãƒ¼ã§æ¸¬å®š",e.jsx("br",{}),"2ï¸âƒ£ æ¸¬å®šã—ãŸè·é›¢ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰ã‚’å…¥åŠ›",e.jsx("br",{}),"3ï¸âƒ£ ã‚·ã‚¹ãƒ†ãƒ ãŒå„ã‚¹ãƒ†ãƒƒãƒ—ã®è…°ã®ç§»å‹•æ¯”ç‡ã‹ã‚‰ã€å€‹åˆ¥ã®ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã‚’è‡ªå‹•è¨ˆç®—",e.jsx("br",{}),e.jsx("br",{}),"ğŸ’¡ ",e.jsx("strong",{children:"ä¾‹ï¼š"})," 10måŒºé–“ã®å ´åˆ â†’ ã€Œ10ã€ã¨å…¥åŠ›",e.jsx("br",{}),"âœ… å„ã‚¹ãƒ†ãƒƒãƒ—ãŒå€‹åˆ¥ã«è¨ˆç®—ã•ã‚Œã¾ã™ï¼ˆä¾‹: 1.8m, 2.1m, 1.9m...ï¼‰"]})]}),e.jsxs("div",{className:"wizard-actions",children:[e.jsx("button",{className:"btn-ghost",onClick:()=>r(1),children:"æœ€åˆã«æˆ»ã‚‹"}),e.jsx("button",{className:"btn-primary-large",onClick:()=>{Ee===null&&Kt(Math.floor(j*.1)),Xe===null&&Jt(Math.floor(j*.9)),mt===null&&Yt(Math.floor(j/2)),r(6)},children:"æ¬¡ã¸ï¼šæ¤œå‡ºãƒ¢ãƒ¼ãƒ‰é¸æŠ"})]})]});case 6:return e.jsxs("div",{className:`wizard-content ${Te?"step-6":""}`,children:[e.jsxs("div",{className:"wizard-step-header",children:[e.jsxs("h2",{className:"wizard-step-title",children:["ã‚¹ãƒ†ãƒƒãƒ— 6: ",Te?"æ¥åœ°ãƒ»é›¢åœ°ãƒãƒ¼ã‚¯":"æ¤œå‡ºãƒ¢ãƒ¼ãƒ‰é¸æŠ"]}),Te?e.jsxs("div",{style:{background:Te===3?"#f0fdf4":"#eff6ff",padding:"16px",borderRadius:"12px",marginTop:"16px",border:Te===3?"2px solid #10b981":"2px solid #3b82f6"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("div",{style:{fontWeight:"bold",color:Te===3?"#065f46":"#1e40af"},children:Te===3?"âœ‹ æ‰‹å‹•ãƒãƒ¼ã‚¯è¨­å®š":"ğŸ¯ åŠè‡ªå‹•è¨­å®š"}),e.jsx("button",{onClick:()=>{window.confirm(`æ¤œå‡ºãƒ¢ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¾ã™ã‹ï¼Ÿ
ï¼ˆãƒãƒ¼ã‚«ãƒ¼ã¯ã‚¯ãƒªã‚¢ã•ã‚Œã¾ã™ï¼‰`)&&(ps(),vn(null),on(null),Ht(0))},style:{padding:"6px 12px",fontSize:"0.85rem",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"},children:"ğŸ”„ ãƒ¢ãƒ¼ãƒ‰å¤‰æ›´"})]}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#4b5563",lineHeight:"1.6"},children:Te===3?n?e.jsxs(e.Fragment,{children:["ğŸ“± ç”»é¢ä¸‹ã®",e.jsx("strong",{children:"ã€Œæ¥åœ° / é›¢åœ°ãƒãƒ¼ã‚¯ã€ãƒœã‚¿ãƒ³"}),"ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã€",e.jsx("strong",{children:"æ¥åœ°"}),"â†’",e.jsx("strong",{children:"é›¢åœ°"}),"â†’",e.jsx("strong",{children:"æ¥åœ°"}),"â†’... ã®é †ã«ãƒãƒ¼ã‚¯",e.jsx("br",{}),e.jsx("span",{style:{color:"#059669"},children:"ğŸ’¡ ãƒãƒ¼ã‚«ãƒ¼ä¸€è¦§ã‹ã‚‰1æ­©ç›®ã‚’å«ã‚ã¦è‡ªç”±ã«ä¿®æ­£ã§ãã¾ã™"})]}):e.jsxs(e.Fragment,{children:[e.jsx("kbd",{style:{background:"#e5e7eb",padding:"2px 6px",borderRadius:"4px"},children:"Space"}),"ã‚­ãƒ¼ã§",e.jsx("strong",{children:"æ¥åœ°"}),"â†’",e.jsx("strong",{children:"é›¢åœ°"}),"â†’",e.jsx("strong",{children:"æ¥åœ°"}),"â†’... ã®é †ã«ãƒãƒ¼ã‚¯",e.jsx("br",{}),e.jsx("span",{style:{color:"#059669"},children:"ğŸ’¡ ä¸‹ã®ãƒãƒ¼ã‚«ãƒ¼ä¸€è¦§ã‹ã‚‰1æ­©ç›®å«ã‚ã™ã¹ã¦ä¿®æ­£å¯èƒ½"})]}):n?e.jsxs(e.Fragment,{children:["ğŸ“± ç”»é¢ä¸‹ã®",e.jsx("strong",{children:"ã€Œæ¥åœ°ãƒãƒ¼ã‚¯ã€ãƒœã‚¿ãƒ³"}),"ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨",e.jsx("strong",{children:"æ¥åœ°"}),"ã‚’ç™»éŒ²ï¼ˆé›¢åœ°ã¯è‡ªå‹•æ¤œå‡ºï¼‰",e.jsx("br",{}),e.jsx("span",{style:{color:"#3b82f6"},children:"ğŸ’¡ ãƒãƒ¼ã‚«ãƒ¼ä¸€è¦§ã‹ã‚‰ä¿®æ­£ã§ãã¾ã™"})]}):e.jsxs(e.Fragment,{children:[e.jsx("kbd",{style:{background:"#e5e7eb",padding:"2px 6px",borderRadius:"4px"},children:"Space"}),"ã‚­ãƒ¼ã§",e.jsx("strong",{children:"æ¥åœ°"}),"ã‚’ãƒãƒ¼ã‚¯ï¼ˆé›¢åœ°ã¯è‡ªå‹•æ¤œå‡ºï¼‰",e.jsx("br",{}),e.jsx("span",{style:{color:"#3b82f6"},children:"ğŸ’¡ ä¸‹ã®ãƒãƒ¼ã‚«ãƒ¼ä¸€è¦§ã‹ã‚‰ä¿®æ­£å¯èƒ½"})]})})]}):e.jsxs("div",{style:{background:"#f0f9ff",padding:"24px",borderRadius:"12px",marginTop:"16px",border:"2px solid #3b82f6"},children:[e.jsx("h3",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"16px",color:"#1e40af"},children:"ğŸ“Š æ¤œå‡ºãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠã—ã¦ãã ã•ã„"}),e.jsxs("div",{style:{background:"#d1fae5",padding:"14px 18px",borderRadius:"10px",marginBottom:"16px",border:"2px solid #10b981"},children:[e.jsx("p",{style:{fontWeight:"bold",color:"#065f46",margin:0,fontSize:"1rem"},children:"âœ… æ¨å¥¨ï¼šæ‰‹å‹•ãƒãƒ¼ã‚¯è¨­å®š"}),e.jsxs("p",{style:{fontSize:"0.9rem",color:"#047857",margin:"6px 0 0 0",lineHeight:"1.6"},children:["ãƒ–ãƒ¬ãƒ¼ã‚­ç‡ãƒ»ã‚­ãƒƒã‚¯ç‡ã®è§£æã«ã¯ã€Œ",e.jsx("strong",{children:"æ‰‹å‹•ãƒãƒ¼ã‚¯è¨­å®š"}),"ã€ãŒå¿…é ˆã§ã™ã€‚",e.jsx("br",{}),"åŠè‡ªå‹•è¨­å®šã§ã¯ã€ãƒ”ãƒƒãƒã¨ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®ã¿è§£æã§ãã¾ã™ã€‚"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("button",{onClick:()=>{vn(3),on(3),Ht(2),Sn({contactFrame:null,toeOffFrame:null}),Ee!==null&&je(Ee)},style:{padding:"20px",borderRadius:"12px",border:"3px solid #10b981",background:"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)",textAlign:"left",cursor:"pointer",transition:"all 0.2s",fontWeight:"bold",boxShadow:"0 4px 6px rgba(16, 185, 129, 0.2)"},onMouseEnter:s=>{s.currentTarget.style.transform="translateY(-2px)",s.currentTarget.style.boxShadow="0 6px 12px rgba(16, 185, 129, 0.3)"},onMouseLeave:s=>{s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="0 4px 6px rgba(16, 185, 129, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"1.8rem"},children:"âœ‹"}),e.jsx("span",{style:{fontSize:"1.15rem",color:"#065f46"},children:"1. æ‰‹å‹•ãƒãƒ¼ã‚¯è¨­å®šã€æ¨å¥¨ã€‘"})]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#047857",marginLeft:"48px"},children:["æ¥åœ°ã¨é›¢åœ°ã‚’å…¨ã¦æ‰‹å‹•ã§ãƒãƒ¼ã‚¯",e.jsx("br",{}),"âœ… æœ€é«˜ç²¾åº¦ã®è§£æï¼ˆæ¥åœ°æ™‚é–“ãƒ»ãƒ–ãƒ¬ãƒ¼ã‚­ç‡ãƒ»ã‚­ãƒƒã‚¯ç‡ãƒ»ãƒ”ãƒƒãƒãƒ»ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ï¼‰",e.jsx("br",{}),"âœ… 1æ­©ç›®ã‹ã‚‰è‡ªç”±ã«ä¿®æ­£å¯èƒ½"]})]}),e.jsxs("button",{onClick:()=>{vn(2),on(2),Ht(2),Sn({contactFrame:null,toeOffFrame:null}),Ee!==null&&je(Ee)},style:{padding:"16px",borderRadius:"10px",border:"2px solid #3b82f6",background:"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)",textAlign:"left",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:s=>{s.currentTarget.style.transform="translateY(-2px)",s.currentTarget.style.boxShadow="0 4px 8px rgba(59, 130, 246, 0.2)"},onMouseLeave:s=>{s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:"ğŸ¯"}),e.jsx("span",{style:{fontSize:"1.05rem",fontWeight:"bold",color:"#1e40af"},children:"2. åŠè‡ªå‹•è¨­å®š"})]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#1e3a8a",marginLeft:"44px"},children:["æ¥åœ°ã®ã¿æ‰‹å‹•ãƒãƒ¼ã‚¯ã€é›¢åœ°ã¯è‡ªå‹•æ¤œå‡º",e.jsx("br",{}),"è§£æå†…å®¹ï¼šãƒ”ãƒƒãƒã¨ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰ã®ã¿",e.jsx("br",{}),"âš ï¸ æ¥åœ°æ™‚é–“ãƒ»ãƒ–ãƒ¬ãƒ¼ã‚­ç‡ãƒ»ã‚­ãƒƒã‚¯ç‡ã¯éå¯¾å¿œ"]})]})]})]})]}),Te&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"marker-controls",children:[e.jsxs("button",{className:Pe?"toggle-btn active":"toggle-btn",onClick:()=>at(s=>!s),children:["è¶³å…ƒæ‹¡å¤§ ",Pe?"ON":"OFF"]}),Pe&&e.jsxs("label",{className:"zoom-control",children:["å€ç‡:",e.jsx("input",{type:"range",min:1,max:5,step:.5,value:Ft,onChange:s=>$n(Number(s.target.value))}),Ft.toFixed(1),"x"]}),e.jsxs("button",{className:pt?"toggle-btn active":"toggle-btn",onClick:()=>gn(s=>!s),disabled:!te.length,children:["ã‚¹ã‚±ãƒ«ãƒˆãƒ³ ",pt?"ON":"OFF"]}),e.jsx("button",{className:"btn-ghost-small",onClick:ps,children:"ãƒãƒ¼ã‚«ãƒ¼ã‚¯ãƒªã‚¢"})]}),e.jsx("div",{className:"canvas-area",children:e.jsx("canvas",{ref:xe,className:"preview-canvas"})}),n&&e.jsx("div",{className:"mobile-marking-controls",children:e.jsxs("div",{className:"mobile-frame-nav",children:[e.jsx("button",{className:"btn-nav-arrow",onClick:()=>Je(-10),disabled:!Ae,children:"â—€â—€ -10"}),e.jsx("button",{className:"btn-nav-arrow",onClick:()=>Je(-1),disabled:!Ae,children:"â—€ -1"}),e.jsx("button",{className:"btn-nav-arrow",onClick:()=>Je(1),disabled:!Ae,children:"+1 â–¶"}),e.jsx("button",{className:"btn-nav-arrow",onClick:()=>Je(10),disabled:!Ae,children:"+10 â–¶â–¶"})]})}),n&&e.jsxs("div",{className:"mobile-marker-display",children:[Be.map((s,g)=>{if(s===pe){const b=g%2===0,u=b?"#10b981":"#ef4444",F=b?"æ¥åœ°":"é›¢åœ°",w=!b&&Te===2;return e.jsxs("div",{className:"marker-indicator",style:{backgroundColor:u,color:"white",padding:"20px",borderRadius:"12px",fontSize:"28px",fontWeight:"bold",textAlign:"center",boxShadow:"0 4px 8px rgba(0,0,0,0.3)"},children:[F," #",Math.floor(g/2)+1,w&&e.jsx("div",{style:{fontSize:"14px",marginTop:"4px"},children:"ï¼ˆè‡ªå‹•åˆ¤å®šï¼‰"})]},g)}return null}),Be.every(s=>s!==pe)&&e.jsx("button",{className:"btn-mark-contact-large",onClick:()=>{if(Ae){if(Te===2){const s=[...$e,pe];Qe(s),console.log(`ğŸ“ æ¥åœ°ãƒãƒ¼ã‚¯: ãƒ•ãƒ¬ãƒ¼ãƒ  ${pe}`);const g=gs(pe);g!==null?it([...qe,g]):console.warn(`âš ï¸ é›¢åœ°ãŒæ¤œå‡ºã§ãã¾ã›ã‚“ã§ã—ãŸï¼ˆæ¥åœ°: ${pe}ï¼‰`)}else if(Te===3)if($e.length===tt.length)Qe([...$e,pe]),console.log(`ğŸ“ æ¥åœ°ãƒãƒ¼ã‚¯: ãƒ•ãƒ¬ãƒ¼ãƒ  ${pe}`);else{const s=$e[$e.length-1];if(pe<=s){alert("é›¢åœ°ãƒ•ãƒ¬ãƒ¼ãƒ ã¯æ¥åœ°ãƒ•ãƒ¬ãƒ¼ãƒ ã‚ˆã‚Šå¾Œã«ã—ã¦ãã ã•ã„ã€‚");return}Pn([...tt,pe]),console.log(`ğŸ“ é›¢åœ°ãƒãƒ¼ã‚¯: ãƒ•ãƒ¬ãƒ¼ãƒ  ${pe}`)}}},disabled:!Ae,style:{width:"100%",padding:"20px",fontSize:"18px",fontWeight:"bold",background:Te===3&&$e.length!==tt.length?"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"12px",cursor:"pointer",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",touchAction:"manipulation"},children:Te===2?"ğŸ“ æ¥åœ°ãƒãƒ¼ã‚¯ï¼ˆé›¢åœ°è‡ªå‹•ï¼‰":$e.length===tt.length?"ğŸ“ æ¥åœ°ãƒãƒ¼ã‚¯":"ğŸ“ é›¢åœ°ãƒãƒ¼ã‚¯"})]}),!n&&e.jsxs("div",{style:{background:"#f3f4f6",padding:"16px",borderRadius:"8px",margin:"16px 0",fontSize:"0.9rem"},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",fontWeight:"bold"},children:"âŒ¨ï¸ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Space"}),": ",Te===2?"æ¥åœ°ãƒãƒ¼ã‚¯ï¼ˆé›¢åœ°è‡ªå‹•ï¼‰":$e.length===tt.length?"æ¥åœ°ãƒãƒ¼ã‚¯":"é›¢åœ°ãƒãƒ¼ã‚¯"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"â† / â†’"}),": 1ãƒ•ãƒ¬ãƒ¼ãƒ ç§»å‹•"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"â†‘ / â†“"}),": 10ãƒ•ãƒ¬ãƒ¼ãƒ ç§»å‹•"]})]})]}),n&&e.jsxs("div",{className:"mobile-view-options",children:[e.jsxs("button",{className:Pe?"toggle-btn active":"toggle-btn",onClick:()=>at(s=>!s),children:["è¶³å…ƒæ‹¡å¤§ ",Pe?"ON":"OFF"]}),Pe&&e.jsxs("div",{className:"zoom-slider-compact",children:[e.jsx("span",{style:{fontSize:"0.75rem",whiteSpace:"nowrap"},children:"å€ç‡:"}),e.jsx("input",{type:"range",min:1,max:5,step:.5,value:Ft,onChange:s=>$n(Number(s.target.value)),style:{flex:1,minWidth:"80px"}}),e.jsxs("span",{style:{fontSize:"0.85rem",fontWeight:"bold",minWidth:"35px",textAlign:"center"},children:[Ft.toFixed(1),"x"]})]}),e.jsxs("button",{className:pt?"toggle-btn active":"toggle-btn",onClick:()=>gn(s=>!s),disabled:!te.length,children:["ã‚¹ã‚±ãƒ«ãƒˆãƒ³ ",pt?"ON":"OFF"]})]}),e.jsxs("div",{className:"frame-control",children:[e.jsxs("div",{className:"frame-info",children:["ãƒ•ãƒ¬ãƒ¼ãƒ : ",bs," / ",ys," | ãƒãƒ¼ã‚«ãƒ¼æ•°:"," ",Be.length]}),e.jsx("input",{type:"range",min:0,max:Math.max(Ae?j-1:0,0),step:1,value:Ae?pe:0,onChange:ms,disabled:!Ae,className:"frame-range"}),e.jsxs("div",{className:"frame-buttons-compact",children:[e.jsx("button",{onClick:()=>Je(-10),disabled:!Ae,children:"-10"}),e.jsx("button",{onClick:()=>Je(-1),disabled:!Ae,children:"-1"}),e.jsx("button",{onClick:()=>Je(1),disabled:!Ae,children:"+1"}),e.jsx("button",{onClick:()=>Je(10),disabled:!Ae,children:"+10"})]})]}),!n&&Be.length>0&&e.jsxs("div",{style:{background:"#f9fafb",padding:"16px",borderRadius:"8px",margin:"16px 0",maxHeight:"500px",overflowY:"auto"},children:[e.jsxs("h4",{style:{margin:"0 0 12px 0",fontWeight:"bold"},children:["ğŸ“ ãƒãƒ¼ã‚«ãƒ¼ä¸€è¦§ï¼ˆå…¨ ",Math.floor(Be.length/2)," ã‚¹ãƒ†ãƒƒãƒ—ï¼‰"]}),e.jsx("div",{style:{display:"grid",gap:"8px"},children:Array.from({length:Math.floor(Be.length/2)},(s,g)=>{const b=Be[g*2],u=Be[g*2+1],F=Te===2;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px",background:"white",borderRadius:"8px",fontSize:"0.9rem",border:pe===b||pe===u?"2px solid #3b82f6":"1px solid #e5e7eb"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("strong",{children:["ã‚¹ãƒ†ãƒƒãƒ— ",g+1,":"]}),e.jsxs("span",{style:{color:"#10b981",fontWeight:"bold"},children:["ğŸŸ¢ æ¥åœ° ",b]}),e.jsx("span",{children:"â†’"}),e.jsxs("span",{style:{color:"#ef4444",fontWeight:"bold"},children:["ğŸ”´ é›¢åœ° ",u,F&&e.jsx("span",{style:{fontSize:"0.75rem",marginLeft:"4px",color:"#6b7280"},children:"(è‡ªå‹•)"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280",minWidth:"80px"},children:"æ¥åœ°ã‚’å¾®èª¿æ•´:"}),e.jsx("button",{onClick:()=>{const w=[...$e],B=[...qe],q=[...tt],X=w[g];if(X===void 0){console.error(`ã‚¨ãƒ©ãƒ¼: ã‚¹ãƒ†ãƒƒãƒ— ${g+1} ã®æ¥åœ°ãƒ•ãƒ¬ãƒ¼ãƒ ãŒå­˜åœ¨ã—ã¾ã›ã‚“`);return}const z=g>0?Te===3?q[g-1]:B[g-1]:0,U=X-5,O=z>0?z+1:0,ne=Math.max(O,U);w[g]=ne,Qe(w),je(ne),console.log(`-5ãƒœã‚¿ãƒ³: ã‚¹ãƒ†ãƒƒãƒ— ${g+1} ã®æ¥åœ°ã‚’ ${X} â†’ ${ne} ã«ä¿®æ­£ï¼ˆç›®æ¨™=${U}, æœ€å°åˆ¶é™=${O}, prevToeOff=${z}ï¼‰`)},style:{padding:"4px 12px",fontSize:"0.8rem",borderRadius:"4px",border:"1px solid #d1d5db",background:"white",cursor:"pointer",fontWeight:"bold"},children:"-5"}),e.jsx("button",{onClick:()=>{const w=[...$e],B=[...qe],q=[...tt],X=w[g];if(X===void 0)return;const z=g>0?Te===3?q[g-1]:B[g-1]:0,U=X-1,O=z>0?z+1:0,ne=Math.max(O,U);w[g]=ne,Qe(w),je(ne),console.log(`-1ãƒœã‚¿ãƒ³: ã‚¹ãƒ†ãƒƒãƒ— ${g+1} ã®æ¥åœ°ã‚’ ${X} â†’ ${ne} ã«ä¿®æ­£ï¼ˆç›®æ¨™=${U}, æœ€å°åˆ¶é™=${O}ï¼‰`)},style:{padding:"4px 12px",fontSize:"0.8rem",borderRadius:"4px",border:"1px solid #d1d5db",background:"white",cursor:"pointer",fontWeight:"bold"},children:"-1"}),e.jsx("button",{onClick:()=>{const w=[...$e],B=[...qe],q=[...tt],X=w[g],z=Te===3?q[g]:B[g];if(X===void 0||z===void 0)return;const U=X+1,O=z>0?z-1:j-1,ne=Math.min(O,U);w[g]=ne,Qe(w),je(ne),console.log(`+1ãƒœã‚¿ãƒ³: ã‚¹ãƒ†ãƒƒãƒ— ${g+1} ã®æ¥åœ°ã‚’ ${X} â†’ ${ne} ã«ä¿®æ­£ï¼ˆç›®æ¨™=${U}, æœ€å¤§åˆ¶é™=${O}, toeOff=${z}ï¼‰`)},style:{padding:"4px 12px",fontSize:"0.8rem",borderRadius:"4px",border:"1px solid #d1d5db",background:"white",cursor:"pointer",fontWeight:"bold"},children:"+1"}),e.jsx("button",{onClick:()=>{const w=[...$e],B=[...qe],q=[...tt],X=w[g],z=Te===3?q[g]:B[g];if(X===void 0||z===void 0)return;const U=X+5,O=z>0?z-1:j-1,ne=Math.min(O,U);w[g]=ne,Qe(w),je(ne),console.log(`+5ãƒœã‚¿ãƒ³: ã‚¹ãƒ†ãƒƒãƒ— ${g+1} ã®æ¥åœ°ã‚’ ${X} â†’ ${ne} ã«ä¿®æ­£ï¼ˆç›®æ¨™=${U}, æœ€å¤§åˆ¶é™=${O}, toeOff=${z}ï¼‰`)},style:{padding:"4px 12px",fontSize:"0.8rem",borderRadius:"4px",border:"1px solid #d1d5db",background:"white",cursor:"pointer",fontWeight:"bold"},children:"+5"}),e.jsx("button",{onClick:()=>{je(b)},style:{padding:"4px 12px",fontSize:"0.8rem",borderRadius:"4px",border:"1px solid #10b981",background:"#f0fdf4",color:"#10b981",cursor:"pointer",fontWeight:"bold",marginLeft:"8px"},children:"ğŸ“ è¡¨ç¤º"})]}),F&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"#6b7280",minWidth:"80px"},children:"é›¢åœ°ã‚’å¾®èª¿æ•´:"}),e.jsx("button",{onClick:()=>{const w=[...qe],B=[...$e],q=w[g],X=B[g];if(q===void 0||X===void 0){console.error(`ã‚¨ãƒ©ãƒ¼: ã‚¹ãƒ†ãƒƒãƒ— ${g+1} ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãŒå­˜åœ¨ã—ã¾ã›ã‚“ (toe=${q}, contact=${X})`);return}const z=q-5,U=X+1,O=Math.max(U,z);w[g]=O,it(w),je(O),console.log(`-5ãƒœã‚¿ãƒ³: ã‚¹ãƒ†ãƒƒãƒ— ${g+1} ã®é›¢åœ°ã‚’ ${q} â†’ ${O} ã«ä¿®æ­£ï¼ˆç›®æ¨™=${z}, æœ€å°åˆ¶é™=${U}, contact=${X}ï¼‰`)},style:{padding:"4px 12px",fontSize:"0.8rem",borderRadius:"4px",border:"1px solid #d1d5db",background:"white",cursor:"pointer",fontWeight:"bold"},children:"-5"}),e.jsx("button",{onClick:()=>{const w=[...qe],B=[...$e],q=w[g],X=B[g],z=q-1,U=X+1,O=Math.max(U,z);w[g]=O,it(w),je(O),console.log(`-1ãƒœã‚¿ãƒ³: ã‚¹ãƒ†ãƒƒãƒ— ${g+1} ã®é›¢åœ°ã‚’ ${q} â†’ ${O} ã«ä¿®æ­£ï¼ˆç›®æ¨™=${z}, æœ€å°åˆ¶é™=${U}, contact=${X}ï¼‰`)},style:{padding:"4px 12px",fontSize:"0.8rem",borderRadius:"4px",border:"1px solid #d1d5db",background:"white",cursor:"pointer",fontWeight:"bold"},children:"-1"}),e.jsx("button",{onClick:()=>{const w=[...qe],B=[...$e],q=w[g],X=q+1,z=g+1<B.length?B[g+1]:j,U=Math.min(z-1,X,j-1);w[g]=U,it(w),je(U),console.log(`+1ãƒœã‚¿ãƒ³: ã‚¹ãƒ†ãƒƒãƒ— ${g+1} ã®é›¢åœ°ã‚’ ${q} â†’ ${U} ã«ä¿®æ­£ï¼ˆç›®æ¨™=${X}, nextContact=${z}ï¼‰`)},style:{padding:"4px 12px",fontSize:"0.8rem",borderRadius:"4px",border:"1px solid #d1d5db",background:"white",cursor:"pointer",fontWeight:"bold"},children:"+1"}),e.jsx("button",{onClick:()=>{const w=[...qe],B=[...$e],q=w[g],X=q+5,z=g+1<B.length?B[g+1]:j,U=Math.min(z-1,X,j-1);w[g]=U,it(w),je(U),console.log(`+5ãƒœã‚¿ãƒ³: ã‚¹ãƒ†ãƒƒãƒ— ${g+1} ã®é›¢åœ°ã‚’ ${q} â†’ ${U} ã«ä¿®æ­£ï¼ˆç›®æ¨™=${X}, nextContact=${z}ï¼‰`)},style:{padding:"4px 12px",fontSize:"0.8rem",borderRadius:"4px",border:"1px solid #d1d5db",background:"white",cursor:"pointer",fontWeight:"bold"},children:"+5"}),e.jsx("button",{onClick:()=>{je(u)},style:{padding:"4px 12px",fontSize:"0.8rem",borderRadius:"4px",border:"1px solid #3b82f6",background:"#eff6ff",color:"#3b82f6",cursor:"pointer",fontWeight:"bold",marginLeft:"8px"},children:"ğŸ“ è¡¨ç¤º"})]})]},g)})})]}),Le&&e.jsxs("div",{className:"angle-display-compact",children:[e.jsx("h4",{children:"ç¾åœ¨ãƒ•ãƒ¬ãƒ¼ãƒ ã®è§’åº¦"}),e.jsxs("div",{className:"angle-grid-compact",children:[e.jsxs("div",{children:["ä½“å¹¹: ",(c=Le.trunkAngle)==null?void 0:c.toFixed(1),"Â°",e.jsx("span",{style:{fontSize:"0.7rem",marginLeft:"4px",color:"var(--gray-500)"},children:Le.trunkAngle&&Le.trunkAngle<85?"(å‰å‚¾)":Le.trunkAngle&&Le.trunkAngle>95?"(å¾Œå‚¾)":"(å‚ç›´)"})]}),e.jsxs("div",{children:["å·¦è†: ",(o=Le.kneeFlex.left)==null?void 0:o.toFixed(1),"Â°"]}),e.jsxs("div",{children:["å³è†: ",(x=Le.kneeFlex.right)==null?void 0:x.toFixed(1),"Â°"]}),e.jsxs("div",{children:["å·¦è‚˜: ",((y=Le.elbowAngle.left)==null?void 0:y.toFixed(1))??"ãƒ¼","Â°"]}),e.jsxs("div",{children:["å³è‚˜: ",((m=Le.elbowAngle.right)==null?void 0:m.toFixed(1))??"ãƒ¼","Â°"]})]})]}),e.jsxs("div",{className:"wizard-actions",children:[e.jsx("button",{className:"btn-ghost",onClick:()=>r(1),children:"æœ€åˆã«æˆ»ã‚‹"}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{className:"btn-ghost",onClick:()=>r(5),children:"å‰ã¸"}),e.jsx("button",{className:"btn-primary-large",onClick:()=>r(7),disabled:Be.length<3,children:"æ¬¡ã¸ï¼šè§£æçµæœ"})]})]})]})]});case 7:return e.jsxs("div",{className:"wizard-content",children:[e.jsxs("div",{className:"wizard-step-header",children:[e.jsx("h2",{className:"wizard-step-title",children:"ã‚¹ãƒ†ãƒƒãƒ— 8: è§£æçµæœ"}),e.jsx("p",{className:"wizard-step-desc",children:"ã‚¹ãƒ†ãƒƒãƒ—è§£æçµæœã¨ã‚°ãƒ©ãƒ•ã‚’ç¢ºèªã§ãã¾ã™ã€‚ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§å„ãƒ•ãƒ¬ãƒ¼ãƒ ã®è§’åº¦ã‚’ç¢ºèªã§ãã¾ã™ã€‚"})]}),e.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e4,display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsx("button",{onClick:()=>{var s;return(s=document.getElementById("frame-viewer"))==null?void 0:s.scrollIntoView({behavior:"smooth",block:"start"})},style:{width:"50px",height:"50px",borderRadius:"50%",background:"rgba(103, 126, 234, 0.9)",color:"white",border:"none",fontSize:"24px",cursor:"pointer",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},title:"ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã¸",children:"â†‘"}),e.jsx("button",{onClick:()=>window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),style:{width:"50px",height:"50px",borderRadius:"50%",background:"rgba(118, 75, 162, 0.9)",color:"white",border:"none",fontSize:"24px",cursor:"pointer",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},title:"ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã¸",children:"â†“"})]}),e.jsxs("div",{className:"result-viewer-card",id:"frame-viewer",children:[e.jsxs("div",{className:"viewer-controls",children:[e.jsxs("button",{className:Pe?"toggle-btn active":"toggle-btn",onClick:()=>at(s=>!s),children:["è¶³å…ƒæ‹¡å¤§ ",Pe?"ON":"OFF"]}),Pe&&e.jsxs("label",{className:"zoom-control",children:["å€ç‡:",e.jsx("input",{type:"range",min:1,max:5,step:.5,value:Ft,onChange:s=>$n(Number(s.target.value))}),Ft.toFixed(1),"x"]}),e.jsxs("button",{className:pt?"toggle-btn active":"toggle-btn",onClick:()=>gn(s=>!s),disabled:!te.length,children:["ã‚¹ã‚±ãƒ«ãƒˆãƒ³ ",pt?"ON":"OFF"]})]}),e.jsx("div",{className:"canvas-area",children:e.jsx("canvas",{ref:xe,className:"preview-canvas"})}),e.jsxs("div",{className:"frame-control",children:[e.jsxs("div",{className:"frame-info",children:["ãƒ•ãƒ¬ãƒ¼ãƒ : ",bs," / ",ys]}),e.jsx("input",{type:"range",min:0,max:Math.max(Ae?j-1:0,0),step:1,value:Ae?pe:0,onChange:ms,disabled:!Ae,className:"frame-range"}),e.jsxs("div",{className:"frame-buttons-compact",children:[e.jsx("button",{onClick:()=>Je(-10),disabled:!Ae,children:"-10"}),e.jsx("button",{onClick:()=>Je(-1),disabled:!Ae,children:"-1"}),e.jsx("button",{onClick:()=>Je(1),disabled:!Ae,children:"+1"}),e.jsx("button",{onClick:()=>Je(10),disabled:!Ae,children:"+10"})]})]}),Le&&e.jsxs("div",{className:"angle-display-result",children:[e.jsxs("h4",{children:["ç¾åœ¨ãƒ•ãƒ¬ãƒ¼ãƒ  (",pe,") ã®é–¢ç¯€è§’åº¦ã¨è¶³å…ˆè·é›¢"]}),e.jsxs("p",{style:{fontSize:"0.8rem",color:"#6b7280",marginTop:"0.25rem",marginBottom:"0.75rem"},children:["â€» å¤§è…¿è§’åº¦ï¼šé‰›ç›´ä¸‹å‘ãã‚’0Â°ã€å‰æ–¹ãŒãƒã‚¤ãƒŠã‚¹ï¼ˆ-ï¼‰ã€å¾Œæ–¹ãŒãƒ—ãƒ©ã‚¹ï¼ˆ+ï¼‰",e.jsx("br",{}),"â€» è¶³å…ˆè·é›¢ï¼šå¤§è»¢å­ã‹ã‚‰é‰›ç›´ä¸‹æ–¹å‘ã‚’0cmã€å‰æ–¹ãŒãƒã‚¤ãƒŠã‚¹ï¼ˆ-ï¼‰ã€å¾Œæ–¹ãŒãƒ—ãƒ©ã‚¹ï¼ˆ+ï¼‰"]}),e.jsxs("div",{className:"angle-grid-result",children:[e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"ä½“å¹¹è§’åº¦"}),e.jsxs("span",{className:"angle-value",children:[(M=Le.trunkAngle)==null?void 0:M.toFixed(1),"Â°"]}),e.jsx("span",{className:"angle-hint",children:Le.trunkAngle&&Le.trunkAngle<85?"å‰å‚¾":Le.trunkAngle&&Le.trunkAngle>95?"å¾Œå‚¾":"å‚ç›´"})]}),e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"å·¦ å¤§è…¿è§’"}),e.jsxs("span",{className:"angle-value",children:[(H=Le.thighAngle.left)==null?void 0:H.toFixed(1),"Â°"]})]}),e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"å³ å¤§è…¿è§’"}),e.jsxs("span",{className:"angle-value",children:[(T=Le.thighAngle.right)==null?void 0:T.toFixed(1),"Â°"]})]}),e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"å·¦ è¶³å…ˆè·é›¢"}),e.jsxs("span",{className:"angle-value",children:[((S=Le.toeHorizontalDistance.left)==null?void 0:S.toFixed(1))??"ãƒ¼","cm"]})]}),e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"å³ è¶³å…ˆè·é›¢"}),e.jsxs("span",{className:"angle-value",children:[((k=Le.toeHorizontalDistance.right)==null?void 0:k.toFixed(1))??"ãƒ¼","cm"]})]}),e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"å·¦ è†å±ˆæ›²"}),e.jsxs("span",{className:"angle-value",children:[(P=Le.kneeFlex.left)==null?void 0:P.toFixed(1),"Â°"]})]}),e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"å³ è†å±ˆæ›²"}),e.jsxs("span",{className:"angle-value",children:[(I=Le.kneeFlex.right)==null?void 0:I.toFixed(1),"Â°"]})]}),e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"å·¦ è¶³é¦–"}),e.jsxs("span",{className:"angle-value",children:[(re=Le.ankleFlex.left)==null?void 0:re.toFixed(1),"Â°"]})]}),e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"å³ è¶³é¦–"}),e.jsxs("span",{className:"angle-value",children:[(K=Le.ankleFlex.right)==null?void 0:K.toFixed(1),"Â°"]})]}),e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"å·¦ è‚˜å±ˆæ›²"}),e.jsxs("span",{className:"angle-value",children:[((G=Le.elbowAngle.left)==null?void 0:G.toFixed(1))??"ãƒ¼","Â°"]})]}),e.jsxs("div",{className:"angle-item",children:[e.jsx("span",{className:"angle-label",children:"å³ è‚˜å±ˆæ›²"}),e.jsxs("span",{className:"angle-value",children:[((t=Le.elbowAngle.right)==null?void 0:t.toFixed(1))??"ãƒ¼","Â°"]})]})]})]})]}),e.jsxs("div",{className:"results-layout",children:[$t&&e.jsxs("div",{className:"result-card",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},children:[e.jsx("h3",{className:"result-card-title",style:{color:"white",display:"flex",alignItems:"center",gap:"8px"},children:"ğŸ¤– AI ãƒ•ã‚©ãƒ¼ãƒ è©•ä¾¡"}),e.jsxs("div",{style:{padding:"20px",background:"rgba(255,255,255,0.15)",borderRadius:"12px",marginBottom:"20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"8px"},children:$t.overallRating}),e.jsx("div",{style:{fontSize:"0.95rem",opacity:.9},children:$t.overallMessage}),e.jsx("div",{style:{marginTop:"12px",display:"flex",gap:"4px",justifyContent:"center",alignItems:"center"},children:[1,2,3,4].map(s=>e.jsx("div",{style:{width:"40px",height:"8px",borderRadius:"4px",background:s<=$t.avgScore?"rgba(255,255,255,0.9)":"rgba(255,255,255,0.2)"}},s))})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:$t.evaluations.map((s,g)=>e.jsxs("div",{style:{padding:"16px",background:"rgba(255,255,255,0.1)",borderRadius:"12px",borderLeft:"4px solid "+(s.score==="excellent"?"#10b981":s.score==="good"?"#3b82f6":s.score==="fair"?"#f59e0b":"#ef4444")},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"1rem"},children:s.category}),e.jsx("div",{style:{fontSize:"0.85rem",opacity:.9},children:s.message})]})]}),e.jsxs("div",{style:{fontSize:"0.85rem",lineHeight:"1.5",opacity:.85,paddingLeft:"36px"},children:["ğŸ’¡ ",s.advice]})]},g))})]}),e.jsxs("div",{className:"result-card",children:[e.jsx("h3",{className:"result-card-title",style:{display:"flex",alignItems:"center",gap:"8px"},children:"ğŸ¯ 100m ç›®æ¨™è¨˜éŒ²ã‚¢ãƒ‰ãƒã‚¤ã‚¹"}),e.jsxs("div",{style:{marginBottom:"20px"},children:[_.target_record&&e.jsxs("div",{style:{padding:"12px 16px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"8px",marginBottom:"16px",border:"1px solid #7dd3fc"},children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"#0369a1",marginBottom:"4px"},children:"ğŸ“‹ è¢«æ¤œè€…æƒ…å ±ã§è¨­å®šã—ãŸç›®æ¨™è¨˜éŒ²"}),e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"#0c4a6e"},children:_.target_record})]}),e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontSize:"0.95rem",fontWeight:"bold",color:"#374151"},children:["100mã®ç›®æ¨™ã‚¿ã‚¤ãƒ ï¼ˆç§’ï¼‰",_.target_record?"â€»ä¿®æ­£å¯èƒ½":""]}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsx("input",{type:"number",step:"0.1",min:"10",max:"30",value:ds||_.target_record&&parseFloat(_.target_record.replace(/[^0-9.]/g,""))||"",onChange:s=>Xs(s.target.value),placeholder:"ä¾‹: 14.5",style:{flex:1,padding:"12px",fontSize:"1.1rem",borderRadius:"8px",border:"2px solid #e5e7eb",background:"white",color:"#1f2937"}}),e.jsx("button",{onClick:()=>{const s=ds||(_.target_record?_.target_record.replace(/[^0-9.]/g,""):""),g=parseFloat(s);if(isNaN(g)||g<=0){alert("æ­£ã—ã„ç›®æ¨™ã‚¿ã‚¤ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹: 14.5ç§’ï¼‰");return}if(g<9||g>30){alert("ç›®æ¨™ã‚¿ã‚¤ãƒ ã¯9ç§’ã€œ30ç§’ã®ç¯„å›²ã§å…¥åŠ›ã—ã¦ãã ã•ã„");return}const b=vs(g,"topSpeed");qs(b)},style:{padding:"12px 24px",fontSize:"1rem",fontWeight:"bold",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",cursor:"pointer",whiteSpace:"nowrap",boxShadow:"0 4px 6px rgba(245, 87, 108, 0.3)"},children:"ã‚¢ãƒ‰ãƒã‚¤ã‚¹ç”Ÿæˆ"})]})]}),cs&&e.jsx("div",{style:{padding:"24px",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",fontSize:"0.95rem",lineHeight:"1.8",maxHeight:"600px",overflowY:"auto",color:"#1f2937"},children:e.jsx("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},children:cs.split(`
`).map((s,g)=>{var b;if(s.startsWith("### "))return e.jsx("h3",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:g===0?"0":"24px",marginBottom:"12px",color:"#1f2937",borderBottom:"2px solid #f093fb",paddingBottom:"8px"},children:s.replace("### ","")},g);if(s.startsWith("#### "))return e.jsx("h4",{style:{fontSize:"1.15rem",fontWeight:"bold",marginTop:"16px",marginBottom:"8px",color:"#374151"},children:s.replace("#### ","")},g);if(s.startsWith("## "))return e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginTop:g===0?"0":"28px",marginBottom:"16px",color:"#111827",borderBottom:"3px solid #f5576c",paddingBottom:"10px"},children:s.replace("## ","")},g);if(s.trim().startsWith("- "))return e.jsxs("div",{style:{marginLeft:"20px",marginBottom:"6px",display:"flex",gap:"8px"},children:[e.jsx("span",{style:{color:"#f093fb",fontWeight:"bold"},children:"â€¢"}),e.jsx("span",{children:s.trim().replace("- ","")})]},g);if(/^\d+\.\s/.test(s.trim()))return e.jsxs("div",{style:{marginLeft:"20px",marginBottom:"6px",display:"flex",gap:"8px"},children:[e.jsx("span",{style:{color:"#f5576c",fontWeight:"bold",minWidth:"24px"},children:(b=s.trim().match(/^\d+\./))==null?void 0:b[0]}),e.jsx("span",{children:s.trim().replace(/^\d+\.\s/,"")})]},g);if(s.trim().startsWith("> "))return e.jsx("div",{style:{background:"#f3f4f6",borderLeft:"4px solid #f093fb",padding:"12px 16px",marginTop:"12px",marginBottom:"12px",borderRadius:"0 8px 8px 0",fontStyle:"italic",color:"#4b5563"},children:s.replace("> ","")},g);if(s.trim()==="---")return e.jsx("hr",{style:{border:"none",borderTop:"2px solid #e5e7eb",margin:"24px 0"}},g);if(s.includes("**")){const u=s.split("**");return e.jsx("p",{style:{marginBottom:"8px",color:"#374151"},children:u.map((F,w)=>w%2===1?e.jsx("strong",{style:{color:"#1f2937"},children:F},w):F)},g)}return s.trim()?e.jsx("p",{style:{marginBottom:"8px",color:"#374151"},children:s},g):e.jsx("div",{style:{height:"8px"}},g)})})})]}),e.jsxs("div",{style:{marginTop:"32px",display:"flex",gap:"12px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("button",{className:"btn-ghost",onClick:()=>r(1),children:"æœ€åˆã«æˆ»ã‚‹"}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{className:"wizard-btn secondary",onClick:()=>r(7),children:"å‰ã¸: ãƒãƒ¼ã‚«ãƒ¼è¨­å®š"}),e.jsx("button",{className:"wizard-btn",onClick:()=>r(8),style:{background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",border:"none",boxShadow:"0 4px 12px rgba(251, 191, 36, 0.4)"},children:"æ¬¡ã¸: ãƒ‡ãƒ¼ã‚¿è©³ç´°ï¼ˆãƒ—ãƒ­ç‰ˆï¼‰ ğŸ”’"})]})]})]})]});case 8:return e.jsxs("div",{className:"wizard-content",children:[e.jsxs("div",{className:"wizard-step-header",children:[e.jsx("h2",{className:"wizard-step-title",children:"ã‚¹ãƒ†ãƒƒãƒ— 9: ãƒ‡ãƒ¼ã‚¿è©³ç´°ï¼ˆãƒ—ãƒ­ç‰ˆï¼‰"}),e.jsx("p",{className:"wizard-step-desc",children:"è©³ç´°ãªã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ã‚°ãƒ©ãƒ•ã€é–¢ç¯€è§’åº¦ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã§ãã¾ã™ã€‚"}),e.jsxs("div",{style:{padding:"16px",background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",borderRadius:"12px",marginTop:"20px",color:"white",textAlign:"center",boxShadow:"0 4px 12px rgba(6, 182, 212, 0.3)"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"8px"},children:"ğŸš€ ãƒ™ãƒ¼ã‚¿ç‰ˆã¨ã—ã¦å…¬é–‹ä¸­"}),e.jsxs("div",{style:{fontSize:"0.95rem",lineHeight:"1.6"},children:["ç¾åœ¨ã€ã“ã®ãƒšãƒ¼ã‚¸ã®æ©Ÿèƒ½ã¯å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç„¡æ–™ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚",e.jsx("br",{}),"æ­£å¼ç‰ˆãƒªãƒªãƒ¼ã‚¹å¾Œã¯ã€ãƒ—ãƒ­ç‰ˆä¼šå“¡é™å®šæ©Ÿèƒ½ã¨ãªã‚Šã¾ã™ã€‚"]})]})]}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"result-card",children:[e.jsx("h3",{className:"result-card-title",children:"ã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒˆãƒªã‚¯ã‚¹"}),We.length>0?e.jsxs(e.Fragment,{children:[mt!=null&&e.jsxs("div",{style:{padding:"16px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px",marginBottom:"20px",color:"white"},children:[e.jsx("h4",{style:{fontSize:"1.1rem",marginBottom:"12px",fontWeight:"600"},children:"å‰åŠ vs å¾ŒåŠ æ¯”è¼ƒ"}),(()=>{var w,B,q,X,z,U,O,ne;const s=We.filter(fe=>fe.contactFrame<mt),g=We.filter(fe=>fe.contactFrame>=mt),b=(fe,Me)=>{const Z=fe.map(_e=>_e[Me]).filter(_e=>_e!=null&&!isNaN(_e));return Z.length>0?Z.reduce((_e,Se)=>_e+Se,0)/Z.length:null},u={contact:b(s,"contactTime"),flight:b(s,"flightTime"),pitch:b(s,"stepPitch"),stride:b(s,"stride"),speed:b(s,"speedMps"),acceleration:b(s,"acceleration")},F={contact:b(g,"contactTime"),flight:b(g,"flightTime"),pitch:b(g,"stepPitch"),stride:b(g,"stride"),speed:b(g,"speedMps"),acceleration:b(g,"acceleration")};return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"å‰åŠ æ¥åœ°æ™‚é–“"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:"4px"},children:[((w=u.contact)==null?void 0:w.toFixed(3))??"ãƒ¼","s"]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"å¾ŒåŠ æ¥åœ°æ™‚é–“"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:"4px"},children:[((B=F.contact)==null?void 0:B.toFixed(3))??"ãƒ¼","s"]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"å‰åŠ ãƒ”ãƒƒãƒ"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:"4px"},children:[((q=u.pitch)==null?void 0:q.toFixed(2))??"ãƒ¼","æ­©/s"]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"å¾ŒåŠ ãƒ”ãƒƒãƒ"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:"4px"},children:[((X=F.pitch)==null?void 0:X.toFixed(2))??"ãƒ¼","æ­©/s"]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"å‰åŠ ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:"4px"},children:[((z=u.stride)==null?void 0:z.toFixed(2))??"ãƒ¼","m"]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"å¾ŒåŠ ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:"4px"},children:[((U=F.stride)==null?void 0:U.toFixed(2))??"ãƒ¼","m"]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"å‰åŠ ã‚¹ãƒ”ãƒ¼ãƒ‰"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:"4px"},children:[((O=u.speed)==null?void 0:O.toFixed(2))??"ãƒ¼","m/s"]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"å¾ŒåŠ ã‚¹ãƒ”ãƒ¼ãƒ‰"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:"4px"},children:[((ne=F.speed)==null?void 0:ne.toFixed(2))??"ãƒ¼","m/s"]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"å‰åŠ åŠ é€Ÿåº¦"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:"4px",color:u.acceleration!=null&&u.acceleration>0?"#10b981":u.acceleration!=null&&u.acceleration<0?"#ef4444":"white"},children:[u.acceleration!=null?`${u.acceleration>0?"+":""}${u.acceleration.toFixed(2)}`:"ãƒ¼","m/sÂ²"]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.15)",padding:"12px",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"0.75rem",opacity:.9},children:"å¾ŒåŠ åŠ é€Ÿåº¦"}),e.jsxs("div",{style:{fontSize:"1.3rem",fontWeight:"bold",marginTop:"4px",color:F.acceleration!=null&&F.acceleration>0?"#10b981":F.acceleration!=null&&F.acceleration<0?"#ef4444":"white"},children:[F.acceleration!=null?`${F.acceleration>0?"+":""}${F.acceleration.toFixed(2)}`:"ãƒ¼","m/sÂ²"]})]})]})})()]}),ae.sectionTime!=null&&ae.sectionSpeed!=null&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fef9e7 100%)",border:"3px solid #f59e0b",borderRadius:"12px",padding:"16px 24px",marginBottom:"16px",display:"flex",gap:"32px",alignItems:"center",flexWrap:"wrap"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.85rem",color:"#92400e",marginBottom:"4px"},children:["ğŸƒ ",Oe,"mã‚¿ã‚¤ãƒ ï¼ˆãƒˆãƒ«ã‚½ãƒ¼åŸºæº–ï¼‰"]}),e.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#78350f"},children:[ae.sectionTime.toFixed(3)," ç§’"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"#92400e",marginBottom:"4px"},children:"âš¡ å¹³å‡é€Ÿåº¦"}),e.jsxs("div",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#78350f"},children:[ae.sectionSpeed.toFixed(2)," m/s"]})]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#b45309",marginLeft:"auto"},children:["â€» ãƒˆãƒ«ã‚½ãƒ¼ï¼ˆè…°ï¼‰ãŒ0mâ†’",Oe,"mã‚’é€šéã™ã‚‹æ™‚é–“ã§è¨ˆç®—",e.jsx("br",{}),"ï¼ˆç·šå½¢è£œé–“ã«ã‚ˆã‚‹ã‚µãƒ–ãƒ•ãƒ¬ãƒ¼ãƒ ç²¾åº¦ï¼‰"]})]}),e.jsxs("div",{className:"metrics-summary",children:[e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"ã‚¹ãƒ†ãƒƒãƒ—æ•°"}),e.jsx("span",{className:"metric-value",children:ae.stepCount})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"å¹³å‡æ¥åœ°æ™‚é–“"}),e.jsxs("span",{className:"metric-value",children:[ae.avgContact!=null?ae.avgContact.toFixed(3):"ãƒ¼"," ","s"]})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"å¹³å‡æ»ç©ºæ™‚é–“"}),e.jsxs("span",{className:"metric-value",children:[ae.avgFlight!=null?ae.avgFlight.toFixed(3):"ãƒ¼"," ","s"]})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"å¹³å‡ãƒ”ãƒƒãƒ"}),e.jsxs("span",{className:"metric-value",children:[ae.avgStepPitch!=null?ae.avgStepPitch.toFixed(2):"ãƒ¼"," ","æ­©/s"]})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"å¹³å‡ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰"}),e.jsxs("span",{className:"metric-value",children:[ae.avgStride!=null?ae.avgStride.toFixed(2):"ãƒ¼"," ","m"]})]}),e.jsxs("div",{className:"metric-item",children:[e.jsx("span",{className:"metric-label",children:"å¹³å‡ã‚¹ãƒ”ãƒ¼ãƒ‰"}),e.jsxs("span",{className:"metric-value",children:[ae.avgSpeedMps!=null?ae.avgSpeedMps.toFixed(2):"ãƒ¼"," ","m/s"]})]})]}),e.jsxs("div",{style:{background:"#f0f9ff",border:"2px solid #3b82f6",borderRadius:"8px",padding:"12px 16px",margin:"16px 0",fontSize:"0.9rem",color:"#1e40af"},children:["âœï¸ ",e.jsx("strong",{children:"æ¥åœ°ãƒ»é›¢åœ°ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç›´æ¥ç·¨é›†ã§ãã¾ã™"}),e.jsx("br",{}),"æ•°å€¤ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä¿®æ­£ã—ã€Enterã‚­ãƒ¼ã§ç¢ºå®šã—ã¦ãã ã•ã„ã€‚"]}),e.jsx("div",{className:"table-scroll",children:e.jsxs("table",{className:"metrics-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"æ¥åœ° âœï¸"}),e.jsx("th",{children:"é›¢åœ° âœï¸"}),e.jsx("th",{children:"æ¥åœ°æ™‚é–“"}),e.jsx("th",{children:"æ»ç©ºæ™‚é–“"}),e.jsx("th",{children:"ãƒ”ãƒƒãƒ"}),e.jsxs("th",{children:["ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰",Ze==="dash"?" (0mâ†’)":""]}),e.jsx("th",{children:"åŒºé–“å†…è²¢çŒ®"}),e.jsx("th",{children:"æ¥åœ°ä½ç½®"}),e.jsx("th",{children:"ã‚¹ãƒ”ãƒ¼ãƒ‰"}),e.jsx("th",{children:"åŠ é€Ÿåº¦"}),e.jsx("th",{children:"æ¸›é€Ÿç‡ / æ¨é€²ç‡"})]})}),e.jsx("tbody",{children:We.map((s,g)=>{var b,u,F,w,B,q,X,z;return e.jsxs("tr",{style:{background:s.quality==="warning"?"#fefce8":s.quality==="bad"?"#fef2f2":"inherit",color:s.quality==="bad"?"#9ca3af":"inherit"},children:[e.jsx("td",{children:s.index}),e.jsx("td",{children:e.jsx("input",{type:"number",value:Te===2?$e[g]??s.contactFrame:$e[g*2]??s.contactFrame,onChange:U=>{const O=parseInt(U.target.value);if(!isNaN(O)){const ne=[...$e];Te===2?ne[g]=O:ne[g*2]=O,Qe(ne)}},style:{width:"60px",padding:"4px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.9rem"}})}),e.jsx("td",{children:e.jsx("input",{type:"number",value:qe[g]??s.toeOffFrame,onChange:U=>{const O=parseInt(U.target.value);if(!isNaN(O)){const ne=[...qe];ne[g]=O,it(ne)}},style:{width:"60px",padding:"4px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.9rem"}})}),e.jsx("td",{children:((b=s.contactTime)==null?void 0:b.toFixed(3))??"ãƒ¼"}),e.jsx("td",{children:((u=s.flightTime)==null?void 0:u.toFixed(3))??"ãƒ¼"}),e.jsx("td",{children:((F=s.stepPitch)==null?void 0:F.toFixed(2))??"ãƒ¼"}),e.jsxs("td",{style:{background:s.isFirstStepFromStart?"#fef3c7":"inherit",fontWeight:s.isFirstStepFromStart?"bold":"normal"},children:[((w=s.fullStride)==null?void 0:w.toFixed(2))??((B=s.stride)==null?void 0:B.toFixed(2))??"ãƒ¼",s.isFirstStepFromStart&&e.jsx("span",{style:{fontSize:"0.7rem",color:"#d97706"},children:" ğŸš€"})]}),e.jsx("td",{style:{fontSize:"0.85rem",color:"#6b7280"},children:((q=s.sectionStride)==null?void 0:q.toFixed(2))??"ãƒ¼"}),e.jsxs("td",{style:{fontSize:"0.85rem",color:"#6b7280"},children:[((X=s.distanceAtContact)==null?void 0:X.toFixed(2))??"ãƒ¼","m"]}),e.jsx("td",{children:((z=s.speedMps)==null?void 0:z.toFixed(2))??"ãƒ¼"}),e.jsxs("td",{style:{color:s.acceleration!=null&&s.acceleration>0?"#10b981":s.acceleration!=null&&s.acceleration<0?"#ef4444":"inherit"},children:[s.acceleration!=null?`${s.acceleration>0?"+":""}${s.acceleration.toFixed(2)}`:"ãƒ¼"," ",s.acceleration!=null&&"m/sÂ²"]}),e.jsx("td",{style:{fontSize:"0.9rem"},children:s.brakeImpulseRatio!=null&&s.kickImpulseRatio!=null?e.jsxs("span",{children:[e.jsxs("span",{style:{color:s.brakeImpulseRatio>.5?"#dc2626":"#555",fontWeight:s.brakeImpulseRatio>.5?"bold":"normal"},children:[(s.brakeImpulseRatio*100).toFixed(0),"%"]})," / ",e.jsxs("span",{style:{color:"#1a7f37"},children:[(s.kickImpulseRatio*100).toFixed(0),"%"]})]}):"ãƒ¼"})]},s.index)})})]})}),e.jsx("div",{style:{marginTop:"16px",textAlign:"center"},children:e.jsx("button",{className:"btn-primary",onClick:()=>{const g=($e[$e.length-1]||0)+30,b=g+20;Qe([...$e,g]),it([...qe,b]),alert(`æ–°ã—ã„ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼
æ¥åœ°: ${g}
é›¢åœ°: ${b}

å€¤ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚`)},children:"â• æ–°ã—ã„ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¿½åŠ "})})]}):e.jsxs("div",{children:[e.jsx("div",{className:"empty-state",children:"ã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsx("div",{style:{marginTop:"24px",textAlign:"center"},children:e.jsx("button",{className:"btn-primary-large",onClick:()=>{const s=Ee||50,g=s+20;Qe([s]),it([g]),alert(`æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼
æ¥åœ°: ${s}
é›¢åœ°: ${g}

å€¤ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚`)},style:{fontSize:"1.1rem",padding:"16px 32px"},children:"â• æœ€åˆã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¿½åŠ "})})]})]}),e.jsxs("div",{className:"result-card",children:[e.jsx("h3",{className:"result-card-title",children:"ã‚¹ãƒ†ãƒƒãƒ—è§£æã‚°ãƒ©ãƒ•"}),We.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"graph-controls-compact",children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"8px"},children:"ğŸ“Š é …ç›®ã‚’ã‚¯ãƒªãƒƒã‚¯ã§è¡¨ç¤º/éè¡¨ç¤ºã€å³ã®ğŸ“ˆ/ğŸ“Šã§ã‚°ãƒ©ãƒ•ã‚¿ã‚¤ãƒ—ã‚’åˆ‡æ›¿"}),e.jsx("div",{className:"metric-chips-compact",style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Object.keys(On).map(s=>{const g=kn.includes(s),b=Bn[s];return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx("button",{className:g?"metric-chip active":"metric-chip",onClick:()=>li(s),style:{borderRadius:"8px 0 0 8px",paddingRight:"8px"},children:On[s]}),e.jsx("button",{onClick:()=>oi(s),style:{padding:"6px 10px",border:g?"2px solid #3b82f6":"1px solid #d1d5db",borderLeft:"none",borderRadius:"0 8px 8px 0",background:g?b==="line"?"#dbeafe":"#fef3c7":"#f9fafb",cursor:"pointer",fontSize:"0.85rem",transition:"all 0.2s"},title:b==="line"?"æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ• â†’ æ£’ã‚°ãƒ©ãƒ•ã«å¤‰æ›´":"æ£’ã‚°ãƒ©ãƒ• â†’ æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã«å¤‰æ›´",children:b==="line"?"ğŸ“ˆ":"ğŸ“Š"})]},s)})}),e.jsxs("div",{className:"graph-type-switch",style:{marginTop:"12px"},children:[e.jsx("span",{style:{fontSize:"0.85rem",color:"#6b7280",marginRight:"8px"},children:"ä¸€æ‹¬å¤‰æ›´:"}),e.jsx("button",{className:Wn==="line"?"type-btn active":"type-btn",onClick:()=>{js("line"),Dn({contactTime:"line",flightTime:"line",stepPitch:"line",stride:"line",speedMps:"line",brakeRatio:"line",kickRatio:"line"})},children:"å…¨ã¦æŠ˜ã‚Œç·š"}),e.jsx("button",{className:Wn==="bar"?"type-btn active":"type-btn",onClick:()=>{js("bar"),Dn({contactTime:"bar",flightTime:"bar",stepPitch:"bar",stride:"bar",speedMps:"bar",brakeRatio:"bar",kickRatio:"bar"})},children:"å…¨ã¦æ£’ã‚°ãƒ©ãƒ•"})]})]}),e.jsx("div",{className:"graph-container",children:e.jsx("canvas",{ref:En})})]}):e.jsx("div",{className:"empty-state",children:"ãƒãƒ¼ã‚«ãƒ¼ã‚’æ‰“ã¤ã¨ã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã¾ã™"})]}),_t.length>0&&e.jsxs("div",{className:"result-card",children:[e.jsx("h3",{className:"result-card-title",children:"3å±€é¢ã®é–¢ç¯€è§’åº¦ã¨è¶³å…ˆè·é›¢ï¼ˆè©³ç´°ãƒ‡ãƒ¼ã‚¿ï¼‰"}),e.jsxs("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginTop:"0.5rem",marginBottom:"0.5rem"},children:["â€» æ¥åœ°æœŸå‰åŠï¼šæ¥åœ°è„šãŒå¤§è»¢å­ã‹ã‚‰é‰›ç›´ã«ä¸‹ã‚ã—ãŸç·šã‚ˆã‚Šå‰æ–¹ã«ã‚ã‚‹æ¥åœ°ãƒã‚¤ãƒ³ãƒˆ",e.jsx("br",{}),"â€» æ¥åœ°æœŸä¸­åŠï¼šæ¥åœ°è„šãŒå¤§è»¢å­ã‹ã‚‰é‰›ç›´ã«ä¸‹ã‚ã—ãŸç·šã¨é‡ãªã‚‹æ¥åœ°ãƒã‚¤ãƒ³ãƒˆï¼ˆå¤§è…¿è§’0Â°ï¼‰",e.jsx("br",{}),"â€» æ¥åœ°æœŸå¾ŒåŠï¼šæ¥åœ°è„šãŒå¤§è»¢å­ã‹ã‚‰é‰›ç›´ã«ä¸‹ã‚ã—ãŸç·šã‚ˆã‚Šå¾Œæ–¹ã«ã‚ã‚‹é›¢åœ°ãƒã‚¤ãƒ³ãƒˆ"]}),e.jsxs("p",{style:{fontSize:"0.85rem",color:"#6b7280",marginBottom:"0.5rem"},children:["â€» å¤§è…¿è§’åº¦ï¼šé‰›ç›´ä¸‹å‘ãã‚’0Â°ã€å‰æ–¹ãŒãƒã‚¤ãƒŠã‚¹ï¼ˆ-ï¼‰ã€å¾Œæ–¹ãŒãƒ—ãƒ©ã‚¹ï¼ˆ+ï¼‰",e.jsx("br",{}),"â€» è¶³å…ˆè·é›¢ï¼šå¤§è»¢å­ã‹ã‚‰é‰›ç›´ä¸‹æ–¹å‘ã‚’0cmã€å‰æ–¹ãŒãƒã‚¤ãƒŠã‚¹ï¼ˆ-ï¼‰ã€å¾Œæ–¹ãŒãƒ—ãƒ©ã‚¹ï¼ˆ+ï¼‰"]}),e.jsxs("p",{style:{fontSize:"0.9rem",color:"#3b82f6",marginBottom:"1rem",padding:"8px 12px",background:"#eff6ff",borderRadius:"6px",border:"1px solid #bfdbfe"},children:["ğŸ‘† ",e.jsx("strong",{children:"è¡Œã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ãã®ãƒ•ãƒ¬ãƒ¼ãƒ ã®ã‚¹ãƒ†ã‚£ãƒƒã‚¯ãƒ”ã‚¯ãƒãƒ£ãƒ¼ã‚’è¡¨ç¤ºã—ã¾ã™"})]}),e.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"#f8fafc",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[e.jsxs("div",{style:{fontSize:"0.95rem",fontWeight:"bold",color:"#374151"},children:["ğŸ“¹ ãƒ•ãƒ¬ãƒ¼ãƒ  ",pe," ã®ã‚¹ãƒ†ã‚£ãƒƒã‚¯ãƒ”ã‚¯ãƒãƒ£ãƒ¼"]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{className:Pe?"toggle-btn active":"toggle-btn",onClick:()=>at(s=>!s),style:{padding:"6px 12px",fontSize:"0.85rem"},children:["è¶³å…ƒæ‹¡å¤§ ",Pe?"ON":"OFF"]}),e.jsxs("button",{className:pt?"toggle-btn active":"toggle-btn",onClick:()=>gn(s=>!s),disabled:!te.length,style:{padding:"6px 12px",fontSize:"0.85rem"},children:["ã‚¹ã‚±ãƒ«ãƒˆãƒ³ ",pt?"ON":"OFF"]})]})]}),e.jsx("div",{className:"canvas-area",style:{maxHeight:"300px",overflow:"hidden"},children:e.jsx("canvas",{ref:xe,className:"preview-canvas",style:{maxHeight:"280px",objectFit:"contain"}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginTop:"12px"},children:[e.jsx("button",{onClick:()=>Je(-10),disabled:!Ae,style:{padding:"6px 12px"},children:"-10"}),e.jsx("button",{onClick:()=>Je(-1),disabled:!Ae,style:{padding:"6px 12px"},children:"-1"}),e.jsxs("span",{style:{padding:"0 12px",fontWeight:"bold"},children:["Frame ",pe]}),e.jsx("button",{onClick:()=>Je(1),disabled:!Ae,style:{padding:"6px 12px"},children:"+1"}),e.jsx("button",{onClick:()=>Je(10),disabled:!Ae,style:{padding:"6px 12px"},children:"+10"})]})]}),e.jsx("div",{className:"table-scroll",children:e.jsxs("table",{className:"phase-table-compact",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"å±€é¢"}),e.jsx("th",{children:"ãƒ•ãƒ¬ãƒ¼ãƒ "}),e.jsx("th",{children:"ä½“å¹¹"}),e.jsx("th",{children:"L å¤§è…¿"}),e.jsx("th",{children:"R å¤§è…¿"}),e.jsx("th",{children:"L è¶³å…ˆè·é›¢"}),e.jsx("th",{children:"R è¶³å…ˆè·é›¢"}),e.jsx("th",{children:"L è†"}),e.jsx("th",{children:"R è†"}),e.jsx("th",{children:"L è‚˜"}),e.jsx("th",{children:"R è‚˜"})]})}),e.jsx("tbody",{children:_t.map((s,g)=>{var b,u,F,w,B,q,X,z,U;return e.jsxs("tr",{onClick:()=>{je(s.frame);const O=document.querySelector(".canvas-area");O&&O.scrollIntoView({behavior:"smooth",block:"center"})},style:{cursor:"pointer",background:pe===s.frame?"#dbeafe":"inherit",transition:"background 0.2s"},onMouseEnter:O=>{pe!==s.frame&&(O.currentTarget.style.background="#f0f9ff")},onMouseLeave:O=>{pe!==s.frame&&(O.currentTarget.style.background="inherit")},children:[e.jsx("td",{children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px"},children:[pe===s.frame&&e.jsx("span",{children:"ğŸ‘ï¸"}),s.phase==="initial"?"æ¥åœ°æœŸå‰åŠï¼ˆæ¥åœ°ï¼‰":s.phase==="mid"?"æ¥åœ°æœŸä¸­åŠï¼ˆå‚ç›´ï¼‰":"æ¥åœ°æœŸå¾ŒåŠï¼ˆé›¢åœ°ï¼‰"]})}),e.jsx("td",{style:{fontWeight:pe===s.frame?"bold":"normal",color:pe===s.frame?"#2563eb":"inherit"},children:s.frame}),e.jsxs("td",{children:[(b=s.angles.trunkAngle)==null?void 0:b.toFixed(1),"Â°"]}),e.jsxs("td",{children:[(u=s.angles.thighAngle.left)==null?void 0:u.toFixed(1),"Â°"]}),e.jsxs("td",{children:[(F=s.angles.thighAngle.right)==null?void 0:F.toFixed(1),"Â°"]}),e.jsxs("td",{children:[((w=s.angles.toeHorizontalDistance.left)==null?void 0:w.toFixed(1))??"ãƒ¼","cm"]}),e.jsxs("td",{children:[((B=s.angles.toeHorizontalDistance.right)==null?void 0:B.toFixed(1))??"ãƒ¼","cm"]}),e.jsxs("td",{children:[(q=s.angles.kneeFlex.left)==null?void 0:q.toFixed(1),"Â°"]}),e.jsxs("td",{children:[(X=s.angles.kneeFlex.right)==null?void 0:X.toFixed(1),"Â°"]}),e.jsxs("td",{children:[((z=s.angles.elbowAngle.left)==null?void 0:z.toFixed(1))??"ãƒ¼","Â°"]}),e.jsxs("td",{children:[((U=s.angles.elbowAngle.right)==null?void 0:U.toFixed(1))??"ãƒ¼","Â°"]})]},g)})})]})})]}),e.jsxs("div",{className:"result-card",children:[e.jsx("h3",{className:"result-card-title",children:"ä¿å­˜ã¨ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn-action",onClick:ei,disabled:Qs,children:"ğŸ’¾ ã‚µãƒ¼ãƒãƒ¼ã«ä¿å­˜"}),e.jsx("button",{className:"btn-action",onClick:Zs,disabled:!te.length,children:"ğŸ“Š è§’åº¦ã‚’CSVå‡ºåŠ›"})]}),us&&e.jsx("div",{className:"save-result-msg",children:us})]})]}),e.jsxs("div",{style:{marginTop:"32px",display:"flex",gap:"12px",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("button",{className:"wizard-btn secondary",onClick:()=>r(6),style:{padding:"14px 28px",fontSize:"1rem",fontWeight:"bold",borderRadius:"8px",border:"2px solid #3b82f6",background:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)",color:"#1d4ed8",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:s=>{s.target.style.transform="translateY(-2px)",s.target.style.boxShadow="0 4px 8px rgba(59, 130, 246, 0.3)"},onMouseLeave:s=>{s.target.style.transform="translateY(0)",s.target.style.boxShadow="none"},children:"â¬…ï¸ å‰ã¸ï¼ˆãƒãƒ¼ã‚­ãƒ³ã‚°ç”»é¢ï¼‰"}),e.jsx("button",{className:"wizard-btn secondary",onClick:()=>{window.confirm(`æ¤œå‡ºãƒ¢ãƒ¼ãƒ‰ã‚’ã‚„ã‚Šç›´ã—ã¾ã™ã‹ï¼Ÿ
ï¼ˆç¾åœ¨ã®ãƒãƒ¼ã‚«ãƒ¼ã¯ã™ã¹ã¦ã‚¯ãƒªã‚¢ã•ã‚Œã¾ã™ï¼‰`)&&(vn(null),on(null),Qe([]),it([]),Sn({contactFrame:null,toeOffFrame:null}),Ht(0),r(6))},style:{padding:"14px 28px",fontSize:"1rem",fontWeight:"bold",borderRadius:"8px",border:"2px solid #f59e0b",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",color:"#92400e",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:s=>{s.target.style.transform="translateY(-2px)",s.target.style.boxShadow="0 4px 8px rgba(245, 158, 11, 0.3)"},onMouseLeave:s=>{s.target.style.transform="translateY(0)",s.target.style.boxShadow="none"},children:"ğŸ”„ æ¤œå‡ºãƒ¢ãƒ¼ãƒ‰ã‚’ã‚„ã‚Šç›´ã™"})]}),e.jsx("button",{className:"wizard-btn danger",onClick:()=>{window.confirm("æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã—ã¾ã™ã‹ï¼Ÿç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™ã€‚")&&(v&&URL.revokeObjectURL(v),be(null),ye(null),he.current=[],Ne(0),je(0),le(0),A(!1),Ge(null),Kt(null),Yt(null),Jt(null),xn(0),un(0),fn(0),mn(null),bn(null),yn(null),Qe([]),it([]),Ht(0),Tn(null),An(null),sn([]),de(""),r(0),os("10"),rs(""),as(""),C({name:"",age:null,gender:null,affiliation:"",height_cm:null,current_record:"",target_record:""}))},children:"æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™"})]})]});default:return null}},[Yl,hi]=tn.useState(window.innerWidth);tn.useEffect(()=>{const i=()=>hi(window.innerWidth);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);const en=[{title:"ã‚ˆã†ã“ãï¼ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°å‹•ä½œè§£æã‚·ã‚¹ãƒ†ãƒ ã¸",content:`ã“ã®ã‚¢ãƒ—ãƒªã§ã¯ã€å‹•ç”»ã‹ã‚‰ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç§‘å­¦çš„ã«åˆ†æã§ãã¾ã™ã€‚
7ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã§è§£æã‚’é€²ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€‚`},{title:"ã‚¹ãƒ†ãƒƒãƒ—0: æ¸¬å®šè€…æƒ…å ±ã®å…¥åŠ›",content:`æ¸¬å®šè€…ã®åŸºæœ¬æƒ…å ±ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

â€¢ æ°åã€å¹´é½¢ã€æ€§åˆ¥ï¼ˆå¿…é ˆï¼‰
â€¢ èº«é•·ï¼ˆã‚¹ãƒˆãƒ©ã‚¤ãƒ‰åˆ†æã«ä½¿ç”¨ï¼‰
â€¢ ç›®æ¨™è¨˜éŒ²ï¼ˆAIã‚¢ãƒ‰ãƒã‚¤ã‚¹ã«ä½¿ç”¨ï¼‰`},{title:"ã‚¹ãƒ†ãƒƒãƒ—1: å‹•ç”»ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",content:`ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚

â€¢ æ¨ªã‹ã‚‰æ’®å½±ã—ãŸå‹•ç”»ãŒæœ€é©ã§ã™
â€¢ 10mä»¥ä¸Šã®èµ°è¡ŒãŒåã¾ã£ã¦ã„ã‚‹å‹•ç”»ã‚’æ¨å¥¨
â€¢ MP4ã€MOVã€WebMå½¢å¼ã«å¯¾å¿œ`},{title:"ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡º",content:`å‹•ç”»ã‚’å€‹åˆ¥ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã«åˆ†å‰²ã—ã¾ã™ã€‚

â€¢ ç›®æ¨™FPSã‚’è¨­å®šï¼ˆæ¨å¥¨: 30fpsï¼‰
â€¢ æŠ½å‡ºé–‹å§‹ã‚’ã‚¯ãƒªãƒƒã‚¯
â€¢ å‡¦ç†ã«ã¯æ•°ç§’ã‹ã‹ã‚Šã¾ã™`},{title:"ã‚¹ãƒ†ãƒƒãƒ—3: å§¿å‹¢æ¨å®š",content:`å„ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰éª¨æ ¼æƒ…å ±ã‚’æŠ½å‡ºã—ã¾ã™ã€‚

â€¢ MediaPipe Poseã‚’ä½¿ç”¨
â€¢ è‡ªå‹•çš„ã«é–¢ç¯€ä½ç½®ã‚’æ¤œå‡º
â€¢ ã‚¹ã‚±ãƒ«ãƒˆãƒ³è¡¨ç¤ºã§ç¢ºèªå¯èƒ½`},{title:"ã‚¹ãƒ†ãƒƒãƒ—4: åŒºé–“è¨­å®š",content:`è§£æã™ã‚‹åŒºé–“ã‚’è¨­å®šã—ã¾ã™ã€‚

â€¢ ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹ã‚’è¨­å®š
â€¢ ã‚¨ãƒ³ãƒ‰åœ°ç‚¹ã‚’è¨­å®š
â€¢ è·é›¢ï¼ˆmï¼‰ã‚’å…¥åŠ›ï¼ˆä¾‹: 10mï¼‰`},{title:"ã‚¹ãƒ†ãƒƒãƒ—5: ãƒãƒ¼ã‚«ãƒ¼è¨­å®š",content:`æ¥åœ°ãƒ»é›¢åœ°ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ãƒãƒ¼ã‚¯ã—ã¾ã™ã€‚

â€¢ æœ€åˆã®2æ­©ï¼šæ‰‹å‹•ã§ãƒãƒ¼ã‚¯ï¼ˆ2æ­©åˆ†ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
  - 1æ­©ç›®: æ¥åœ°â†’é›¢åœ°
  - 2æ­©ç›®: æ¥åœ°â†’é›¢åœ°
â€¢ 3æ­©ç›®ä»¥é™ï¼šæ¥åœ°ã®ã¿ãƒãƒ¼ã‚¯ï¼ˆé›¢åœ°ã¯è‡ªå‹•æ¤œå‡ºï¼‰
â€¢ PC: Spaceã‚­ãƒ¼ã€ãƒ¢ãƒã‚¤ãƒ«: ã‚¿ãƒƒãƒ—ã§ãƒãƒ¼ã‚¯`},{title:"ã‚¹ãƒ†ãƒƒãƒ—6: çµæœç¢ºèª",content:`è§£æçµæœã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼

â€¢ AIè©•ä¾¡ï¼šãƒ•ã‚©ãƒ¼ãƒ ã®ç·åˆè©•ä¾¡
â€¢ 100mç›®æ¨™è¨˜éŒ²ï¼šç›®æ¨™é”æˆã®ãŸã‚ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹`},{title:"ã‚¹ãƒ†ãƒƒãƒ—7: ãƒ‡ãƒ¼ã‚¿è©³ç´°ï¼ˆãƒ—ãƒ­ç‰ˆï¼‰",content:`è©³ç´°ãªãƒ‡ãƒ¼ã‚¿åˆ†æï¼ˆãƒ—ãƒ­ç‰ˆæ©Ÿèƒ½ï¼‰

â€¢ ã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼šè©³ç´°ãªæ•°å€¤ãƒ‡ãƒ¼ã‚¿
â€¢ ã‚°ãƒ©ãƒ•ï¼šå„æŒ‡æ¨™ã®æ¨ç§»ã‚’å¯è¦–åŒ–
â€¢ 3å±€é¢ã®é–¢ç¯€è§’åº¦ï¼šè©³ç´°ãªå§¿å‹¢ãƒ‡ãƒ¼ã‚¿

â€» ãƒ—ãƒ­ç‰ˆä¼šå“¡ã®ã¿é–²è¦§å¯èƒ½`}];if(typeof window<"u"&&window.innerWidth<=768){const i=tn.lazy(()=>yi(()=>import("./AppMobile-rkgFwx5D.js"),__vite__mapDeps([0,1,2,3])));return e.jsx(tn.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(i,{})})}return e.jsxs("div",{className:`app-container wizard-step-${N}`,children:[e.jsx(Hi,{}),e.jsx(Di,{userProfile:l?{name:l.name}:void 0,onNewAnalysis:ls,onShowTutorial:()=>{localStorage.removeItem("hideTutorial"),He(!0),st(0)}}),Ye&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},children:e.jsxs("div",{style:{background:"white",borderRadius:"16px",maxWidth:"600px",width:"100%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{padding:"24px",borderBottom:"2px solid #f0f0f0",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"16px 16px 0 0"},children:[e.jsx("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"bold"},children:en[Ie].title}),e.jsxs("div",{style:{marginTop:"12px",fontSize:"0.9rem",opacity:.9},children:["ã‚¹ãƒ†ãƒƒãƒ— ",Ie+1," / ",en.length]})]}),e.jsx("div",{style:{padding:"32px 24px",fontSize:"1rem",lineHeight:"1.8",color:"#374151",whiteSpace:"pre-line"},children:en[Ie].content}),e.jsx("div",{style:{padding:"0 24px 24px",display:"flex",gap:"8px"},children:en.map((i,c)=>e.jsx("div",{style:{flex:1,height:"4px",borderRadius:"2px",background:c<=Ie?"#667eea":"#e5e7eb"}},c))}),e.jsxs("div",{style:{padding:"0 24px 24px",display:"flex",gap:"12px",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{onClick:()=>He(!1),style:{padding:"12px 24px",borderRadius:"8px",border:"2px solid #e5e7eb",background:"white",color:"#6b7280",fontWeight:"bold",cursor:"pointer",fontSize:"1rem"},children:"ã‚¹ã‚­ãƒƒãƒ—"}),Ie===0&&e.jsx("button",{onClick:()=>{localStorage.setItem("hideTutorial","true"),He(!1)},style:{padding:"12px 24px",borderRadius:"8px",border:"2px solid #f59e0b",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",color:"#92400e",fontWeight:"bold",cursor:"pointer",fontSize:"1rem",transition:"all 0.2s",boxShadow:"0 2px 4px rgba(251, 191, 36, 0.2)"},onMouseEnter:i=>{i.currentTarget.style.background="linear-gradient(135deg, #fde68a 0%, #fcd34d 100%)",i.currentTarget.style.boxShadow="0 4px 8px rgba(251, 191, 36, 0.3)"},onMouseLeave:i=>{i.currentTarget.style.background="linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",i.currentTarget.style.boxShadow="0 2px 4px rgba(251, 191, 36, 0.2)"},children:"ğŸš« æ¬¡å›ã‹ã‚‰è¡¨ç¤ºã—ãªã„"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[Ie>0&&e.jsx("button",{onClick:()=>st(Ie-1),style:{padding:"12px 24px",borderRadius:"8px",border:"2px solid #667eea",background:"white",color:"#667eea",fontWeight:"bold",cursor:"pointer",fontSize:"1rem"},children:"æˆ»ã‚‹"}),e.jsx("button",{onClick:()=>{Ie<en.length-1?st(Ie+1):He(!1)},style:{padding:"12px 32px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:"1rem",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.4)"},children:Ie<en.length-1?"æ¬¡ã¸":"å§‹ã‚ã‚‹ï¼"})]})]})]})}),N===1&&window.innerWidth>768&&e.jsx("header",{className:"app-header-new desktop-only",style:{display:window.innerWidth<=768?"none":"block"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"app-title-new",style:{fontSize:window.innerWidth<=768?"14px":"inherit",margin:window.innerWidth<=768?"0":"inherit",lineHeight:window.innerWidth<=768?"1.2":"inherit"},children:"ğŸƒ Running Analysis Studio"}),e.jsx("p",{className:"app-subtitle-new",style:{display:window.innerWidth<=768?"none":"block"},children:"ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡ºãƒ»å§¿å‹¢æ¨å®šãƒ»é–¢ç¯€è§’åº¦ã¨ã‚¹ãƒ†ãƒƒãƒ—æŒ‡æ¨™ã‚’ä¸€æ‹¬è§£æ"})]}),l&&e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("button",{onClick:()=>{localStorage.removeItem("hideTutorial"),He(!0),st(0)},style:{padding:"8px 16px",borderRadius:"8px",border:"2px solid rgba(59,130,246,0.3)",background:"rgba(59,130,246,0.1)",color:"white",fontWeight:"bold",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:"ï¼Ÿ"}),e.jsx("span",{children:"ä½¿ã„æ–¹"})]}),e.jsx("button",{type:"button",onClick:ls,style:{padding:"8px 16px",borderRadius:999,border:"none",background:"linear-gradient(135deg, #22c55e 0%, #4ade80 50%, #22c55e 100%)",color:"white",fontSize:"0.9rem",fontWeight:600,boxShadow:"0 8px 20px rgba(34,197,94,0.4)",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:"ï¼‹ æ–°ã—ã„è§£æã‚’é–‹å§‹"}),e.jsx("span",{style:{fontSize:"0.9rem",color:"#0f172a",opacity:.8},children:l.name})]})]})}),e.jsx("div",{className:"step-progress",children:[1,2,3,4,5,6].map(i=>e.jsxs("div",{className:N===i?"step-item active":N>i?"step-item completed":"step-item",children:[e.jsx("div",{className:"step-circle",children:i}),e.jsxs("div",{className:"step-name",children:[i===1&&"ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰",i===2&&"ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡º",i===3&&"å§¿å‹¢æ¨å®š",i===4&&"åŒºé–“è¨­å®š",i===5&&"ãƒãƒ¼ã‚«ãƒ¼",i===6&&"çµæœ"]})]},i))}),e.jsx("main",{className:"wizard-main",children:ci()}),e.jsxs("div",{style:{display:"none"},children:[e.jsx("video",{ref:De,playsInline:!0,muted:!0,preload:"auto"}),e.jsx("canvas",{ref:wt})]})]})},Ki=()=>{const l=St(),[n,p]=h.useState(""),[a,f]=h.useState(""),[N,r]=h.useState(!1),[d,$]=h.useState(null),R=async D=>{D.preventDefault(),$(null),r(!0);const{error:J}=await ve.auth.signInWithPassword({email:n,password:a});if(J){$("ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸï¼š"+J.message),r(!1);return}r(!1),l("/dashboard",{replace:!0})};return e.jsx("div",{style:{minHeight:"100vh",padding:"24px 16px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:e.jsxs("div",{style:{width:"100%",maxWidth:480,background:"rgba(0,0,0,0.35)",borderRadius:16,padding:24,border:"1px solid rgba(255,255,255,0.3)"},children:[e.jsx("h1",{style:{fontSize:22,marginBottom:8},children:"ãƒ­ã‚°ã‚¤ãƒ³"}),e.jsx("p",{style:{fontSize:13,marginBottom:16},children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ¸ˆã¿ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚"}),e.jsxs("form",{onSubmit:R,children:[e.jsx("label",{style:Ns,children:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"}),e.jsx("input",{type:"email",value:n,onChange:D=>p(D.target.value),required:!0,style:zs}),e.jsx("label",{style:Ns,children:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"}),e.jsx("input",{type:"password",value:a,onChange:D=>f(D.target.value),required:!0,style:zs}),d&&e.jsx("div",{style:{marginTop:12,padding:8,borderRadius:8,background:"#ffebee",color:"#b00020",fontSize:12},children:d}),e.jsxs("div",{style:{marginTop:20,display:"flex",gap:12},children:[e.jsx("button",{type:"submit",disabled:N,style:{flex:1,padding:"10px 0",borderRadius:999,border:"none",fontSize:14,fontWeight:600,background:N?"#666":"#2196f3",color:"#fff",cursor:N?"default":"pointer"},children:N?"ãƒ­ã‚°ã‚¤ãƒ³ä¸­â€¦":"ãƒ­ã‚°ã‚¤ãƒ³"}),e.jsx("button",{type:"button",onClick:()=>l("/register"),style:{padding:"10px 18px",borderRadius:999,border:"1px solid rgba(255,255,255,0.6)",background:"transparent",color:"#fff",fontSize:13,cursor:"pointer"},children:"æ–°è¦ç™»éŒ²ã¸"})]})]})]})})},Ns={display:"block",fontSize:12,marginTop:10,marginBottom:4},zs={width:"100%",padding:"8px 10px",borderRadius:8,border:"1px solid rgba(255,255,255,0.5)",background:"rgba(0,0,0,0.2)",color:"#fff",fontSize:13},Yi=()=>{const l=St();return h.useEffect(()=>{(async()=>{await ve.auth.signOut(),l("/login",{replace:!0})})()},[l]),e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:14},children:"ãƒ­ã‚°ã‚¢ã‚¦ãƒˆä¸­ã§ã™â€¦"})},Ji=()=>{const l=St(),[n,p]=h.useState(""),[a,f]=h.useState(""),[N,r]=h.useState(""),[d,$]=h.useState(""),[R,D]=h.useState(""),[J,ie]=h.useState(""),[me,ce]=h.useState(""),[Q,ue]=h.useState(""),[E,_]=h.useState(""),[C,V]=h.useState(""),[oe,L]=h.useState(!1),[Y,ee]=h.useState(null),[ye,v]=h.useState(null),be=async()=>{const A=me.replace(/[^\d]/g,"");if(A.length===7)try{const le=await(await fetch(`https://zipcloud.ibsnet.co.jp/api/search?zipcode=${A}`)).json();if(le.results&&le.results.length>0){const Fe=le.results[0];ue(Fe.address1??"")}else v("éƒµä¾¿ç•ªå·ã‹ã‚‰ä½æ‰€ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚")}catch(se){console.error(se),v("éƒµä¾¿ç•ªå·æ¤œç´¢ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚")}},W=async A=>{var se;if(A.preventDefault(),v(null),ee(null),d!==R){v("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨ç¢ºèªç”¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚");return}if(!Q){v("æ‰€åœ¨åœ°ï¼ˆçœŒï¼‰ãŒç©ºã§ã™ã€‚éƒµä¾¿ç•ªå·ã‹ã‚‰è‡ªå‹•å–å¾—ã™ã‚‹ã‹ã€ç›´æ¥å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");return}L(!0);try{const{data:le,error:Fe}=await ve.auth.signUp({email:N,password:d});if(Fe){v("ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ: "+Fe.message),L(!1);return}const de=((se=le.user)==null?void 0:se.id)??null,he=me.replace(/[^\d]/g,""),{error:j}=await ve.from("app_users").insert({auth_user_id:de,full_name:n,full_name_kana:a,email:N,birth_date:J,postal_code:he,prefecture:Q,occupation:E||null,affiliation:C||null});if(j){v("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: "+j.message),L(!1);return}ee("ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸã€‚ç™»éŒ²ã—ãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯å¤§åˆ‡ã«ä¿ç®¡ã—ã¦ãã ã•ã„ã€‚"),$(""),D("")}catch(le){console.error(le),v("äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚")}finally{L(!1)}};return e.jsx("div",{style:{minHeight:"100vh",padding:"24px 16px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:e.jsxs("div",{style:{width:"100%",maxWidth:600,background:"rgba(0,0,0,0.35)",borderRadius:16,padding:24,border:"1px solid rgba(255,255,255,0.3)"},children:[e.jsx("h1",{style:{fontSize:22,marginBottom:8},children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²"}),e.jsx("p",{style:{fontSize:13,marginBottom:16},children:"ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°å‹•ä½œè§£æã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚"}),e.jsxs("form",{onSubmit:W,children:[e.jsxs("label",{style:yt,children:["æ°å",e.jsx("span",{style:Tt,children:"*"})]}),e.jsx("input",{type:"text",value:n,onChange:A=>p(A.target.value),required:!0,style:jt}),e.jsxs("label",{style:yt,children:["æ°åï¼ˆã‹ãªï¼‰",e.jsx("span",{style:Tt,children:"*"})]}),e.jsx("input",{type:"text",value:a,onChange:A=>f(A.target.value),required:!0,style:jt}),e.jsxs("label",{style:yt,children:["ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",e.jsx("span",{style:Tt,children:"*"})]}),e.jsx("input",{type:"email",value:N,onChange:A=>r(A.target.value),required:!0,style:jt}),e.jsxs("label",{style:yt,children:["ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",e.jsx("span",{style:Tt,children:"*"})]}),e.jsx("input",{type:"password",value:d,onChange:A=>$(A.target.value),required:!0,style:jt}),e.jsxs("label",{style:yt,children:["ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆç¢ºèªï¼‰",e.jsx("span",{style:Tt,children:"*"})]}),e.jsx("input",{type:"password",value:R,onChange:A=>D(A.target.value),required:!0,style:jt}),e.jsxs("label",{style:yt,children:["ç”Ÿå¹´æœˆæ—¥",e.jsx("span",{style:Tt,children:"*"})]}),e.jsx("input",{type:"date",value:J,onChange:A=>ie(A.target.value),required:!0,style:jt}),e.jsxs("label",{style:yt,children:["éƒµä¾¿ç•ªå·",e.jsx("span",{style:Tt,children:"*"}),"ï¼ˆãƒã‚¤ãƒ•ãƒ³ãªã— 7æ¡ï¼‰"]}),e.jsx("input",{type:"text",value:me,onChange:A=>ce(A.target.value),onBlur:be,required:!0,style:jt,placeholder:"ä¾‹: 2591292"}),e.jsxs("label",{style:yt,children:["æ‰€åœ¨åœ°ï¼ˆçœŒï¼‰",e.jsx("span",{style:Tt,children:"*"})]}),e.jsx("input",{type:"text",value:Q,onChange:A=>ue(A.target.value),required:!0,style:jt,placeholder:"éƒµä¾¿ç•ªå·ã‹ã‚‰è‡ªå‹•å…¥åŠ›ã•ã‚Œã¾ã™"}),e.jsx("label",{style:yt,children:"è·æ¥­ï¼ˆä»»æ„ï¼‰"}),e.jsx("input",{type:"text",value:E,onChange:A=>_(A.target.value),style:jt}),e.jsx("label",{style:yt,children:"æ‰€å±ï¼ˆä»»æ„ï¼‰"}),e.jsx("input",{type:"text",value:C,onChange:A=>V(A.target.value),style:jt}),ye&&e.jsx("div",{style:{marginTop:12,padding:8,borderRadius:8,background:"#ffebee",color:"#b00020",fontSize:12},children:ye}),Y&&e.jsx("div",{style:{marginTop:12,padding:8,borderRadius:8,background:"rgba(0,0,0,0.4)",fontSize:12},children:Y}),e.jsxs("div",{style:{marginTop:20,display:"flex",gap:12},children:[e.jsx("button",{type:"submit",disabled:oe,style:{flex:1,padding:"10px 0",borderRadius:999,border:"none",fontSize:14,fontWeight:600,background:oe?"#666":"#2196f3",color:"#fff",cursor:oe?"default":"pointer"},children:oe?"ç™»éŒ²ä¸­â€¦":"ç™»éŒ²ã™ã‚‹"}),e.jsx("button",{type:"button",onClick:()=>l("/"),style:{padding:"10px 18px",borderRadius:999,border:"1px solid rgba(255,255,255,0.6)",background:"transparent",color:"#fff",fontSize:13,cursor:"pointer"},children:"ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹"})]})]})]})})},yt={display:"block",fontSize:12,marginTop:10,marginBottom:4},jt={width:"100%",padding:"8px 10px",borderRadius:8,border:"1px solid rgba(255,255,255,0.5)",background:"rgba(0,0,0,0.2)",color:"#fff",fontSize:13},Tt={color:"#ffeb3b",marginLeft:4},ke=l=>{if(l==null)return null;if(typeof l=="number")return Number.isFinite(l)?l:null;const n=Number(l);return Number.isFinite(n)?n:null},Ls=(l,n=2,p="")=>l==null?"ãƒ¼":`${Number(l).toFixed(n)}${p}`,vt=(l,n=3)=>l===null?"ãƒ¼":`${l.toFixed(n)} s`,nn=(l,n=2)=>Ls(l,n," m"),cn=l=>l===null?"ãƒ¼":`${l.toFixed(2)} æ­©/s`,hn=l=>Ls(l,2," m/s"),Ms=l=>l===null?"ãƒ¼":`${l>0?"+":(l<0,"")}${l.toFixed(2)} m/sÂ²`,Rs=l=>l===null?"ãƒ¼":`${(l*100).toFixed(0)}%`,ct=(l,n=1)=>l===null?"ãƒ¼":`${Number(l).toFixed(n)}Â°`,wn=(l,n=1)=>l===null?"ãƒ¼":`${Number(l).toFixed(n)}cm`,xt=(l,n)=>{for(const p of n){const a=ke(l==null?void 0:l[p]);if(a!==null)return a}return null},Kn=l=>{if(l==null)return"ãƒ¼";if(typeof l=="number")return Number.isFinite(l)?Number.isInteger(l)?l.toString():l.toFixed(2):String(l);if(typeof l=="object")try{return JSON.stringify(l,null,2)}catch(n){return console.warn("Failed to stringify value",n),String(l)}return String(l)},Es=l=>{if(!l)return null;const n=l.split(/\r?\n/);return n.map((p,a)=>e.jsxs(tn.Fragment,{children:[p,a<n.length-1?e.jsx("br",{}):null]},`line-${a}`))},Gi={contact:"æ¥åœ°æœŸå‰åŠ (æ¥åœ°)",initial:"æ¥åœ°æœŸå‰åŠ (æ¥åœ°)",mid:"æ¥åœ°æœŸä¸­åŠ (å‚ç›´)",mid_support:"æ¥åœ°æœŸä¸­åŠ (å‚ç›´)",midsupport:"æ¥åœ°æœŸä¸­åŠ (å‚ç›´)",toe_off:"æ¥åœ°æœŸå¾ŒåŠ (é›¢åœ°)",toeoff:"æ¥åœ°æœŸå¾ŒåŠ (é›¢åœ°)",final:"æ¥åœ°æœŸå¾ŒåŠ (é›¢åœ°)"},Zi=l=>{if(!l)return"ä¸æ˜ãªå±€é¢";const n=l.toLowerCase();return Gi[n]??l},Qi=l=>Array.isArray(l)?l.map((n,p)=>{var ie,me,ce,Q,ue,E,_,C;const a=(n==null?void 0:n.phase)??(n==null?void 0:n.phase_name)??(n==null?void 0:n.phaseName)??null,f=ke((n==null?void 0:n.frame)??(n==null?void 0:n.frame_index)??(n==null?void 0:n.frameIndex)??(n==null?void 0:n.step_index)??p),N=ke((n==null?void 0:n.step_index)??(n==null?void 0:n.stepIndex)??(n==null?void 0:n.step_number)??(n==null?void 0:n.stepNumber)??(n==null?void 0:n.step)??(n==null?void 0:n.index)??null),r=(n==null?void 0:n.angles)??{},d=(r==null?void 0:r.thighAngle)??{},$=(r==null?void 0:r.toeHorizontalDistance)??{},R=(r==null?void 0:r.kneeFlex)??{},D=(r==null?void 0:r.elbowAngle)??{},J=typeof a=="string"?a.toLowerCase():`phase-${p}`;return{stepIndex:N,phaseKey:J??`phase-${p}`,phaseLabel:Zi(a),frame:f,trunkAngle:ke((r==null?void 0:r.trunkAngle)??(n==null?void 0:n.trunkAngle)??(n==null?void 0:n.trunk_angle)),thighLeft:ke((d==null?void 0:d.left)??((ie=n==null?void 0:n.thighAngle)==null?void 0:ie.left)??(n==null?void 0:n.left_thigh_angle)??(n==null?void 0:n.thigh_left)),thighRight:ke((d==null?void 0:d.right)??((me=n==null?void 0:n.thighAngle)==null?void 0:me.right)??(n==null?void 0:n.right_thigh_angle)??(n==null?void 0:n.thigh_right)),toeDistanceLeft:ke(($==null?void 0:$.left)??((ce=n==null?void 0:n.toeHorizontalDistance)==null?void 0:ce.left)??(n==null?void 0:n.left_toe_distance)??(n==null?void 0:n.toe_distance_left)),toeDistanceRight:ke(($==null?void 0:$.right)??((Q=n==null?void 0:n.toeHorizontalDistance)==null?void 0:Q.right)??(n==null?void 0:n.right_toe_distance)??(n==null?void 0:n.toe_distance_right)),kneeLeft:ke((R==null?void 0:R.left)??((ue=n==null?void 0:n.kneeFlex)==null?void 0:ue.left)??(n==null?void 0:n.left_knee_angle)),kneeRight:ke((R==null?void 0:R.right)??((E=n==null?void 0:n.kneeFlex)==null?void 0:E.right)??(n==null?void 0:n.right_knee_angle)),elbowLeft:ke((D==null?void 0:D.left)??((_=n==null?void 0:n.elbowAngle)==null?void 0:_.left)??(n==null?void 0:n.left_elbow_angle)),elbowRight:ke((D==null?void 0:D.right)??((C=n==null?void 0:n.elbowAngle)==null?void 0:C.right)??(n==null?void 0:n.right_elbow_angle))}}):[],el=(l,n)=>[l==null?void 0:l.phaseSnapshots,l==null?void 0:l.phase_snapshots,l==null?void 0:l.phaseImages,l==null?void 0:l.phase_images,l==null?void 0:l.threePhaseSnapshots,n==null?void 0:n.phaseSnapshots,n==null?void 0:n.phase_snapshots].filter(a=>Array.isArray(a)).flat().map(a=>({stepIndex:ke((a==null?void 0:a.stepIndex)??(a==null?void 0:a.step_index)??(a==null?void 0:a.step)??null),phase:(a==null?void 0:a.phase)??(a==null?void 0:a.phaseName)??(a==null?void 0:a.phase_name)??null,frame:ke((a==null?void 0:a.frame)??(a==null?void 0:a.frameIndex)??(a==null?void 0:a.frame_index)??null),image:(a==null?void 0:a.image)??(a==null?void 0:a.imageUrl)??(a==null?void 0:a.image_url)??(a==null?void 0:a.dataUrl)??(a==null?void 0:a.data_url)??null,label:(a==null?void 0:a.label)??null})).filter(a=>a.image||a.stepIndex!==null||a.frame!==null||a.phase!==null),Ts=["contact","initial","mid_support","mid","midsupport","toe_off","toeoff","final"],Fn=l=>{const n=l.toLowerCase(),p=Ts.findIndex(a=>n.includes(a));return p===-1?Ts.length:p},Vt=l=>l.length?l.reduce((p,a)=>p+a,0)/l.length:null,tl=[{key:"overview",label:"æ¦‚è¦"},{key:"stepMetrics",label:"ã‚¹ãƒ†ãƒƒãƒ—æŒ‡æ¨™"},{key:"step9",label:"Step 9 / ä¸‰å±€é¢"},{key:"aiAdvice",label:"AIã‚¢ãƒ‰ãƒã‚¤ã‚¹"},{key:"raw",label:"ä¿å­˜ãƒ‡ãƒ¼ã‚¿"}],nl=()=>{const l=St(),[n,p]=h.useState(!0),[a,f]=h.useState(null),[N,r]=h.useState([]),[d,$]=h.useState(null),[R,D]=h.useState(!1),[J,ie]=h.useState(!1),[me,ce]=h.useState(null),[Q,ue]=h.useState(null),[E,_]=h.useState("overview");h.useEffect(()=>{(async()=>{p(!0),$(null);const{data:A,error:se}=await ve.auth.getSession();if(se||!A.session){l("/login",{replace:!0});return}f(A.session.user.email??null);const{data:le,error:Fe}=await ve.from("running_analysis_sessions").select("*").order("created_at",{ascending:!1}).limit(10);if(console.log("Sessions data:",le),console.log("Sessions error:",Fe),Fe)if(Fe.message.includes("athlete_id")||Fe.message.includes("athlete_name")){const{data:de,error:he}=await ve.from("running_analysis_sessions").select("id, created_at, source_video_name, distance_m, section_time_s, avg_speed_mps, label").order("created_at",{ascending:!1}).limit(10);if(he)$(he.message);else{const j=(de??[]).map(Ne=>({...Ne,athlete_id:null,athlete_name:null}));r(j)}}else $(Fe.message);else r(le??[]);p(!1)})()},[l]);const C=async()=>{await ve.auth.signOut(),l("/login",{replace:!0})},V=async W=>{console.log("Viewing session details:",W),D(!0),ie(!0),ce(null),ue(null),_("overview");try{const A=xe=>{if(!xe)return null;if(typeof xe=="string")try{return JSON.parse(xe)}catch(ze){return console.warn("JSONãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è§£æã«å¤±æ•—:",ze,xe),null}return xe},se=A(W.session_data),le=A(W.metadata),Fe=Array.isArray(se==null?void 0:se.stepMetrics)?se.stepMetrics:[],de=Array.isArray(se==null?void 0:se.threePhaseAngles)?se.threePhaseAngles:[],he=(se==null?void 0:se.stepSummary)??null;let j=[],Ne=[],pe=null;try{const[{data:xe,error:ze},{data:Ge,error:Ye},{data:He,error:Ie}]=await Promise.all([ve.from("step_metrics").select("*").eq("session_id",W.id).order("step_index",{ascending:!0}),ve.from("three_phase_angles").select("*").eq("session_id",W.id).order("step_index",{ascending:!0}),ve.from("step_summaries").select("*").eq("session_id",W.id).limit(1)]);ze?console.warn("step_metrics fetch error:",ze):Array.isArray(xe)&&(j=xe),Ye?console.warn("three_phase_angles fetch error:",Ye):Array.isArray(Ge)&&(Ne=Ge),Ie?console.warn("step_summaries fetch error:",Ie):Array.isArray(He)&&He.length>0&&(pe=He[0])}catch(xe){console.warn("è©³ç´°ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—:",xe)}const je=(xe,ze,Ge)=>{const Ye=new Map,He=new Map;return ze.forEach((Ie,st)=>{const Pe=Ge(Ie,st);He.has(Pe)||He.set(Pe,He.size);const at=Ye.get(Pe);at?Ye.set(Pe,{...Ie,...at}):Ye.set(Pe,{...Ie})}),xe.forEach((Ie,st)=>{const Pe=Ge(Ie,st);He.has(Pe)||He.set(Pe,He.size);const at=Ye.get(Pe)??{};Ye.set(Pe,{...at,...Ie})}),Array.from(Ye.entries()).sort((Ie,st)=>{const Pe=He.get(Ie[0])??0,at=He.get(st[0])??0;return Pe===at?Ie[0].localeCompare(st[0],void 0,{numeric:!0,sensitivity:"base"}):Pe-at}).map(([,Ie])=>Ie)},De=je(j,Fe,(xe,ze)=>(ke((xe==null?void 0:xe.step_index)??(xe==null?void 0:xe.stepIndex)??(xe==null?void 0:xe.index)??ze)??ze).toString()),nt=je(Ne,de,(xe,ze)=>{const Ge=ke((xe==null?void 0:xe.step_index)??(xe==null?void 0:xe.stepIndex)??(xe==null?void 0:xe.step)??0)??0,Ye=((xe==null?void 0:xe.phase)??(xe==null?void 0:xe.phase_name)??(xe==null?void 0:xe.phaseName)??ze).toString().toLowerCase();return`${Ge}-${Ye}`}),rt={...he??{},...pe??{}},et=Object.keys(rt).length>0?rt:null,kt=el(se,le),wt={id:W.id,created_at:W.created_at,source_video_name:W.source_video_name||W.video_filename,distance_m:W.distance_m,section_time_s:W.section_time_s,avg_speed_mps:W.avg_speed_mps,avg_stride_m:W.avg_stride_m,avg_cadence_hz:W.avg_cadence_hz,avg_contact_time_s:W.avg_contact_time_s,avg_flight_time_s:W.avg_flight_time_s,frame_count:W.frame_count,frames_count:W.frames_count,target_fps:W.target_fps,source_video_duration_s:W.source_video_duration_s,section_start_type:W.section_start_type,section_end_type:W.section_end_type,section_start_frame:W.section_start_frame,section_end_frame:W.section_end_frame,notes:W.notes,label:W.label,stepMetrics:De,threePhaseAngles:nt,stepSummary:et,session_data:se,metadata:le,phaseSnapshots:kt,_raw:W};localStorage.setItem("viewSessionData",JSON.stringify(wt)),localStorage.setItem("viewSessionId",W.id),ue({session:W,analysisData:se,metadata:le,stepMetrics:De,threePhaseAngles:nt,stepSummary:et,phaseSnapshots:kt,sessionView:wt})}catch(A){console.error("Failed to load session details:",A),ce((A==null?void 0:A.message)??"ã‚»ãƒƒã‚·ãƒ§ãƒ³è©³ç´°ã®å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚")}finally{ie(!1)}},oe=()=>{D(!1)},L=W=>{const A=prompt("ãƒ©ãƒ™ãƒ«ã‚’ç·¨é›†:",W.label||"");A!==null&&Y(W.id,A)},Y=async(W,A)=>{const se=A.trim(),{error:le}=await ve.from("running_analysis_sessions").update({label:se.length?se:null}).eq("id",W);le?alert("æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ: "+le.message):(r(Fe=>Fe.map(de=>de.id===W?{...de,label:se.length?se:null}:de)),alert("ãƒ©ãƒ™ãƒ«ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚"))},ee=async W=>{if(!confirm("ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"))return;const{error:A}=await ve.from("running_analysis_sessions").delete().eq("id",W);A?alert("å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: "+A.message):window.location.reload()},ye=N.length,v=N[0]??null,be=v?new Date(v.created_at).toLocaleString("ja-JP"):"ã¾ã è§£æã¯ã‚ã‚Šã¾ã›ã‚“";return n?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:"èª­ã¿è¾¼ã¿ä¸­ã§ã™â€¦"}):e.jsxs("div",{style:{minHeight:"100vh",padding:24},children:[e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[e.jsxs("header",{style:{marginBottom:24,padding:16,borderRadius:16,background:"rgba(255,255,255,0.96)",boxShadow:"0 12px 30px rgba(0,0,0,0.08)",display:"flex",justifyContent:"space-between",alignItems:"center",border:"1px solid rgba(15, 23, 42, 0.08)"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:22,marginBottom:4,color:"#0f172a"},children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒšãƒ¼ã‚¸"}),e.jsxs("p",{style:{fontSize:13,color:"#4b5563",lineHeight:1.5},children:["ã‚³ãƒ¼ãƒï¼ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆç”¨ãƒã‚¤ãƒšãƒ¼ã‚¸ã§ã™ã€‚",e.jsx("br",{}),"ãƒ­ã‚°ã‚¤ãƒ³ä¸­ï¼š",a??"ä¸æ˜ãªãƒ¦ãƒ¼ã‚¶ãƒ¼"]})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{onClick:()=>l("/"),style:{padding:"8px 14px",borderRadius:999,border:"1px solid #2563eb",background:"#eff6ff",color:"#1d4ed8",fontSize:12,cursor:"pointer",fontWeight:600},children:"æ–°ã—ã„è§£æã‚’é–‹å§‹ â†’"}),e.jsx("button",{onClick:C,style:{padding:"8px 14px",borderRadius:999,border:"none",background:"#ef4444",color:"#fff",fontSize:12,cursor:"pointer",fontWeight:600},children:"ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:16,marginBottom:16},children:[e.jsx(Un,{title:"è§£æã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°ï¼ˆç›´è¿‘10ä»¶ï¼‰",value:`${ye} ä»¶`,caption:"ç›´è¿‘ 10 ä»¶åˆ†ã®è§£æå±¥æ­´ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚"}),e.jsx(Un,{title:"æœ€æ–°ã®è§£ææ—¥æ™‚",value:be,caption:"æœ€æ–°ã®è§£æã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆæ—¥æ™‚"}),e.jsx(Un,{title:"é¸æ‰‹ç®¡ç†",value:"è¤‡æ•°é¸æ‰‹ã®ç™»éŒ²ãƒ»ç®¡ç†",caption:"æ‹…å½“é¸æ‰‹ã‚’ç™»éŒ²ã—ã¦ãŠãã¨ã€ä»Šå¾Œã®è§£æçµæœã‚’é¸æ‰‹ã”ã¨ã«æ•´ç†ã§ãã¾ã™ã€‚"})]}),e.jsx("div",{style:{marginBottom:24,padding:12,borderRadius:12,background:"rgba(255,255,255,0.96)",border:"1px solid rgba(15,23,42,0.06)"},children:e.jsx(Bt,{to:"/athletes",style:{display:"inline-block",padding:"8px 14px",borderRadius:999,border:"1px solid #0f766e",fontSize:12,color:"#065f46",background:"#ecfdf5",fontWeight:600},children:"é¸æ‰‹ç®¡ç†ãƒšãƒ¼ã‚¸ã‚’é–‹ã â†’"})}),e.jsxs("section",{style:{padding:16,borderRadius:16,background:"rgba(255,255,255,0.96)",border:"1px solid rgba(15,23,42,0.06)",boxShadow:"0 12px 30px rgba(15,23,42,0.06)"},children:[e.jsx("h2",{style:{fontSize:18,marginBottom:4,color:"#111827"},children:"æœ€è¿‘ã®è§£æã‚»ãƒƒã‚·ãƒ§ãƒ³"}),e.jsx("p",{style:{fontSize:13,marginBottom:12,color:"#4b5563"},children:"è©³ç´°ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨è§£æçµæœã‚’ç¢ºèªã§ãã¾ã™ã€‚"}),d&&e.jsx("div",{style:{marginBottom:12,padding:8,borderRadius:8,background:"#fef2f2",color:"#b91c1c",fontSize:12},children:d}),N.length===0?e.jsxs("div",{style:{padding:24,borderRadius:12,border:"1px dashed rgba(148,163,184,0.9)",background:"#f9fafb",fontSize:13,color:"#4b5563",textAlign:"center"},children:["ã¾ã è§£æã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚",e.jsx("br",{}),"ä¸Šã®ã€Œæ–°ã—ã„è§£æã‚’é–‹å§‹ã€ã‹ã‚‰å‹•ç”»ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã¿ã¦ãã ã•ã„ã€‚"]}):e.jsx("div",{style:{overflowX:"auto",borderRadius:12,border:"1px solid rgba(148,163,184,0.6)",background:"#f9fafb"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,color:"#111827"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#e5edff"},children:[e.jsx("th",{style:Xt,children:"æ—¥æ™‚"}),e.jsx("th",{style:Xt,children:"å‹•ç”»å"}),e.jsx("th",{style:Xt,children:"è·é›¢(m)"}),e.jsx("th",{style:Xt,children:"åŒºé–“æ™‚é–“(s)"}),e.jsx("th",{style:Xt,children:"å¹³å‡é€Ÿåº¦(m/s)"}),e.jsx("th",{style:Xt,children:"ãƒ©ãƒ™ãƒ«"}),e.jsx("th",{style:Xt,children:"æ“ä½œ"})]})}),e.jsx("tbody",{children:N.map(W=>e.jsxs("tr",{children:[e.jsx("td",{style:qt,children:new Date(W.created_at).toLocaleString("ja-JP")}),e.jsx("td",{style:qt,children:W.source_video_name||W.video_filename||"-"}),e.jsx("td",{style:qt,children:W.distance_m??"-"}),e.jsx("td",{style:qt,children:W.section_time_s??"-"}),e.jsx("td",{style:qt,children:W.avg_speed_mps?W.avg_speed_mps.toFixed(2):"-"}),e.jsx("td",{style:qt,children:W.label??"-"}),e.jsxs("td",{style:qt,children:[e.jsx("button",{onClick:()=>V(W),style:{padding:"4px 8px",fontSize:11,borderRadius:4,border:"1px solid #cbd5e1",background:"white",color:"#3b82f6",cursor:"pointer",marginRight:4},children:"è©³ç´°"}),e.jsx("button",{onClick:()=>L(W),style:{padding:"4px 8px",fontSize:11,borderRadius:4,border:"1px solid #cbd5e1",background:"white",color:"#10b981",cursor:"pointer",marginRight:4},children:"ç·¨é›†"}),e.jsx("button",{onClick:()=>ee(W.id),style:{padding:"4px 8px",fontSize:11,borderRadius:4,border:"1px solid #fca5a5",background:"#fef2f2",color:"#ef4444",cursor:"pointer"},children:"å‰Šé™¤"})]})]},W.id))})]})})]})]}),e.jsx(wl,{open:R,data:Q,loading:J,error:me,activeTab:E,onTabChange:_,onClose:oe})]})},Un=({title:l,value:n,caption:p})=>e.jsxs("div",{style:{padding:16,borderRadius:12,background:"rgba(255,255,255,0.96)",border:"1px solid rgba(148,163,184,0.6)",boxShadow:"0 10px 24px rgba(15,23,42,0.04)"},children:[e.jsx("div",{style:{fontSize:12,marginBottom:4,color:"#6b7280"},children:l}),e.jsx("div",{style:{fontSize:18,fontWeight:600,marginBottom:4,color:"#111827"},children:n}),p&&e.jsx("div",{style:{fontSize:11,lineHeight:1.4,color:"#6b7280"},children:p})]}),sl={position:"fixed",inset:0,backgroundColor:"rgba(15, 23, 42, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",zIndex:2e3},il={width:"min(1100px, 100%)",maxHeight:"90vh",backgroundColor:"#ffffff",borderRadius:16,boxShadow:"0 24px 60px rgba(15, 23, 42, 0.25)",display:"flex",flexDirection:"column",overflow:"hidden"},ll={padding:"20px 24px",backgroundColor:"#ffffff",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:16},ol={margin:0,fontSize:20,fontWeight:700,color:"#0f172a"},rl={margin:"6px 0 0",color:"#64748b",fontSize:12},al={border:"none",background:"rgba(15, 23, 42, 0.08)",color:"#0f172a",borderRadius:999,width:32,height:32,fontSize:18,lineHeight:"32px",cursor:"pointer"},dl={padding:"12px 24px",borderBottom:"1px solid #e2e8f0",display:"flex",gap:8,overflowX:"auto",background:"#ffffff"},cl=l=>({border:"none",background:l?"#3b82f6":"#f8fafc",color:l?"#ffffff":"#64748b",padding:"8px 16px",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer",display:"inline-flex",alignItems:"center",gap:6,transition:"all 0.2s ease",whiteSpace:"nowrap"}),hl={display:"inline-flex",alignItems:"center",justifyContent:"center",minWidth:20,height:20,padding:"0 6px",borderRadius:10,background:"rgba(255,255,255,0.9)",color:"#3b82f6",fontSize:11,fontWeight:700},pl={flex:1,overflowY:"auto",padding:"24px",background:"#f8fafc"},gl={marginBottom:24},xl={fontSize:16,fontWeight:700,color:"#0f172a",marginBottom:8},ul={fontSize:12,color:"#64748b",margin:"0 0 12px"},Ws={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:12},_n={background:"#ffffff",border:"1px solid #e2e8f0",borderRadius:12,padding:12,boxShadow:"0 8px 16px rgba(15, 23, 42, 0.05)"},Bs={fontSize:12,color:"#64748b",marginBottom:4},Ds={fontSize:18,fontWeight:700,color:"#0f172a"},fl={fontSize:11,color:"#94a3b8",marginTop:4},Yn={display:"inline-flex",alignItems:"center",background:"#e0f2fe",color:"#0369a1",padding:"2px 8px",borderRadius:999,fontSize:11,fontWeight:600},Jn={overflowX:"auto",borderRadius:12,border:"1px solid #e2e8f0",background:"#ffffff"},Gn={width:"100%",borderCollapse:"collapse",fontSize:12},Re={textAlign:"left",padding:"10px 12px",background:"#eef2ff",borderBottom:"1px solid #e2e8f0",fontWeight:600,color:"#1e293b",whiteSpace:"nowrap"},Ce={padding:"10px 12px",borderBottom:"1px solid #e2e8f0",color:"#0f172a",whiteSpace:"nowrap"},ht={padding:24,borderRadius:12,border:"1px dashed #cbd5f5",background:"#f8fafc",color:"#475569",fontSize:13,textAlign:"center"},ml={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:16},bl={borderRadius:12,border:"1px solid #e2e8f0",overflow:"hidden",background:"#ffffff",boxShadow:"0 6px 18px rgba(15, 23, 42, 0.08)",display:"flex",flexDirection:"column"},yl={width:"100%",objectFit:"cover",aspectRatio:"4 / 3"},jl={padding:"10px 12px",fontSize:12,color:"#1f2937",borderTop:"1px solid #e2e8f0",background:"#f8fafc"},vl={background:"#fef3c7",border:"1px solid #fcd34d",color:"#92400e",padding:16,borderRadius:12,fontSize:13,lineHeight:1.6},Sl={background:"#ffffff",border:"1px solid #e2e8f0",borderRadius:12,padding:16,boxShadow:"0 8px 18px rgba(15, 23, 42, 0.05)",display:"flex",flexDirection:"column",gap:12},kl={display:"flex",justifyContent:"space-between",alignItems:"center",gap:8,color:"#0f172a"},Vn={background:"#0f172a",color:"#f8fafc",padding:16,borderRadius:12,fontFamily:"'JetBrains Mono', 'Fira Code', monospace",fontSize:12,lineHeight:1.5,overflowX:"auto",maxHeight:360},Ve=({title:l,description:n,children:p})=>e.jsxs("section",{style:gl,children:[e.jsx("h3",{style:xl,children:l}),n?e.jsx("p",{style:ul,children:n}):null,p]}),Wt=({items:l})=>l.length?e.jsx("div",{style:Ws,children:l.map(n=>e.jsxs("div",{style:_n,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[e.jsx("span",{style:Bs,children:n.label}),n.badge?e.jsx("span",{style:Yn,children:n.badge}):null]}),e.jsx("div",{style:Ds,children:n.value}),n.hint?e.jsx("div",{style:fl,children:n.hint}):null]},`${n.label}-${n.value}`))}):null,wl=({open:l,data:n,loading:p,error:a,activeTab:f,onTabChange:N,onClose:r})=>{const d=h.useMemo(()=>n?Qi(n.threePhaseAngles??[]):[],[n]);if(!l)return null;const $=J=>{J!==f&&N(J)},R=()=>{if(p)return e.jsx("div",{style:ht,children:"ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™â€¦"});if(a)return e.jsx("div",{style:{...ht,background:"#fef2f2",borderColor:"#fecaca",color:"#b91c1c"},children:a});if(!n)return e.jsx("div",{style:ht,children:"ã“ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è©³ç´°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚"});switch(f){case"overview":return e.jsx(Fl,{data:n});case"stepMetrics":return e.jsx(_l,{data:n});case"step9":return e.jsx($l,{data:n,normalizedAngles:d});case"aiAdvice":return e.jsx(Cl,{data:n});case"raw":return e.jsx(Nl,{data:n});default:return null}},D=(n==null?void 0:n.session.source_video_name)??(n==null?void 0:n.session.video_filename)??"è§£æã‚»ãƒƒã‚·ãƒ§ãƒ³";return e.jsx("div",{style:sl,children:e.jsxs("div",{style:il,children:[e.jsxs("div",{style:ll,children:[e.jsxs("div",{children:[e.jsx("h2",{style:ol,children:"è§£æçµæœè©³ç´°"}),e.jsxs("p",{style:rl,children:[D,"ï¼ˆ",n!=null&&n.session.created_at?new Date(n.session.created_at).toLocaleString("ja-JP"):"æ—¥æ™‚ä¸æ˜","ï¼‰"]})]}),e.jsx("button",{type:"button",style:al,onClick:r,"aria-label":"é–‰ã˜ã‚‹",children:"Ã—"})]}),e.jsx("div",{style:dl,children:tl.map(J=>e.jsxs("button",{type:"button",style:cl(J.key===f),onClick:()=>$(J.key),children:[J.label,J.key==="step9"&&d.length?e.jsx("span",{style:hl,children:d.length}):null]},J.key))}),e.jsx("div",{style:pl,children:R()})]})})},Fl=({data:l})=>{const{session:n,stepSummary:p,metadata:a,analysisData:f}=l,N=[{label:"ã‚»ãƒƒã‚·ãƒ§ãƒ³ID",value:`${n.id.slice(0,8)}â€¦`},{label:"è§£ææ—¥æ™‚",value:new Date(n.created_at).toLocaleString("ja-JP")},{label:"å‹•ç”»å",value:n.source_video_name??n.video_filename??"ãƒ¼"},{label:"ãƒ©ãƒ™ãƒ«",value:n.label??"ãƒ¼"}],r=[{label:"è·é›¢",value:nn(ke(n.distance_m),2)},{label:"åŒºé–“æ™‚é–“",value:n.section_time_s!==null&&n.section_time_s!==void 0?`${Number(n.section_time_s).toFixed(3)} s`:"ãƒ¼"},{label:"å¹³å‡é€Ÿåº¦",value:hn(ke(n.avg_speed_mps))},{label:"å¹³å‡ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰",value:nn(ke(n.avg_stride_m),2)},{label:"å¹³å‡ãƒ”ãƒƒãƒ",value:cn(ke(n.avg_cadence_hz))},{label:"å¹³å‡æ¥åœ°æ™‚é–“",value:vt(ke(n.avg_contact_time_s??null))},{label:"å¹³å‡æ»ç©ºæ™‚é–“",value:vt(ke(n.avg_flight_time_s??null))}],d=[],$=ke((p==null?void 0:p.stepCount)??(p==null?void 0:p.total_steps));$!==null&&d.push({label:"ã‚¹ãƒ†ãƒƒãƒ—æ•°",value:`${$}`});const R=ke((p==null?void 0:p.avgStride)??(p==null?void 0:p.avg_stride)??(p==null?void 0:p.avg_stride_length));R!==null&&d.push({label:"å¹³å‡ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰",value:nn(R,2)});const D=ke((p==null?void 0:p.avgStepPitch)??(p==null?void 0:p.avg_step_pitch)??(p==null?void 0:p.avg_cadence));D!==null&&d.push({label:"å¹³å‡ãƒ”ãƒƒãƒ",value:cn(D)});const J=ke((p==null?void 0:p.avgContact)??(p==null?void 0:p.avg_contact)??((p==null?void 0:p.avg_contact_time)!==void 0?p==null?void 0:p.avg_contact_time:null));J!==null&&d.push({label:"å¹³å‡æ¥åœ°æ™‚é–“",value:vt(J)});const ie=ke((p==null?void 0:p.avgFlight)??(p==null?void 0:p.avg_flight)??((p==null?void 0:p.avg_flight_time)!==void 0?p==null?void 0:p.avg_flight_time:null));ie!==null&&d.push({label:"å¹³å‡æ»ç©ºæ™‚é–“",value:vt(ie)});const me=ke((p==null?void 0:p.sectionSpeed)??(p==null?void 0:p.section_speed)??(p==null?void 0:p.avgSpeed)??(p==null?void 0:p.avg_speed)??(f==null?void 0:f.avgSpeed)??n.avg_speed_mps);me!==null&&d.push({label:"åŒºé–“å¹³å‡é€Ÿåº¦",value:hn(me)});const ce=h.useMemo(()=>a?Object.entries(a).filter(([,E])=>E!=null&&E!=="").map(([E,_])=>({label:E,value:Kn(_)})):[],[a]),Q=h.useMemo(()=>{const E=[];if(f!=null&&f.analysisType){const V=f.analysisType==="acceleration"?"åŠ é€Ÿå±€é¢ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆï¼‰":f.analysisType==="topSpeed"?"ãƒˆãƒƒãƒ—ã‚¹ãƒ”ãƒ¼ãƒ‰å±€é¢":String(f.analysisType);E.push({label:"è§£æãƒ¢ãƒ¼ãƒ‰",value:V})}f!=null&&f.timestamp&&E.push({label:"ä¿å­˜æ™‚åˆ»",value:new Date(f.timestamp).toLocaleString("ja-JP")});const _=ke(f==null?void 0:f.distance);_!==null&&E.push({label:"è§£æè·é›¢",value:`${_.toFixed(2)} m`});const C=ke(f==null?void 0:f.sectionTime);if(C!==null&&E.push({label:"åŒºé–“æ™‚é–“",value:`${C.toFixed(3)} s`}),f!=null&&f.sectionRange){const V=f.sectionRange;V.start!==void 0&&V.start!==null&&E.push({label:"é–‹å§‹ãƒ•ãƒ¬ãƒ¼ãƒ ",value:`${V.start}`}),V.mid!==void 0&&V.mid!==null&&E.push({label:"ä¸­é–“ãƒ•ãƒ¬ãƒ¼ãƒ ",value:`${V.mid}`}),V.end!==void 0&&V.end!==null&&E.push({label:"çµ‚äº†ãƒ•ãƒ¬ãƒ¼ãƒ ",value:`${V.end}`})}return E},[f]),ue=h.useMemo(()=>{const E=[],_=(f==null?void 0:f.athleteInfo)??{};return Object.entries(_).forEach(([C,V])=>{V!=null&&V!==""&&E.push({label:C,value:Kn(V)})}),n.athlete_name&&!E.find(C=>C.label==="ç™»éŒ²é¸æ‰‹å")&&E.unshift({label:"ç™»éŒ²é¸æ‰‹å",value:n.athlete_name}),n.athlete_id&&!E.find(C=>C.label==="Athlete ID")&&E.push({label:"Athlete ID",value:n.athlete_id}),E},[f==null?void 0:f.athleteInfo,n.athlete_id,n.athlete_name]);return e.jsxs(e.Fragment,{children:[e.jsx(Ve,{title:"åŸºæœ¬æƒ…å ±",children:e.jsx(Wt,{items:N})}),e.jsx(Ve,{title:"èµ°è¡Œã‚µãƒãƒªãƒ¼",children:e.jsx(Wt,{items:r})}),d.length?e.jsx(Ve,{title:"ã‚¹ãƒ†ãƒƒãƒ—æŒ‡æ¨™æ¦‚è¦",description:"ä¿å­˜æ¸ˆã¿ã‚¹ãƒ†ãƒƒãƒ—ã‚µãƒãƒªãƒ¼ã®ä¸»è¦å€¤ã§ã™ã€‚",children:e.jsx(Wt,{items:d})}):null,Q.length?e.jsx(Ve,{title:"è§£æãƒ¡ã‚¿æƒ…å ±",children:e.jsx(Wt,{items:Q})}):null,ce.length?e.jsx(Ve,{title:"ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿",children:e.jsx("div",{style:Ws,children:ce.map(E=>e.jsxs("div",{style:_n,children:[e.jsx("div",{style:Bs,children:E.label}),e.jsx("div",{style:{...Ds,fontSize:14},children:E.value})]},E.label))})}):null,ue.length?e.jsx(Ve,{title:"é¸æ‰‹æƒ…å ±",children:e.jsx(Wt,{items:ue})}):null,n.notes?e.jsx(Ve,{title:"ãƒ¡ãƒ¢",children:e.jsx("div",{style:vl,children:Es(n.notes)})}):null]})},_l=({data:l})=>{var ue;const n=Array.isArray(l.stepMetrics)?l.stepMetrics:[],p=l.analysisData??{},a=l.stepSummary??{},f=l.session,N=ke(((ue=p==null?void 0:p.sectionRange)==null?void 0:ue.mid)??(f==null?void 0:f.section_mid_frame)??(a==null?void 0:a.midFrame)??(a==null?void 0:a.mid_frame)??null),r=E=>xt(E,["contactFrame","contact_frame","contact_frame_index","frameIndex","frame"]),d=(E,_)=>{const C=E.map(V=>xt(V,_)).filter(V=>V!==null);return C.length?C.reduce((V,oe)=>V+oe,0)/C.length:null},$=()=>{if(!n.length)return{front:[],back:[]};if(N!==null){const _=n.filter(oe=>{const L=r(oe);return L!==null?L<N:!1}),C=n.filter(oe=>{const L=r(oe);return L!==null?L>=N:!1}),V=Math.ceil(n.length/2);return{front:_.length?_:n.slice(0,V),back:C.length?C:n.slice(V)}}const E=Math.ceil(n.length/2);return{front:n.slice(0,E),back:n.slice(E)}},{front:R,back:D}=$(),J=[{label:"ã‚¹ãƒ†ãƒƒãƒ—æ•°",value:`${ke((a==null?void 0:a.stepCount)??(a==null?void 0:a.total_steps))??n.length}`},{label:"å¹³å‡æ¥åœ°æ™‚é–“",value:vt(ke((a==null?void 0:a.avgContact)??(a==null?void 0:a.avg_contact))??d(n,["contactTime","contact_time"]))},{label:"å¹³å‡æ»ç©ºæ™‚é–“",value:vt(ke((a==null?void 0:a.avgFlight)??(a==null?void 0:a.avg_flight))??d(n,["flightTime","flight_time"]))},{label:"å¹³å‡ãƒ”ãƒƒãƒ",value:cn(ke((a==null?void 0:a.avgStepPitch)??(a==null?void 0:a.avg_step_pitch)??(a==null?void 0:a.avg_cadence))??d(n,["stepPitch","pitch","cadence"]))},{label:"å¹³å‡ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰",value:nn(ke((a==null?void 0:a.avgStride)??(a==null?void 0:a.avg_stride)??(a==null?void 0:a.avg_stride_length))??d(n,["fullStride","stride","stride_length"]),2)},{label:"å¹³å‡é€Ÿåº¦",value:hn(ke((a==null?void 0:a.avgSpeedMps)??(a==null?void 0:a.avg_speed)??(a==null?void 0:a.avg_speed_mps))??d(n,["speedMps","speed_mps","speed"]))}],ie=[];R.length&&D.length&&[{key:"æ¥åœ°æ™‚é–“",frontValue:d(R,["contactTime","contact_time"]),backValue:d(D,["contactTime","contact_time"]),formatter:_=>vt(_)},{key:"æ»ç©ºæ™‚é–“",frontValue:d(R,["flightTime","flight_time"]),backValue:d(D,["flightTime","flight_time"]),formatter:_=>vt(_)},{key:"ãƒ”ãƒƒãƒ",frontValue:d(R,["stepPitch","pitch","cadence"]),backValue:d(D,["stepPitch","pitch","cadence"]),formatter:_=>cn(_)},{key:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰",frontValue:d(R,["fullStride","stride","stride_length"]),backValue:d(D,["fullStride","stride","stride_length"]),formatter:_=>nn(_,2)},{key:"é€Ÿåº¦",frontValue:d(R,["speedMps","speed_mps","speed"]),backValue:d(D,["speedMps","speed_mps","speed"]),formatter:_=>hn(_)},{key:"åŠ é€Ÿåº¦",frontValue:d(R,["acceleration","accel"]),backValue:d(D,["acceleration","accel"]),formatter:_=>Ms(_)}].forEach(({key:_,frontValue:C,backValue:V,formatter:oe})=>{if(C!==null||V!==null){const L=C!==null&&V!==null?V-C:null;ie.push({label:_,value:`${oe(C)} â†’ ${oe(V)}`,hint:L!==null?`å¤‰åŒ–é‡: ${L>0?"+":""}${L.toFixed(3)}`:void 0})}});const me=ke(f.distance_m??(p==null?void 0:p.distance)),ce=ke((a==null?void 0:a.sectionTime)??(a==null?void 0:a.section_time)??(p==null?void 0:p.sectionTime)??f.section_time_s),Q=[];return me!==null&&Q.push({label:"è§£æè·é›¢ (è…°åŸºæº–)",value:`${me.toFixed(2)} m`}),ce!==null&&Q.push({label:"ãƒˆãƒ«ã‚½ãƒ¼é€šéã‚¿ã‚¤ãƒ ",value:`${ce.toFixed(3)} s`}),e.jsxs(e.Fragment,{children:[e.jsx(Ve,{title:"ã‚¹ãƒ†ãƒƒãƒ—çµ±è¨ˆã®ã‚µãƒãƒªãƒ¼",description:"ä¿å­˜æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å¾©å…ƒã—ãŸã‚¹ãƒ†ãƒƒãƒ—æŒ‡æ¨™ã®å¹³å‡å€¤ã§ã™ã€‚",children:e.jsx(Wt,{items:J})}),ie.length?e.jsx(Ve,{title:"å‰åŠ / å¾ŒåŠæ¯”è¼ƒ",description:"æ¥åœ°åŒºé–“ã®ä¸­é–“ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’å¢ƒã«å‰å¾ŒåŠã‚’æ¯”è¼ƒã—ã¦ã„ã¾ã™ã€‚",children:e.jsx(Wt,{items:ie})}):null,Q.length?e.jsx(Ve,{title:"åŒºé–“ãƒã‚¤ãƒ©ã‚¤ãƒˆ",children:e.jsx(Wt,{items:Q})}):null,e.jsx(Ve,{title:"å„ã‚¹ãƒ†ãƒƒãƒ—è©³ç´°",description:"Step 9 ã®æŒ‡æ¨™ã‚’è¡¨å½¢å¼ã§ç¢ºèªã§ãã¾ã™ã€‚",children:n.length?e.jsx("div",{style:Jn,children:e.jsxs("table",{style:Gn,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:Re,children:"#"}),e.jsx("th",{style:Re,children:"æ¥åœ°F"}),e.jsx("th",{style:Re,children:"é›¢åœ°F"}),e.jsx("th",{style:Re,children:"æ¥åœ°æ™‚é–“"}),e.jsx("th",{style:Re,children:"æ»ç©ºæ™‚é–“"}),e.jsx("th",{style:Re,children:"ãƒ”ãƒƒãƒ"}),e.jsx("th",{style:Re,children:"ã‚¹ãƒˆãƒ©ã‚¤ãƒ‰"}),e.jsx("th",{style:Re,children:"é€Ÿåº¦"}),e.jsx("th",{style:Re,children:"åŠ é€Ÿåº¦"}),e.jsx("th",{style:Re,children:"æ¸›é€Ÿç‡ / æ¨é€²ç‡"})]})}),e.jsx("tbody",{children:n.map((E,_)=>{const C=ke((E==null?void 0:E.index)??(E==null?void 0:E.stepIndex)??(E==null?void 0:E.step_index))??_+1,V=r(E),oe=xt(E,["toeOffFrame","toe_off_frame","toe_frame"]),L=xt(E,["contactTime","contact_time"]),Y=xt(E,["flightTime","flight_time"]),ee=xt(E,["stepPitch","pitch","cadence"]),ye=xt(E,["fullStride","stride","stride_length"]),v=xt(E,["speedMps","speed_mps","speed"]),be=xt(E,["acceleration","accel"]),W=xt(E,["brakeImpulseRatio","brake_impulse_ratio"]),A=xt(E,["kickImpulseRatio","kick_impulse_ratio"]);return e.jsxs("tr",{children:[e.jsx("td",{style:Ce,children:C}),e.jsx("td",{style:Ce,children:V!==null?Math.round(V):"ãƒ¼"}),e.jsx("td",{style:Ce,children:oe!==null?Math.round(oe):"ãƒ¼"}),e.jsx("td",{style:Ce,children:vt(L)}),e.jsx("td",{style:Ce,children:vt(Y)}),e.jsx("td",{style:Ce,children:cn(ee)}),e.jsx("td",{style:Ce,children:nn(ye,2)}),e.jsx("td",{style:Ce,children:hn(v)}),e.jsx("td",{style:Ce,children:Ms(be)}),e.jsx("td",{style:Ce,children:W!==null&&A!==null?`${Rs(W)} / ${Rs(A)}`:"ãƒ¼"})]},`step-${C}`)})})]})}):e.jsx("div",{style:ht,children:"ã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚"})})]})},$l=({data:l,normalizedAngles:n})=>{const p=l.phaseSnapshots??[],a=h.useMemo(()=>{if(!n.length)return[];const r=new Map;return n.forEach((d,$)=>{const R=d.phaseKey||`phase-${$}`;r.has(R)||r.set(R,{phaseKey:R,phaseLabel:d.phaseLabel,trunkValues:[],thighLeftValues:[],thighRightValues:[],leftToeValues:[],rightToeValues:[],kneeLeftValues:[],kneeRightValues:[],stepIndices:new Set});const D=r.get(R);D.phaseLabel=d.phaseLabel,D.stepIndices.add(d.stepIndex??`unknown-${$}`),d.trunkAngle!==null&&D.trunkValues.push(d.trunkAngle),d.thighLeft!==null&&D.thighLeftValues.push(d.thighLeft),d.thighRight!==null&&D.thighRightValues.push(d.thighRight),d.toeDistanceLeft!==null&&D.leftToeValues.push(d.toeDistanceLeft),d.toeDistanceRight!==null&&D.rightToeValues.push(d.toeDistanceRight),d.kneeLeft!==null&&D.kneeLeftValues.push(d.kneeLeft),d.kneeRight!==null&&D.kneeRightValues.push(d.kneeRight)}),Array.from(r.values()).map(d=>{const $=Vt(d.trunkValues),R=Vt(d.thighLeftValues),D=Vt(d.thighRightValues),J=Vt(d.leftToeValues),ie=Vt(d.rightToeValues),me=J!==null&&ie!==null?ie-J:null,ce=Vt(d.kneeLeftValues),Q=Vt(d.kneeRightValues);return{phaseKey:d.phaseKey,phaseLabel:d.phaseLabel,stepCount:d.stepIndices.size,trunkAvg:$,thighLeftAvg:R,thighRightAvg:D,leftToeAvg:J,rightToeAvg:ie,toeDiff:me,kneeLeftAvg:ce,kneeRightAvg:Q}}).sort((d,$)=>{const R=Fn(d.phaseKey)-Fn($.phaseKey);return R!==0?R:d.phaseLabel.localeCompare($.phaseLabel,"ja")})},[n]),f=h.useMemo(()=>{if(!n.length)return[];const r=new Map;return n.forEach(d=>{const $=d.stepIndex!==null?d.stepIndex:"unknown",R=r.get($)??[];R.push(d),r.set($,R)}),Array.from(r.entries()).map(([d,$])=>({stepIndex:d==="unknown"?null:d,angles:$.sort((R,D)=>{const J=Fn(R.phaseKey)-Fn(D.phaseKey);if(J!==0)return J;const ie=R.frame??Number.POSITIVE_INFINITY,me=D.frame??Number.POSITIVE_INFINITY;return ie!==me?ie-me:R.phaseLabel.localeCompare(D.phaseLabel,"ja")})})).sort((d,$)=>d.stepIndex===null&&$.stepIndex===null?0:d.stepIndex===null?1:$.stepIndex===null?-1:d.stepIndex-$.stepIndex)},[n]),N=h.useMemo(()=>a.length?a.reduce((r,d)=>{const $=d.toeDiff!==null?Math.abs(d.toeDiff):null;return $===null?r:!r||$>r.diffAbs?{phaseLabel:d.phaseLabel,diff:d.toeDiff,diffAbs:$}:r},null):null,[a]);return e.jsxs(e.Fragment,{children:[e.jsx(Ve,{title:"å±€é¢åˆ¥ãƒˆãƒ­ã‚«ãƒ³ã‚¿ãƒ¼-è¶³å…ˆè·é›¢",description:"Step 9ï¼ˆãƒ—ãƒ­ç‰ˆï¼‰ã§ä¿å­˜ã•ã‚ŒãŸãƒˆãƒ­ã‚«ãƒ³ã‚¿ãƒ¼-è¶³å…ˆè·é›¢ã¨è§’åº¦ãƒ‡ãƒ¼ã‚¿ã®å¹³å‡å€¤ã‚’å±€é¢ã”ã¨ã«ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚",children:a.length?e.jsxs(e.Fragment,{children:[N?e.jsxs("div",{style:{marginBottom:12,padding:12,borderRadius:12,background:"#ecfeff",border:"1px solid #22d3ee",color:"#0f172a",fontSize:12},children:["å·¦å³å·®ãŒæœ€å¤§ã®å±€é¢ï¼š",N.phaseLabel,"ï¼ˆ",N.diff>0?"+":"",N.diff.toFixed(1),"cmï¼‰"]}):null,e.jsx("div",{style:Jn,children:e.jsxs("table",{style:Gn,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:Re,children:"å±€é¢"}),e.jsx("th",{style:Re,children:"å¯¾è±¡ã‚¹ãƒ†ãƒƒãƒ—æ•°"}),e.jsx("th",{style:Re,children:"ä½“å¹¹è§’åº¦"}),e.jsx("th",{style:Re,children:"å·¦å¤§è…¿è§’åº¦"}),e.jsx("th",{style:Re,children:"å³å¤§è…¿è§’åº¦"}),e.jsx("th",{style:Re,children:"å·¦ãƒˆãƒ­ã‚«ãƒ³ã‚¿ãƒ¼-è¶³å…ˆè·é›¢"}),e.jsx("th",{style:Re,children:"å³ãƒˆãƒ­ã‚«ãƒ³ã‚¿ãƒ¼-è¶³å…ˆè·é›¢"}),e.jsx("th",{style:Re,children:"å·¦å³å·®"}),e.jsx("th",{style:Re,children:"å·¦è†è§’åº¦"}),e.jsx("th",{style:Re,children:"å³è†è§’åº¦"})]})}),e.jsx("tbody",{children:a.map(r=>e.jsxs("tr",{children:[e.jsx("td",{style:Ce,children:r.phaseLabel}),e.jsx("td",{style:Ce,children:r.stepCount}),e.jsx("td",{style:Ce,children:ct(r.trunkAvg)}),e.jsx("td",{style:Ce,children:ct(r.thighLeftAvg)}),e.jsx("td",{style:Ce,children:ct(r.thighRightAvg)}),e.jsx("td",{style:Ce,children:wn(r.leftToeAvg)}),e.jsx("td",{style:Ce,children:wn(r.rightToeAvg)}),e.jsx("td",{style:{...Ce,color:r.toeDiff!==null?r.toeDiff>0?"#16a34a":r.toeDiff<0?"#dc2626":Ce.color:Ce.color},children:r.toeDiff!==null?`${r.toeDiff>0?"+":""}${r.toeDiff.toFixed(1)}cm`:"ãƒ¼"}),e.jsx("td",{style:Ce,children:ct(r.kneeLeftAvg)}),e.jsx("td",{style:Ce,children:ct(r.kneeRightAvg)})]},`phase-summary-${r.phaseKey}`))})]})})]}):e.jsx("div",{style:ht,children:"ä¸‰å±€é¢è§’åº¦ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚è§£ææ™‚ã«ã‚¹ã‚±ãƒ«ãƒˆãƒ³è¡¨ç¤ºã‚’ã‚ªãƒ³ã«ã—ã¦ä¿å­˜ã—ã¦ãã ã•ã„ã€‚"})}),e.jsx(Ve,{title:"ã‚¹ãƒ†ãƒƒãƒ—åˆ¥ä¸‰å±€é¢è©³ç´°",description:"å„ã‚¹ãƒ†ãƒƒãƒ—ã§ä¿å­˜ã•ã‚ŒãŸä¸‰å±€é¢ï¼ˆæ¥åœ°ãƒ»å‚ç›´ãƒ»é›¢åœ°ãªã©ï¼‰ã®æŒ‡æ¨™ã‚’ç¢ºèªã§ãã¾ã™ã€‚",children:f.length?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16},children:f.map((r,d)=>e.jsxs("div",{style:Sl,children:[e.jsxs("div",{style:kl,children:[e.jsxs("strong",{children:["ã‚¹ãƒ†ãƒƒãƒ— ",r.stepIndex!==null?r.stepIndex:"ä¸æ˜"]}),e.jsxs("span",{style:{fontSize:12,color:"#94a3b8"},children:["å±€é¢æ•°: ",r.angles.length]})]}),e.jsx("div",{style:Jn,children:e.jsxs("table",{style:Gn,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:Re,children:"å±€é¢"}),e.jsx("th",{style:Re,children:"ãƒ•ãƒ¬ãƒ¼ãƒ "}),e.jsx("th",{style:Re,children:"ä½“å¹¹è§’åº¦"}),e.jsx("th",{style:Re,children:"å·¦å¤§è…¿è§’åº¦"}),e.jsx("th",{style:Re,children:"å³å¤§è…¿è§’åº¦"}),e.jsx("th",{style:Re,children:"å·¦ãƒˆãƒ­ã‚«ãƒ³ã‚¿ãƒ¼-è¶³å…ˆè·é›¢"}),e.jsx("th",{style:Re,children:"å³ãƒˆãƒ­ã‚«ãƒ³ã‚¿ãƒ¼-è¶³å…ˆè·é›¢"}),e.jsx("th",{style:Re,children:"å·¦è†è§’åº¦"}),e.jsx("th",{style:Re,children:"å³è†è§’åº¦"}),e.jsx("th",{style:Re,children:"å·¦è‚˜è§’åº¦"}),e.jsx("th",{style:Re,children:"å³è‚˜è§’åº¦"})]})}),e.jsx("tbody",{children:r.angles.map(($,R)=>e.jsxs("tr",{children:[e.jsx("td",{style:Ce,children:$.phaseLabel}),e.jsx("td",{style:Ce,children:$.frame!==null&&$.frame!==void 0?$.frame:"ãƒ¼"}),e.jsx("td",{style:Ce,children:ct($.trunkAngle)}),e.jsx("td",{style:Ce,children:ct($.thighLeft)}),e.jsx("td",{style:Ce,children:ct($.thighRight)}),e.jsx("td",{style:Ce,children:wn($.toeDistanceLeft)}),e.jsx("td",{style:Ce,children:wn($.toeDistanceRight)}),e.jsx("td",{style:Ce,children:ct($.kneeLeft)}),e.jsx("td",{style:Ce,children:ct($.kneeRight)}),e.jsx("td",{style:Ce,children:ct($.elbowLeft)}),e.jsx("td",{style:Ce,children:ct($.elbowRight)})]},`${r.stepIndex??"unknown"}-${$.phaseKey}-${$.frame??R}`))})]})})]},`step-${r.stepIndex??`unknown-${d}`}`))}):e.jsx("div",{style:ht,children:"ä¸‰å±€é¢è§’åº¦ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚"})}),e.jsx(Ve,{title:"å±€é¢ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ",description:"ä¿å­˜ã•ã‚ŒãŸå„å±€é¢ã®ç”»åƒã‚’ä¸€è¦§è¡¨ç¤ºã—ã¾ã™ã€‚",children:p.length?e.jsx("div",{style:ml,children:p.map((r,d)=>e.jsxs("div",{style:bl,children:[r.image?e.jsx("img",{src:r.image,alt:`${r.phase??"phase"} snapshot`,style:yl}):e.jsx("div",{style:{...ht,margin:0,border:"none",boxShadow:"none"},children:"ç”»åƒãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"}),e.jsxs("div",{style:jl,children:[e.jsx("strong",{children:r.phase??"å±€é¢ä¸æ˜"}),e.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:["ã‚¹ãƒ†ãƒƒãƒ— ",r.stepIndex??"ãƒ¼"," / ãƒ•ãƒ¬ãƒ¼ãƒ  ",r.frame??"ãƒ¼"]}),r.label?e.jsx("div",{style:{fontSize:11,color:"#475569",marginTop:4},children:r.label}):null]})]},`snapshot-${d}`))}):e.jsx("div",{style:ht,children:"å±€é¢ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚"})})]})},Cl=({data:l})=>{var a,f;const n=(a=l.analysisData)==null?void 0:a.aiEvaluation,p=typeof((f=l.analysisData)==null?void 0:f.targetAdvice)=="string"?l.analysisData.targetAdvice:null;return e.jsxs(e.Fragment,{children:[e.jsx(Ve,{title:"AIè©•ä¾¡",children:n?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{background:"#eef2ff",border:"1px solid #c7d2fe",borderRadius:12,padding:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[n.overallRating?e.jsx("span",{style:{...Yn,background:"#4338ca",color:"#ffffff"},children:n.overallRating}):null,n.avgScore!==void 0&&n.avgScore!==null?e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:"#1d4ed8"},children:["ã‚¹ã‚³ã‚¢: ",Kn(n.avgScore)]}):null]}),n.overallMessage?e.jsx("p",{style:{margin:"12px 0 0",color:"#1e293b",lineHeight:1.6},children:n.overallMessage}):null]}),Array.isArray(n.evaluations)&&n.evaluations.length?e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:12},children:n.evaluations.map((N,r)=>e.jsxs("div",{style:_n,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6},children:[N.icon?e.jsx("span",{style:{fontSize:18},children:N.icon}):null,e.jsx("span",{style:{fontWeight:600,color:"#0f172a"},children:N.category??`é …ç›®${r+1}`})]}),N.message?e.jsx("p",{style:{fontSize:12,lineHeight:1.6,color:"#334155",marginBottom:6},children:N.message}):null,N.advice?e.jsx("p",{style:{fontSize:12,lineHeight:1.6,color:"#0f172a",margin:0},children:N.advice}):null,N.score?e.jsx("div",{style:{marginTop:8},children:e.jsx("span",{style:Yn,children:N.score})}):null]},`eval-${r}`))}):null]}):e.jsx("div",{style:ht,children:"AIè©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã¯ä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚è§£ææ™‚ã«ã‚¹ã‚±ãƒ«ãƒˆãƒ³è¡¨ç¤ºã¨ãƒãƒ¼ã‚«ãƒ¼è¨­å®šãŒå®Œäº†ã—ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚"})}),e.jsx(Ve,{title:"100mç›®æ¨™è¨˜éŒ²ã‚¢ãƒ‰ãƒã‚¤ã‚¹",children:p?e.jsx("div",{style:_n,children:e.jsx("div",{style:{fontSize:13,lineHeight:1.7,color:"#1f2937"},children:Es(p)})}):e.jsx("div",{style:ht,children:"100mç›®æ¨™è¨˜éŒ²ã«åŸºã¥ãã‚¢ãƒ‰ãƒã‚¤ã‚¹ã¯ä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚è§£ææ™‚ã«é¸æ‰‹æƒ…å ±ã®ç›®æ¨™è¨˜éŒ²ã‚’è¨­å®šã™ã‚‹ã¨ç”Ÿæˆã•ã‚Œã¾ã™ã€‚"})})]})},Nl=({data:l})=>e.jsxs(e.Fragment,{children:[e.jsx(Ve,{title:"è§£æçµæœ JSON",children:l.analysisData?e.jsx("pre",{style:Vn,children:JSON.stringify(l.analysisData,null,2)}):e.jsx("div",{style:ht,children:"è§£æãƒ‡ãƒ¼ã‚¿ã¯ä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚"})}),e.jsx(Ve,{title:"ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ JSON",children:l.metadata?e.jsx("pre",{style:Vn,children:JSON.stringify(l.metadata,null,2)}):e.jsx("div",{style:ht,children:"ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¯ä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚"})}),e.jsx(Ve,{title:"ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£",children:e.jsx("pre",{style:Vn,children:JSON.stringify(l.session,null,2)})})]}),Xt={padding:"8px 10px",borderBottom:"1px solid #cbd5f5",textAlign:"left",whiteSpace:"nowrap"},qt={padding:"8px 10px",borderBottom:"1px solid #e5e7eb",whiteSpace:"nowrap"},zl=()=>{const l=St(),[n,p]=h.useState(!0),[a,f]=h.useState([]),[N,r]=h.useState(null),[d,$]=h.useState(""),[R,D]=h.useState(""),[J,ie]=h.useState(""),[me,ce]=h.useState(""),[Q,ue]=h.useState(""),[E,_]=h.useState(""),[C,V]=h.useState(""),[oe,L]=h.useState(""),[Y,ee]=h.useState(""),[ye,v]=h.useState(!1),[be,W]=h.useState(null);h.useEffect(()=>{(async()=>{p(!0),r(null);const{data:Ne,error:pe}=await ve.auth.getSession();if(pe||!Ne.session){l("/login",{replace:!0});return}const je=Ne.session.user.id,{data:De,error:nt}=await ve.from("athletes").select("*").eq("owner_auth_user_id",je).order("created_at",{ascending:!1});nt?r(nt.message):f(De??[]),p(!1)})()},[l]);const A=j=>{const Ne=j.trim();if(Ne==="")return null;const pe=Number(Ne);return Number.isNaN(pe)?null:pe},se=()=>{$(""),D(""),ie(""),ce(""),ue(""),_(""),V(""),L(""),ee(""),W(null)},le=async j=>{if(j.preventDefault(),r(null),!d.trim()){r("æ°åã¯å¿…é ˆã§ã™ã€‚");return}v(!0);try{const{data:Ne,error:pe}=await ve.auth.getSession();if(pe||!Ne.session){l("/login",{replace:!0});return}const De={owner_auth_user_id:Ne.session.user.id,full_name:d.trim(),full_name_kana:R.trim()||null,sex:J||null,birth_date:me||null,affiliation:Q.trim()||null,notes:E.trim()||null,height_cm:A(C),current_record_s:A(oe),target_record_s:A(Y)};if(be){const{data:nt,error:rt}=await ve.from("athletes").update(De).eq("id",be).select("*").single();if(rt){r("é¸æ‰‹æƒ…å ±ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸï¼š"+rt.message),v(!1);return}f(et=>et.map(kt=>kt.id===be?nt:kt))}else{const{data:nt,error:rt}=await ve.from("athletes").insert(De).select("*").single();if(rt){r("é¸æ‰‹ã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸï¼š"+rt.message),v(!1);return}f(et=>[nt,...et])}se()}catch(Ne){console.error(Ne),r("äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚")}finally{v(!1)}},Fe=j=>{W(j.id),$(j.full_name),D(j.full_name_kana??""),ie(j.sex??""),ce(j.birth_date??""),ue(j.affiliation??""),_(j.notes??""),V(j.height_cm!=null?String(j.height_cm):""),L(j.current_record_s!=null?String(j.current_record_s):""),ee(j.target_record_s!=null?String(j.target_record_s):""),window.scrollTo({top:0,behavior:"smooth"})},de=async(j,Ne)=>{if(!window.confirm(`ã€Œ${Ne}ã€ã®é¸æ‰‹ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ
ï¼ˆã“ã®é¸æ‰‹ã«ç´ã¥ãè§£æãƒ‡ãƒ¼ã‚¿ãªã©ã¯åˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã«æ®‹ã£ã¦ã„ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼‰`))return;const{error:je}=await ve.from("athletes").delete().eq("id",j);if(je){console.error("é¸æ‰‹ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ",je),alert("é¸æ‰‹ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸï¼š"+je.message);return}f(De=>De.filter(nt=>nt.id!==j)),be===j&&se()};if(n)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:"èª­ã¿è¾¼ã¿ä¸­ã§ã™â€¦"});const he=be!==null;return e.jsx("div",{style:{minHeight:"100vh",padding:24},children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,padding:16,borderRadius:16,background:"rgba(255,255,255,0.96)",boxShadow:"0 12px 30px rgba(0,0,0,0.08)",border:"1px solid rgba(15,23,42,0.08)"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:22,marginBottom:4,color:"#0f172a"},children:"é¸æ‰‹ç®¡ç†"}),e.jsxs("p",{style:{fontSize:13,color:"#4b5563",lineHeight:1.5},children:["ã‚³ãƒ¼ãƒï¼ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆãŒæ‹…å½“ã™ã‚‹é¸æ‰‹ã‚’ç™»éŒ²ãƒ»ç®¡ç†ã—ã¾ã™ã€‚",e.jsx("br",{}),"èº«é•·ã‚„ç¾åœ¨ã®è¨˜éŒ²ãƒ»ç›®æ¨™è¨˜éŒ²ã‚‚ã“ã“ã§ç™»éŒ²ãƒ»ç·¨é›†ã§ãã¾ã™ã€‚"]})]}),e.jsx(Bt,{to:"/dashboard",style:{padding:"8px 14px",borderRadius:999,border:"1px solid #e5e7eb",fontSize:12,color:"#111827",background:"#f9fafb",fontWeight:500},children:"â† ãƒã‚¤ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹"})]}),e.jsxs("section",{style:{marginBottom:24,padding:16,borderRadius:16,background:"rgba(255,255,255,0.96)",border:"1px solid rgba(15,23,42,0.06)",boxShadow:"0 12px 30px rgba(15,23,42,0.06)"},children:[e.jsx("h2",{style:{fontSize:18,marginBottom:4,color:"#111827"},children:he?"é¸æ‰‹æƒ…å ±ã®ç·¨é›†":"é¸æ‰‹ã®æ–°è¦ç™»éŒ²"}),e.jsx("p",{style:{fontSize:13,marginBottom:12,color:"#4b5563"},children:he?"é¸æ‰‹ã®åŸºæœ¬æƒ…å ±ã‚„èº«é•·ãƒ»è¨˜éŒ²ã‚’ä¿®æ­£ã—ã¦ã€Œå¤‰æ›´ã‚’ä¿å­˜ã™ã‚‹ã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚":"é¸æ‰‹åã‚„åŸºæœ¬æƒ…å ±ã«åŠ ãˆã¦ã€èº«é•·ãƒ»ç¾åœ¨ã®è¨˜éŒ²ãƒ»ç›®æ¨™è¨˜éŒ²ã‚‚ç™»éŒ²ã—ã¦ãŠãã¨ã€è§£æçµæœã®è§£é‡ˆã‚„ç›®æ¨™è¨­å®šã«å½¹ç«‹ã¡ã¾ã™ã€‚"}),e.jsxs("form",{onSubmit:le,children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:12},children:[e.jsxs("div",{children:[e.jsxs("label",{style:Nt,children:["æ°å",e.jsx("span",{style:Ml,children:"*"})]}),e.jsx("input",{type:"text",value:d,onChange:j=>$(j.target.value),style:zt,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:Nt,children:"æ°åï¼ˆã‹ãªï¼‰"}),e.jsx("input",{type:"text",value:R,onChange:j=>D(j.target.value),style:zt})]}),e.jsxs("div",{children:[e.jsx("label",{style:Nt,children:"æ€§åˆ¥"}),e.jsxs("select",{value:J,onChange:j=>ie(j.target.value),style:zt,children:[e.jsx("option",{value:"",children:"é¸æŠã—ã¦ãã ã•ã„"}),e.jsx("option",{value:"ç”·",children:"ç”·"}),e.jsx("option",{value:"å¥³",children:"å¥³"}),e.jsx("option",{value:"ãã®ä»–",children:"ãã®ä»–"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:Nt,children:"ç”Ÿå¹´æœˆæ—¥"}),e.jsx("input",{type:"date",value:me,onChange:j=>ce(j.target.value),style:zt})]}),e.jsxs("div",{children:[e.jsx("label",{style:Nt,children:"æ‰€å±ï¼ˆå­¦æ ¡ãƒ»ãƒãƒ¼ãƒ ç­‰ï¼‰"}),e.jsx("input",{type:"text",value:Q,onChange:j=>ue(j.target.value),style:zt})]}),e.jsxs("div",{children:[e.jsx("label",{style:Nt,children:"èº«é•·ï¼ˆcmï¼‰"}),e.jsx("input",{type:"number",inputMode:"decimal",value:C,onChange:j=>V(j.target.value),style:zt,placeholder:"170"})]}),e.jsxs("div",{children:[e.jsx("label",{style:Nt,children:"ç¾åœ¨ã®è¨˜éŒ²ï¼ˆç§’ï¼‰"}),e.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:oe,onChange:j=>L(j.target.value),style:zt,placeholder:"12.50"})]}),e.jsxs("div",{children:[e.jsx("label",{style:Nt,children:"ç›®æ¨™è¨˜éŒ²ï¼ˆç§’ï¼‰"}),e.jsx("input",{type:"number",inputMode:"decimal",step:"0.01",value:Y,onChange:j=>ee(j.target.value),style:zt,placeholder:"12.00"})]})]}),e.jsx("label",{style:{...Nt,marginTop:12},children:"ãƒ¡ãƒ¢ãƒ»ç‰¹è¨˜äº‹é …"}),e.jsx("textarea",{value:E,onChange:j=>_(j.target.value),rows:3,style:{...zt,resize:"vertical",minHeight:70}}),N&&e.jsx("div",{style:{marginTop:12,padding:8,borderRadius:8,background:"#fef2f2",color:"#b91c1c",fontSize:12},children:N}),e.jsxs("div",{style:{marginTop:16,display:"flex",gap:8,alignItems:"center"},children:[e.jsx("button",{type:"submit",disabled:ye,style:{padding:"10px 18px",borderRadius:999,border:"none",background:ye?"#9ca3af":"#22c55e",color:"#fff",fontSize:14,fontWeight:600,cursor:ye?"default":"pointer"},children:ye?"é€ä¿¡ä¸­â€¦":he?"å¤‰æ›´ã‚’ä¿å­˜ã™ã‚‹":"é¸æ‰‹ã‚’ç™»éŒ²ã™ã‚‹"}),he&&e.jsx("button",{type:"button",onClick:se,style:{padding:"8px 14px",borderRadius:999,border:"1px solid #d1d5db",background:"#ffffff",color:"#111827",fontSize:12,cursor:"pointer"},children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼ˆæ–°è¦ç™»éŒ²ã«æˆ»ã‚‹ï¼‰"})]})]})]}),e.jsxs("section",{style:{padding:16,borderRadius:16,background:"rgba(255,255,255,0.96)",border:"1px solid rgba(15,23,42,0.06)",boxShadow:"0 12px 30px rgba(15,23,42,0.06)"},children:[e.jsx("h2",{style:{fontSize:18,marginBottom:8,color:"#111827"},children:"ç™»éŒ²æ¸ˆã¿ã®é¸æ‰‹ä¸€è¦§"}),a.length===0?e.jsxs("div",{style:{padding:24,borderRadius:12,border:"1px dashed rgba(148,163,184,0.9)",background:"#f9fafb",fontSize:13,color:"#4b5563",textAlign:"center"},children:["ã¾ã é¸æ‰‹ã¯ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚",e.jsx("br",{}),"ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰æ‹…å½“é¸æ‰‹ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚"]}):e.jsx("div",{style:{overflowX:"auto",borderRadius:12,border:"1px solid rgba(148,163,184,0.6)",background:"#f9fafb"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,color:"#111827"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#e5edff"},children:[e.jsx("th",{style:ut,children:"ç™»éŒ²æ—¥æ™‚"}),e.jsx("th",{style:ut,children:"æ°å"}),e.jsx("th",{style:ut,children:"æ°åï¼ˆã‹ãªï¼‰"}),e.jsx("th",{style:ut,children:"æ€§åˆ¥"}),e.jsx("th",{style:ut,children:"ç”Ÿå¹´æœˆæ—¥"}),e.jsx("th",{style:ut,children:"æ‰€å±"}),e.jsx("th",{style:ut,children:"èº«é•·(cm)"}),e.jsx("th",{style:ut,children:"ç¾åœ¨ã®è¨˜éŒ²(s)"}),e.jsx("th",{style:ut,children:"ç›®æ¨™è¨˜éŒ²(s)"}),e.jsx("th",{style:ut,children:"ãƒ¡ãƒ¢"}),e.jsx("th",{style:ut,children:"æ“ä½œ"})]})}),e.jsx("tbody",{children:a.map(j=>e.jsxs("tr",{children:[e.jsx("td",{style:ft,children:new Date(j.created_at).toLocaleString("ja-JP")}),e.jsx("td",{style:ft,children:j.full_name}),e.jsx("td",{style:ft,children:j.full_name_kana??"-"}),e.jsx("td",{style:ft,children:j.sex??"-"}),e.jsx("td",{style:ft,children:j.birth_date??"-"}),e.jsx("td",{style:ft,children:j.affiliation??"-"}),e.jsx("td",{style:ft,children:j.height_cm!=null?`${j.height_cm}`:"-"}),e.jsx("td",{style:ft,children:j.current_record_s!=null?`${j.current_record_s}`:"-"}),e.jsx("td",{style:ft,children:j.target_record_s!=null?`${j.target_record_s}`:"-"}),e.jsx("td",{style:ft,children:j.notes??"-"}),e.jsx("td",{style:ft,children:e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{type:"button",onClick:()=>Fe(j),style:{padding:"4px 10px",borderRadius:999,border:"1px solid #3b82f6",background:"#eff6ff",color:"#1d4ed8",fontSize:11,cursor:"pointer"},children:"ç·¨é›†"}),e.jsx("button",{type:"button",onClick:()=>de(j.id,j.full_name),style:{padding:"4px 10px",borderRadius:999,border:"1px solid #f97373",background:"#fef2f2",color:"#b91c1c",fontSize:11,cursor:"pointer"},children:"å‰Šé™¤"})]})})]},j.id))})]})})]})]})})},Nt={display:"block",fontSize:12,marginBottom:4,color:"#374151"},zt={width:"100%",padding:"8px 10px",borderRadius:8,border:"1px solid #d1d5db",background:"#ffffff",color:"#111827",fontSize:13},Ml={color:"#f97316",marginLeft:4},ut={padding:"8px 10px",borderBottom:"1px solid #cbd5f5",textAlign:"left",whiteSpace:"nowrap"},ft={padding:"8px 10px",borderBottom:"1px solid #e5e7eb",whiteSpace:"nowrap"},Rl=()=>{const l=St(),[n,p]=h.useState(!0),[a,f]=h.useState(!1),[N,r]=h.useState(null),[d,$]=h.useState(null),[R,D]=h.useState(null),[J,ie]=h.useState(""),[me,ce]=h.useState(""),[Q,ue]=h.useState(""),[E,_]=h.useState(""),[C,V]=h.useState(""),[oe,L]=h.useState(""),[Y,ee]=h.useState("");h.useEffect(()=>{(async()=>{p(!0),r(null),$(null);const{data:be,error:W}=await ve.auth.getSession();if(W||!be.session){l("/login",{replace:!0});return}const A=be.session.user.id,se=be.session.user.email??null,{data:le,error:Fe}=await ve.from("app_users").select("*").eq("auth_user_id",A).single();if(Fe){r("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã¾ã  app_users ã«ç™»éŒ²ã•ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚"),p(!1);return}const de={id:le.id,full_name:le.full_name??null,full_name_kana:le.full_name_kana??null,email:se,birth_date:le.birth_date??null,postal_code:le.postal_code??null,prefecture:le.prefecture??null,occupation:le.occupation??null,affiliation:le.affiliation??null};D(de),ie(de.full_name??""),ce(de.full_name_kana??""),ue(de.birth_date??""),_(de.postal_code??""),V(de.prefecture??""),L(de.occupation??""),ee(de.affiliation??""),p(!1)})()},[l]);const ye=async v=>{if(v.preventDefault(),!R)return;f(!0),r(null),$(null);const{error:be}=await ve.from("app_users").update({full_name:J.trim()||null,full_name_kana:me.trim()||null,birth_date:Q||null,postal_code:E.trim()||null,prefecture:C.trim()||null,occupation:oe.trim()||null,affiliation:Y.trim()||null}).eq("id",R.id);be?r("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸï¼š"+be.message):$("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚"),f(!1)};return n?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™â€¦"}):R?e.jsx("div",{style:{minHeight:"100vh",padding:24},children:e.jsxs("div",{style:{maxWidth:720,margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:24,padding:16,borderRadius:16,background:"rgba(255,255,255,0.96)",boxShadow:"0 12px 30px rgba(15,23,42,0.06)",border:"1px solid rgba(148,163,184,0.6)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:22,marginBottom:4,color:"#0f172a"},children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±"}),e.jsx("p",{style:{fontSize:13,color:"#4b5563",lineHeight:1.5},children:"ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ç´ã¥ãåŸºæœ¬æƒ…å ±ã‚’ç¢ºèªãƒ»ç·¨é›†ã§ãã¾ã™ã€‚"})]}),e.jsx(Bt,{to:"/dashboard",style:{padding:"8px 14px",borderRadius:999,border:"1px solid #e5e7eb",fontSize:12,color:"#111827",background:"#f9fafb"},children:"â† ãƒã‚¤ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹"})]}),e.jsxs("form",{onSubmit:ye,style:{padding:16,borderRadius:16,background:"rgba(255,255,255,0.96)",boxShadow:"0 12px 30px rgba(15,23,42,0.06)",border:"1px solid rgba(148,163,184,0.6)"},children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("label",{style:At,children:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆå¤‰æ›´ä¸å¯ï¼‰"}),e.jsx("input",{type:"email",value:R.email??"",disabled:!0,style:{...Pt,background:"#f3f4f6",color:"#6b7280"}})]}),e.jsxs("div",{style:{display:"grid",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{style:At,children:"æ°å"}),e.jsx("input",{type:"text",value:J,onChange:v=>ie(v.target.value),style:Pt})]}),e.jsxs("div",{children:[e.jsx("label",{style:At,children:"æ°åï¼ˆã‹ãªï¼‰"}),e.jsx("input",{type:"text",value:me,onChange:v=>ce(v.target.value),style:Pt})]}),e.jsxs("div",{children:[e.jsx("label",{style:At,children:"ç”Ÿå¹´æœˆæ—¥"}),e.jsx("input",{type:"date",value:Q,onChange:v=>ue(v.target.value),style:Pt})]}),e.jsxs("div",{children:[e.jsx("label",{style:At,children:"éƒµä¾¿ç•ªå·"}),e.jsx("input",{type:"text",value:E,onChange:v=>_(v.target.value),style:Pt})]}),e.jsxs("div",{children:[e.jsx("label",{style:At,children:"æ‰€åœ¨åœ°ï¼ˆçœŒï¼‰"}),e.jsx("input",{type:"text",value:C,onChange:v=>V(v.target.value),style:Pt})]}),e.jsxs("div",{children:[e.jsx("label",{style:At,children:"è·æ¥­ï¼ˆä»»æ„ï¼‰"}),e.jsx("input",{type:"text",value:oe,onChange:v=>L(v.target.value),style:Pt})]}),e.jsxs("div",{children:[e.jsx("label",{style:At,children:"æ‰€å±ï¼ˆä»»æ„ï¼‰"}),e.jsx("input",{type:"text",value:Y,onChange:v=>ee(v.target.value),style:Pt})]})]}),N&&e.jsx("div",{style:{marginTop:12,padding:8,borderRadius:8,background:"#fef2f2",color:"#b91c1c",fontSize:12},children:N}),d&&e.jsx("div",{style:{marginTop:12,padding:8,borderRadius:8,background:"#ecfdf5",color:"#047857",fontSize:12},children:d}),e.jsx("div",{style:{marginTop:20},children:e.jsx("button",{type:"submit",disabled:a,style:{padding:"10px 18px",borderRadius:999,border:"none",background:a?"#9ca3af":"#2563eb",color:"#fff",fontSize:14,fontWeight:600,cursor:a?"default":"pointer"},children:a?"ä¿å­˜ä¸­â€¦":"å¤‰æ›´ã‚’ä¿å­˜ã™ã‚‹"})})]})]})}):e.jsx("div",{style:{minHeight:"100vh",padding:24},children:e.jsx("div",{style:{maxWidth:720,margin:"0 auto"},children:e.jsxs("div",{style:{padding:20,borderRadius:16,background:"rgba(255,255,255,0.96)",boxShadow:"0 12px 30px rgba(15,23,42,0.06)",border:"1px solid rgba(148,163,184,0.6)"},children:[e.jsx("h1",{style:{fontSize:20,marginBottom:8,color:"#111827"},children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"}),e.jsxs("p",{style:{fontSize:13,color:"#4b5563",lineHeight:1.6},children:["app_users ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒç™»éŒ²ã•ã‚Œã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚",e.jsx("br",{}),"ä¸€åº¦ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¦å†åº¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã‹ã‚‰ã‚„ã‚Šç›´ã™ã‹ã€ç®¡ç†è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚"]}),e.jsx("div",{style:{marginTop:16},children:e.jsx(Bt,{to:"/dashboard",style:{padding:"8px 14px",borderRadius:999,border:"1px solid #e5e7eb",background:"#f9fafb",color:"#111827",fontSize:12},children:"â† ãƒã‚¤ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹"})})]})})})},At={display:"block",fontSize:12,marginBottom:4,color:"#374151"},Pt={width:"100%",padding:"8px 10px",borderRadius:8,border:"1px solid #d1d5db",background:"#ffffff",color:"#111827",fontSize:13},Tl=()=>{const[l,n]=h.useState(""),[p,a]=h.useState(""),[f,N]=h.useState(!1),[r,d]=h.useState(null),$=St(),R=async D=>{D.preventDefault(),d(null),N(!0);const{error:J}=await ve.auth.signInWithPassword({email:l,password:p});if(J){d(J.message),N(!1);return}N(!1),$("/admin",{replace:!0})};return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5",padding:"16px"},children:e.jsxs("div",{style:{maxWidth:400,width:"100%",background:"#fff",padding:"24px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("h1",{style:{fontSize:"20px",marginBottom:"16px"},children:"ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³"}),e.jsx("p",{style:{fontSize:"13px",marginBottom:"16px"},children:"ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°åˆ†æãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†ç”»é¢ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚"}),e.jsxs("form",{onSubmit:R,children:[e.jsx("label",{style:{display:"block",fontSize:"13px",marginBottom:4},children:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"}),e.jsx("input",{type:"email",value:l,onChange:D=>n(D.target.value),required:!0,style:{width:"100%",padding:"8px",marginBottom:"12px",fontSize:"14px"}}),e.jsx("label",{style:{display:"block",fontSize:"13px",marginBottom:4},children:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"}),e.jsx("input",{type:"password",value:p,onChange:D=>a(D.target.value),required:!0,style:{width:"100%",padding:"8px",marginBottom:"16px",fontSize:"14px"}}),r&&e.jsx("div",{style:{color:"#b00020",fontSize:"12px",marginBottom:"12px",whiteSpace:"pre-wrap"},children:r}),e.jsx("button",{type:"submit",disabled:f,style:{width:"100%",padding:"10px 0",fontSize:"14px",fontWeight:600,background:"#1976d2",color:"#fff",borderRadius:"4px",border:"none",cursor:"pointer",opacity:f?.7:1},children:f?"ãƒ­ã‚°ã‚¤ãƒ³ä¸­â€¦":"ãƒ­ã‚°ã‚¤ãƒ³"})]})]})})},Al=()=>{const[l,n]=h.useState(null),[p,a]=h.useState([]),[f,N]=h.useState(!0),[r,d]=h.useState(null),[$,R]=h.useState([]),D=St();h.useEffect(()=>{(async()=>{N(!0),d(null);const{data:E,error:_}=await ve.auth.getSession();if(_||!E.session){D("/admin/login",{replace:!0});return}n(E.session.user.email??null);const{data:C,error:V}=await ve.from("running_analysis_sessions").select("id, created_at, source_video_name, distance_m, section_time_s, avg_speed_mps, label").order("created_at",{ascending:!1}).limit(50);V?d(V.message):a(C??[]),N(!1)})()},[D]);const J=async()=>{await ve.auth.signOut(),D("/admin/login",{replace:!0})},ie=async ue=>{if(window.confirm(`ã“ã®è§£æã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ
â€»å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚`))try{R(C=>[...C,ue]);const{error:_}=await ve.from("running_analysis_sessions").delete().eq("id",ue);if(_){alert("å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: "+_.message);return}a(C=>C.filter(V=>V.id!==ue))}finally{R(_=>_.filter(C=>C!==ue))}},me=p.length,ce=p[0]??null,Q=ce?new Date(ce.created_at).toLocaleString("ja-JP"):"ã¾ã è§£æãŒã‚ã‚Šã¾ã›ã‚“";return f?e.jsx("div",{style:{minHeight:"100vh",padding:24,color:"#fff"},children:"èª­ã¿è¾¼ã¿ä¸­â€¦"}):e.jsx("div",{style:{minHeight:"100vh",padding:24,color:"#fff"},children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:24,marginBottom:4},children:"ç®¡ç†ç”»é¢ãƒˆãƒƒãƒ—"}),e.jsxs("p",{style:{fontSize:13},children:["ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°å‹•ä½œè§£æã‚·ã‚¹ãƒ†ãƒ ã®ç®¡ç†è€…ç”¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã™ã€‚",e.jsx("br",{}),"ãƒ­ã‚°ã‚¤ãƒ³ä¸­ï¼š",l??"ä¸æ˜ãªãƒ¦ãƒ¼ã‚¶ãƒ¼"]})]}),e.jsx("button",{onClick:J,style:{padding:"8px 16px",fontSize:13,borderRadius:999,border:"1px solid rgba(255,255,255,0.6)",background:"rgba(0,0,0,0.3)",color:"#fff",cursor:"pointer"},children:"ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:16,marginBottom:24},children:[e.jsx(Xn,{title:"ç·è§£æã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°",value:`${me} ä»¶`,caption:"running_analysis_sessions ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ä»¶æ•°"}),e.jsx(Xn,{title:"ç›´è¿‘ã®è§£ææ—¥æ™‚",value:Q,caption:"æœ€æ–°ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆæ—¥æ™‚"}),e.jsx(Xn,{title:"ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ä½¿ã„æ–¹",value:"è§£æå±¥æ­´ã®ç¢ºèªãƒ»æ•´ç†",caption:"èª¤è§£æã‚„ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¯å‰Šé™¤ã—ã¦æ•´ç†ã§ãã¾ã™"})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsx(Bt,{to:"/admin/users",style:{display:"inline-block",padding:"6px 12px",borderRadius:999,border:"1px solid rgba(255,255,255,0.6)",fontSize:12,color:"#fff"},children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã¸ â†’"})}),e.jsxs("section",{children:[e.jsx("h2",{style:{fontSize:18,marginBottom:8},children:"è§£æã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§"}),e.jsxs("p",{style:{fontSize:13,marginBottom:12},children:["Supabase ã® ",e.jsx("code",{children:"running_analysis_sessions"})," ","ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ç›´è¿‘ 50 ä»¶ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚"]}),r&&e.jsx("div",{style:{marginBottom:12,padding:8,background:"#ffebee",color:"#b00020",fontSize:12,borderRadius:4},children:r}),p.length===0?e.jsxs("div",{style:{marginTop:12,padding:24,borderRadius:12,border:"1px dashed rgba(255,255,255,0.6)",background:"rgba(0,0,0,0.25)",textAlign:"center",fontSize:13},children:[e.jsx("p",{style:{marginBottom:8},children:"ã¾ã è§£æã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚"}),e.jsxs("p",{children:["ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã‹ã‚‰å‹•ç”»è§£æã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€",e.jsx("br",{}),"ã“ã“ã«è§£æå±¥æ­´ãŒè‡ªå‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚"]})]}):e.jsx("div",{style:{overflowX:"auto",borderRadius:12,border:"1px solid rgba(255,255,255,0.25)",background:"rgba(0,0,0,0.25)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(0,0,0,0.35)"},children:[e.jsx("th",{style:It,children:"æ—¥æ™‚"}),e.jsx("th",{style:It,children:"ID"}),e.jsx("th",{style:It,children:"å‹•ç”»å"}),e.jsx("th",{style:It,children:"è·é›¢(m)"}),e.jsx("th",{style:It,children:"åŒºé–“æ™‚é–“(s)"}),e.jsx("th",{style:It,children:"å¹³å‡é€Ÿåº¦(m/s)"}),e.jsx("th",{style:It,children:"ãƒ©ãƒ™ãƒ«"}),e.jsx("th",{style:It,children:"æ“ä½œ"})]})}),e.jsx("tbody",{children:p.map(ue=>{const E=$.includes(ue.id);return e.jsxs("tr",{children:[e.jsx("td",{style:Lt,children:new Date(ue.created_at).toLocaleString("ja-JP")}),e.jsx("td",{style:Lt,children:ue.id}),e.jsx("td",{style:Lt,children:ue.source_video_name??"-"}),e.jsx("td",{style:Lt,children:ue.distance_m??"-"}),e.jsx("td",{style:Lt,children:ue.section_time_s??"-"}),e.jsx("td",{style:Lt,children:ue.avg_speed_mps??"-"}),e.jsx("td",{style:Lt,children:ue.label??"-"}),e.jsx("td",{style:Lt,children:e.jsx("button",{onClick:()=>ie(ue.id),disabled:E,style:{padding:"4px 10px",fontSize:11,borderRadius:999,border:"none",background:E?"#888":"#ff4b5c",color:"#fff",cursor:E?"default":"pointer"},children:E?"å‰Šé™¤ä¸­â€¦":"å‰Šé™¤"})})]},ue.id)})})]})})]})]})})},Xn=({title:l,value:n,caption:p})=>e.jsxs("div",{style:{padding:16,borderRadius:12,background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.25)"},children:[e.jsx("div",{style:{fontSize:12,opacity:.85,marginBottom:4},children:l}),e.jsx("div",{style:{fontSize:18,fontWeight:600,marginBottom:4},children:n}),p&&e.jsx("div",{style:{fontSize:11,opacity:.8,lineHeight:1.4},children:p})]}),It={padding:"8px 10px",borderBottom:"1px solid rgba(255,255,255,0.3)",textAlign:"left",whiteSpace:"nowrap"},Lt={padding:"8px 10px",borderBottom:"1px solid rgba(255,255,255,0.15)",whiteSpace:"nowrap"},Pl=()=>{const l=St(),[n,p]=h.useState([]),[a,f]=h.useState(!0),[N,r]=h.useState(null);return h.useEffect(()=>{(async()=>{f(!0),r(null);const{data:$,error:R}=await ve.auth.getSession();if(R||!$.session){l("/admin/login",{replace:!0});return}const{data:D,error:J}=await ve.from("app_users").select("*").order("created_at",{ascending:!1});J?r(J.message):p(D??[]),f(!1)})()},[l]),a?e.jsx("div",{style:{minHeight:"100vh",padding:24,color:"#fff"},children:"èª­ã¿è¾¼ã¿ä¸­â€¦"}):e.jsx("div",{style:{minHeight:"100vh",padding:24,color:"#fff"},children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:22,marginBottom:4},children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†"}),e.jsx("p",{style:{fontSize:13},children:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ç™»éŒ²ã•ã‚ŒãŸåˆ©ç”¨è€…ã®ä¸€è¦§ã§ã™ã€‚"})]}),e.jsx(Bt,{to:"/admin",style:{padding:"6px 12px",borderRadius:999,border:"1px solid rgba(255,255,255,0.6)",fontSize:12,color:"#fff"},children:"â† ç®¡ç†ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹"})]}),N&&e.jsx("div",{style:{marginBottom:12,padding:8,background:"#ffebee",color:"#b00020",borderRadius:8,fontSize:12},children:N}),n.length===0?e.jsx("div",{style:{padding:24,borderRadius:12,border:"1px dashed rgba(255,255,255,0.6)",background:"rgba(0,0,0,0.25)",fontSize:13},children:"ã¾ã ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"}):e.jsx("div",{style:{overflowX:"auto",borderRadius:12,border:"1px solid rgba(255,255,255,0.25)",background:"rgba(0,0,0,0.25)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(0,0,0,0.35)"},children:[e.jsx("th",{style:Mt,children:"ç™»éŒ²æ—¥æ™‚"}),e.jsx("th",{style:Mt,children:"æ°å"}),e.jsx("th",{style:Mt,children:"æ°åï¼ˆã‹ãªï¼‰"}),e.jsx("th",{style:Mt,children:"ãƒ¡ãƒ¼ãƒ«"}),e.jsx("th",{style:Mt,children:"ç”Ÿå¹´æœˆæ—¥"}),e.jsx("th",{style:Mt,children:"éƒ½é“åºœçœŒ"}),e.jsx("th",{style:Mt,children:"éƒµä¾¿ç•ªå·"}),e.jsx("th",{style:Mt,children:"è·æ¥­"}),e.jsx("th",{style:Mt,children:"æ‰€å±"})]})}),e.jsx("tbody",{children:n.map(d=>e.jsxs("tr",{children:[e.jsx("td",{style:Rt,children:new Date(d.created_at).toLocaleString("ja-JP")}),e.jsx("td",{style:Rt,children:d.full_name}),e.jsx("td",{style:Rt,children:d.full_name_kana}),e.jsx("td",{style:Rt,children:d.email}),e.jsx("td",{style:Rt,children:d.birth_date}),e.jsx("td",{style:Rt,children:d.prefecture}),e.jsx("td",{style:Rt,children:d.postal_code}),e.jsx("td",{style:Rt,children:d.occupation??"-"}),e.jsx("td",{style:Rt,children:d.affiliation??"-"})]},d.id))})]})})]})})},Mt={padding:"8px 10px",borderBottom:"1px solid rgba(255,255,255,0.3)",textAlign:"left",whiteSpace:"nowrap"},Rt={padding:"8px 10px",borderBottom:"1px solid rgba(255,255,255,0.15)",whiteSpace:"nowrap"},Il=()=>{const l=St(),[n,p]=h.useState(!0),[a,f]=h.useState(!1);return h.useEffect(()=>{(async()=>{const{data:r,error:d}=await ve.auth.getSession();d||!r.session?l("/login",{replace:!0}):f(!0),p(!1)})()},[l]),n?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:14},children:"èªè¨¼æƒ…å ±ã‚’ç¢ºèªä¸­ã§ã™â€¦"}):a?e.jsx(qi,{}):null},Ll=()=>{var f;const[l,n]=h.useState(null),[p,a]=h.useState(!0);return h.useEffect(()=>{(async()=>{try{const{data:{session:d}}=await ve.auth.getSession();n((d==null?void 0:d.user)||null)}catch(d){console.error("Auth check error:",d)}finally{a(!1)}})();const{data:{subscription:r}}=ve.auth.onAuthStateChange((d,$)=>{n(($==null?void 0:$.user)||null)});return()=>{r.unsubscribe()}},[]),e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,height:60,zIndex:1e3,backdropFilter:"blur(10px)",background:"linear-gradient(to right, rgba(248,250,252,0.96), rgba(239,246,255,0.96))",borderBottom:"1px solid rgba(148,163,184,0.6)",boxShadow:"0 6px 16px rgba(15,23,42,0.12)",display:"flex",alignItems:"center"},children:e.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",width:"100%",padding:"0 16px",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:13},children:[e.jsxs(Bt,{to:"/dashboard",style:{display:"flex",alignItems:"baseline",gap:6,textDecoration:"none"},children:[e.jsx("span",{style:{fontSize:16,fontWeight:700,color:"#111827"},children:"ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°å‹•ä½œè§£æã‚·ã‚¹ãƒ†ãƒ "}),e.jsx("span",{style:{fontSize:11,color:"#6b7280"},children:"for Coaches & Scientists"})]}),e.jsx("nav",{style:{display:"flex",alignItems:"center",gap:16},children:l?e.jsxs(e.Fragment,{children:[e.jsx(Et,{to:"/dashboard",label:"ãƒã‚¤ãƒšãƒ¼ã‚¸"}),e.jsx(Et,{to:"/athletes",label:"é¸æ‰‹ç®¡ç†"}),e.jsx(Et,{to:"/profile",label:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±"}),e.jsx("span",{style:{height:26,width:1,background:"#d1d5db"}}),e.jsx(Et,{to:"/logout",label:"ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ"}),((f=l.user_metadata)==null?void 0:f.is_admin)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{height:26,width:1,background:"#d1d5db"}}),e.jsx(Et,{to:"/admin",label:"ç®¡ç†ç”»é¢"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{to:"/login",label:"ãƒ­ã‚°ã‚¤ãƒ³"}),e.jsx(Et,{to:"/register",label:"ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²"}),e.jsx("span",{style:{height:26,width:1,background:"#d1d5db"}}),e.jsx(Et,{to:"/admin/login",label:"ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³"})]})})]})})},Et=({to:l,label:n})=>e.jsx(Bt,{to:l,style:{color:"#111827",textDecoration:"none",fontSize:12,padding:"6px 10px",borderRadius:999,border:"1px solid transparent"},children:n});qn.createRoot(document.getElementById("root")).render(e.jsx(tn.StrictMode,{children:e.jsxs(xi,{children:[e.jsx(Ll,{}),e.jsx("div",{style:{height:60}}),e.jsxs(ui,{children:[e.jsx(bt,{path:"/",element:e.jsx(Il,{})}),e.jsx(bt,{path:"/dashboard",element:e.jsx(nl,{})}),e.jsx(bt,{path:"/athletes",element:e.jsx(zl,{})}),e.jsx(bt,{path:"/profile",element:e.jsx(Rl,{})}),e.jsx(bt,{path:"/login",element:e.jsx(Ki,{})}),e.jsx(bt,{path:"/logout",element:e.jsx(Yi,{})}),e.jsx(bt,{path:"/register",element:e.jsx(Ji,{})}),e.jsx(bt,{path:"/admin/login",element:e.jsx(Tl,{})}),e.jsx(bt,{path:"/admin",element:e.jsx(Al,{})}),e.jsx(bt,{path:"/admin/users",element:e.jsx(Pl,{})})]})]})}));
