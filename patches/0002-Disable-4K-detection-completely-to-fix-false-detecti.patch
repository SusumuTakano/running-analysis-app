From a213f1a35199b031baf68522fb1e6ed863c3c7ea Mon Sep 17 00:00:00 2001
From: SusumuTakano <genspark_dev@genspark.ai>
Date: Sun, 7 Dec 2025 06:11:02 +0000
Subject: [PATCH 02/26] Disable 4K detection completely to fix false detection

- 4K detection is now completely disabled (always returns false)
- All videos are processed as HD regardless of reported resolution
- 3840x2160 false reports are automatically corrected to 1920x1080
- Removed 4K confirmation dialog
- This fixes the persistent 4K message issue
---
 src/App.tsx | 21 ++++++++-------------
 1 file changed, 8 insertions(+), 13 deletions(-)

diff --git a/src/App.tsx b/src/App.tsx
index 867cd87..ae446ef 100644
--- a/src/App.tsx
+++ b/src/App.tsx
@@ -3574,15 +3574,10 @@ const [notesInput, setNotesInput] = useState<string>("");
             const fileSizeMB = videoFile.size / (1024 * 1024);
             console.log(`ğŸ“¹ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: ${fileSizeMB.toFixed(2)}MB`);
             
-            // 200MBä»¥ä¸‹ã¯ç¢ºå®Ÿã«HDå‹•ç”»ï¼ˆ4Kå‹•ç”»ã¯æœ€ä½ã§ã‚‚300MBä»¥ä¸Šï¼‰
-            if (fileSizeMB < 250) {
-              console.log(`âš ï¸ ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º ${fileSizeMB.toFixed(0)}MB ã‹ã‚‰åˆ¤å®š: HDå‹•ç”»ã¨ã—ã¦å‡¦ç†`);
-              correctedWidth = 1920;
-              correctedHeight = 1080;
-            } else {
-              // æœ¬å½“ã®4Kå‹•ç”»
-              console.log(`âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º ${fileSizeMB.toFixed(0)}MB ã‹ã‚‰åˆ¤å®š: çœŸã®4Kå‹•ç”»`);
-            }
+            // å¸¸ã«HDå‹•ç”»ã¨ã—ã¦å‡¦ç†ï¼ˆ4Kèª¤æ¤œå‡ºã‚’é˜²ãï¼‰
+            console.log(`âš ï¸ 3840x2160å ±å‘Šã‚’ç„¡è¦– â†’ HDå‹•ç”»ã¨ã—ã¦å‡¦ç†`);
+            correctedWidth = 1920;
+            correctedHeight = 1080;
           }
           
           // ãã®ä»–ã®èª¤èªè­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚‚ä¿®æ­£
@@ -3714,14 +3709,14 @@ const [notesInput, setNotesInput] = useState<string>("");
     console.log(`ğŸ¬ HDåˆ¤å®š: ${actualVideoWidth === 1920 && actualVideoHeight === 1080 ? 'HD (1920x1080)' : 
                  actualVideoWidth === 1280 && actualVideoHeight === 720 ? 'HD (1280x720)' : 
                  'ä»–ã®è§£åƒåº¦'}`);
-    const is4K = actualVideoWidth >= 3840 && actualVideoHeight >= 2160;
-    console.log(`ğŸ¬ 4Kåˆ¤å®šçµæœ: ${is4K ? '4Kå‹•ç”»' : 'é4Kå‹•ç”»'}`);
+    const is4K = false; // 4Kæ¤œå‡ºã‚’ç„¡åŠ¹åŒ–ï¼ˆèª¤æ¤œå‡ºãŒå¤šã„ãŸã‚ï¼‰
+    console.log(`ğŸ¬ 4Kæ¤œå‡ºç„¡åŠ¹åŒ–: HDå‹•ç”»ã¨ã—ã¦å‡¦ç†`);
     const is240Fps = targetFps >= 240;
     
     let scale = Math.min(1, MAX_WIDTH / actualVideoWidth);
     
-    // 4Kå‹•ç”»ã¾ãŸã¯240fpsã®å ´åˆã®ã¿ç¢ºèªï¼ˆ120fpsä»¥ä¸‹ã¯è‡ªå‹•å‡¦ç†ï¼‰
-    if (is4K && !isMobile) {
+    // 4Kæ¤œå‡ºã‚’ç„¡åŠ¹åŒ–ã—ãŸãŸã‚ã€ã“ã®ãƒã‚§ãƒƒã‚¯ã¯ã‚¹ã‚­ãƒƒãƒ—
+    if (false) { // 4Kæ¤œå‡ºç„¡åŠ¹
       const fullResMemoryMB = (actualVideoWidth * actualVideoHeight * totalFrames * 4) / (1024 * 1024);
       const scaledMemoryMB = (MAX_WIDTH * (actualVideoHeight * MAX_WIDTH / actualVideoWidth) * totalFrames * 4) / (1024 * 1024);
       
-- 
2.39.5

